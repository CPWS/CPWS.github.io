<!DOCTYPE html>
<html lang="zh-CN">
<head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="UTF-8">

    

    

    <title>Prossible&#39;s Blog</title>
    <meta name="author" content="zhuli">
    <meta name="keywords" content>
    <meta name="description" content>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">

    
    <link rel="alternate" href="https://sanonz.github.io/atom.xml" title="Prossible&#39;s Blog" type="application/atom+xml">
    
    
    <link rel="icon" href="https://cpws.github.io/images/favicon.ico">
    

    <style type="text/css">
    @font-face {
        font-family: 'icomoon';
        src: url("/CPWS.github.io/fonts/icomoon.eot?q628ml");
        src: url("/CPWS.github.io/fonts/icomoon.eot?q628ml#iefix") format('embedded-opentype'),
             url("/CPWS.github.io/fonts/icomoon.ttf?q628ml") format('truetype'),
             url("/CPWS.github.io/fonts/icomoon.woff?q628ml") format('woff'),
             url("/CPWS.github.io/fonts/icomoon.svg?q628ml#icomoon") format('svg');
        font-weight: normal;
        font-style: normal;
    }
    </style>
    <link rel="stylesheet" href="/CPWS.github.io/css/style.css">

    <!--[if lt IE 9]>
    <style type="text/css">
    .nav-inner {top:0;}
    .author-meta {position:static;top:0;}
    .search-form {height:36px;}
    </style>
    <script type="text/javascript" src="https://unpkg.com/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
    <![endif]-->
</head>
<body>

    <main class="app">
        <header id="header" class="header clearfix">
    <div id="nav" class="nav">
    <div class="nav-mobile">
        <button id="open-panel" class="open-panel nav-mobile-item"><i class="icon-documents"></i></button>
        <h1 class="nav-mobile-title nav-mobile-item">Prossible&#39;s Blog</h1>
        <button id="open-menus" class="open-panel nav-mobile-item"><i class="icon-library"></i></button>
    </div>

    <nav id="nav-inner" class="nav-inner">
        
            <a class="nav-item active" href="/CPWS.github.io/">
                <span class="nav-text">首页</span>
            </a>
        
            <a class="nav-item" href="/CPWS.github.io/categories/front-end">
                <span class="nav-text">前端</span>
            </a>
        
            <a class="nav-item" href="/CPWS.github.io/categories/back-end">
                <span class="nav-text">后端</span>
            </a>
        
            <a class="nav-item" href="/CPWS.github.io/tags">
                <span class="nav-text">标签</span>
            </a>
        
            <a class="nav-item" href="/CPWS.github.io/archives">
                <span class="nav-text">归档</span>
            </a>
        
            <a class="nav-item" href="https://sanonz.github.io/atom.xml">
                <span class="nav-text">订阅</span>
            </a>
        
            <a class="nav-item" href="/CPWS.github.io/about">
                <span class="nav-text">关于</span>
            </a>
        
    </nav>
</div>

    <aside id="aside" class="aside">
    <div id="aside-mask" class="aside-mask"></div>
    <div id="aside-inner" class="aside-inner">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit"><i class="icon-search-stroke"></i></button><input type="hidden" name="sitesearch" value="https://CPWS.github.io"></form>

        
        

        
        <div class="author-meta">
            
            <div class="author-avatar">
                <a href="/CPWS.github.io/">
                    <img src="http://img.mp.itc.cn/q_mini,c_zoom,w_640/upload/20161221/c495640d0fc24a91b9c95dc0d54b6002_th.jpeg" title="ZHUCHULI">
                </a>
            </div>
            
            <div class="author-name">ZHUCHULI</div>
            <div class="author-work">Web Developer &amp; Designer</div>
            <div class="author-location">
                <i class="icon-location vm"></i>
                <span class="vm">GuangZhou, China</span>
            </div>
            
            <div class="author-thread-wrap">
                <div class="author-threads clearfix">
                    
                        <a class="thread-item" href="https://github.com/CPWS" target="_blank" rel="noopener">
                            <!-- Generated by IcoMoon.io -->
<svg viewbox="0 0 1024 1024" width="38" height="38" fill="currentColor">
<path d="M512 32.12c-265.004 0-479.88 220.23-479.88 492.090 0 217.446 137.536 401.684 328.202 466.81 23.994 4.498 32.778-10.712 32.778-23.78 0-11.782-0.428-42.632-0.642-83.764-133.466 29.778-161.744-65.984-161.744-65.984-21.852-56.772-53.344-71.982-53.344-71.982-43.49-30.636 3.214-29.992 3.214-29.992 48.202 3.428 73.482 50.772 73.482 50.772 42.846 75.196 112.258 53.558 139.68 40.918 4.284-31.706 16.71-53.558 30.42-65.77-106.474-12.426-218.516-54.63-218.516-243.152 0-53.772 18.638-97.69 49.274-131.966-4.928-12.426-21.424-62.556 4.714-130.252 0 0 40.276-13.282 131.966 50.344 38.348-10.926 79.266-16.282 120.184-16.496 40.704 0.214 81.836 5.57 120.184 16.496 91.692-63.626 131.752-50.344 131.752-50.344 26.136 67.698 9.64 117.828 4.714 130.252 30.636 34.492 49.274 78.408 49.274 131.966 0 188.952-112.258 230.514-219.16 242.724 17.138 15.21 32.564 45.202 32.564 91.048 0 65.77-0.642 118.898-0.642 134.966 0 13.068 8.57 28.492 32.992 23.566 191.094-64.912 328.418-249.152 328.418-466.382 0-271.86-214.874-492.090-479.88-492.090z"/>
</svg>

                        </a>
                    
                        <a class="thread-item" href="http://weibo.com/sanonz" target="_blank" rel="noopener">
                            <!-- Generated by IcoMoon.io -->
<svg viewbox="0 0 1024 1024" width="38" height="38" fill="currentColor">
<path d="M21.332 512c0-270.988 219.68-490.666 490.668-490.666s490.666 219.68 490.666 490.666c0 270.988-219.678 490.666-490.666 490.666s-490.666-219.678-490.666-490.666zM960 512c0-247.424-200.576-448-448-448s-448 200.576-448 448c0 247.424 200.576 448 448 448s448-200.576 448-448zM768 597.332c47.128 0 85.332-38.206 85.332-85.332s-38.206-85.332-85.332-85.332c-47.128 0-85.332 38.204-85.332 85.332s38.206 85.332 85.332 85.332zM512 597.332c47.128 0 85.332-38.206 85.332-85.332s-38.206-85.332-85.332-85.332c-47.128 0-85.332 38.204-85.332 85.332s38.204 85.332 85.332 85.332zM255.998 597.332c47.128 0 85.332-38.206 85.332-85.332s-38.204-85.332-85.332-85.332c-47.128 0-85.332 38.204-85.332 85.332s38.204 85.332 85.332 85.332z"/>
</svg>

                        </a>
                    
                        <a class="thread-item" href="https://twitter.com/sanonze" target="_blank" rel="noopener">
                            <!-- Generated by IcoMoon.io -->
<svg viewbox="0 0 1024 1024" width="38" height="38" fill="currentColor">
<path d="M512.029 31.011c-263.32 0-476.784 213.502-476.784 476.784 0 263.32 213.464 476.743 476.784 476.743s476.743-213.424 476.743-476.743c0-263.282-213.444-476.784-476.743-476.784zM752.193 411.663c0.251 5.151 0.349 10.319 0.349 15.548 0 158.786-120.856 341.85-341.85 341.85-67.844 0-131.021-19.884-184.188-53.961 9.41 1.104 18.955 1.665 28.656 1.665 56.305 0 108.115-19.208 149.221-51.425-52.567-0.987-96.925-35.741-112.22-83.468 7.32 1.433 14.85 2.149 22.595 2.149 10.959 0 21.569-1.433 31.656-4.201-54.987-11.035-96.402-59.634-96.402-117.796 0-0.524 0-1.025 0.020-1.549 16.186 9.003 34.716 14.404 54.427 15.044-32.258-21.587-53.458-58.317-53.458-100.023 0-22.015 5.925-42.673 16.264-60.408 59.266 72.683 147.807 120.527 247.676 125.521-2.053-8.77-3.118-17.968-3.118-27.378 0-66.333 53.787-120.14 120.158-120.14 34.561 0 65.771 14.599 87.69 37.93 27.378-5.363 53.091-15.393 76.305-29.16-9.003 28.074-28.036 51.618-52.858 66.47 24.338-2.903 47.495-9.37 69.024-18.917-16.070 24.144-36.459 45.306-59.945 62.248z"/>
</svg>

                        </a>
                    
                </div>
            </div>
            
        </div>
        
    </div>
</aside>

</header>

        <div id="content" class="content">
            <div id="wrapper" class="wrapper" style="max-width: 800px">
                
    <article class="article" itemscope itemprop="blogPost">
    
    <header class="article-header">
        
        <h1 itemprop="name">
            <a href="/CPWS.github.io/2019/11/17/数据库系统概述/">数据库系统概述</a>
        </h1>
        
        <div class="article-meta clearfix">
            <a class="article-date" href="https://CPWS.github.io/page/2/index.html">
    
    <i class="icon-calendar"></i>
    
    <time datetime="2019-11-17T11:50:32.000Z" itemprop="datePublished">2019-11-17</time>
</a>

            
<div class="article-tag-list">
    <i class="icon-tag"></i>
    <a class="article-tag-link" href="/CPWS.github.io/tags/数据库系统概述/">数据库系统概述</a>
</div>


        </div>
    </header>
    
    <section class="article-body markdown-body">
        
        <h2 id="第一章-绪论"><a href="#第一章-绪论" class="headerlink" title="第一章 绪论"></a>第一章 绪论</h2><h3 id="数据库系统概述"><a href="#数据库系统概述" class="headerlink" title="数据库系统概述"></a>数据库系统概述</h3><ol>
<li><p>数据库地位</p>
<blockquote>
<ul>
<li>数据库是管理数据的最新技术。</li>
<li>数据库技术是信息系统的核心和基础。</li>
</ul>
</blockquote>
</li>
<li><p>四个基本概念</p>
</li>
</ol>
<blockquote>
<ul>
<li><code>数据(data)</code><blockquote>
<ul>
<li>数据是数据库中存储的基本对象</li>
<li>数据的定义：描述事物的符号记录成为数据。</li>
<li>数据的语义：数据的含义成为数据的语义，数据与其语义是不可分的。</li>
<li>记录是计算机中表示和存储数据的一种格式或一种方法。</li>
</ul>
</blockquote>
</li>
</ul>
</blockquote>
<blockquote>
<ul>
<li><code>数据库(DataBase，DB)</code><blockquote>
<ul>
<li>数据库，顾名思义，就是存储数据的仓库。只不过这个仓库是在计算机存储设备上，而且数据是按照一定的的格式存放的。</li>
<li>数据库的定义：数据库是长期存储在计算机中的、有组织的、可共享的大量的数据的集合。</li>
<li>数据库中的数据按照一定的额数据模型组织，描述和存储，具有较小的冗余度，较高的数据独立性和易扩展性，并可为多用户共享。</li>
<li>概括的讲，数据库数据具有永久存储、有组织和可共享三个基本特点。</li>
</ul>
</blockquote>
</li>
</ul>
</blockquote>
<blockquote>
<ul>
<li><code>数据库管理系统(DataBase Management System，DBMS)</code><blockquote>
<ul>
<li>了解了数据和数据库的基本概念，下一个问题就是如何科学的组织和存储数据，如何高效的获取和恢复数据。完成这个任务的是一个软件–数据库管理系统。</li>
<li>数据库管理系统是位于用户与操作系统之间的一层数据管理软件。数据库管理系统与操作系统一样是计算机的基础软件，也是一个大型复杂的软件系统。</li>
<li>数据库管理的功能:数据定义功能(DDL)、数据组织，存储和管理、数据库的操纵功能、数据库的事务管理和运行管理、数据库的建立和维护功能、其他功能。</li>
</ul>
</blockquote>
</li>
</ul>
</blockquote>
<blockquote>
<ul>
<li><code>数据库系统(DataBase System,DBS)</code><blockquote>
<ul>
<li>数据库系统是由数据库、数据库管理系统、应用程序和数据库管理员<code>(DataBase Administrator,DBA)</code>组成的存储、管理、处理和维护数据的系统。 </li>
</ul>
</blockquote>
</li>
</ul>
</blockquote>
<p><img src="https://i.loli.net/2019/11/19/hfeGLaSRoBixvwp.png" alt="DBS.png"></p>
<blockquote>
<blockquote>
<ul>
<li>其中，数据库提供数据的存储功能，数据库管理系统提供数据的组织、存取、管理和维护等基础功能，数据库应用系统根据应用需求使用数据库，数据库管理员负责全面管理数据库系统。</li>
</ul>
</blockquote>
</blockquote>
<p><img src="https://i.loli.net/2019/11/19/BOz9LGVM4Z1Nxby.png" alt="层次结构.png"></p>
<blockquote>
<blockquote>
<ul>
<li>在一般不引起混杂的情况下，人们常常把数据库系统简称数据库。</li>
</ul>
</blockquote>
</blockquote>
<h3 id="数据库管理技术的产生和发展"><a href="#数据库管理技术的产生和发展" class="headerlink" title="数据库管理技术的产生和发展"></a>数据库管理技术的产生和发展</h3><ol>
<li>数据库技术是应数据管理任务的需要而产生的。</li>
<li>数据管理：数据管理是指对数据进行分类、组织、编码、存储、检索和维护，它是数据处理的中心问题。</li>
<li>数据处理：数据处理是指对各种数据进行收集、存储、加工和传播的一系列的活动的总和。</li>
<li>在应用需求的推动下，在计算机硬件、软件基础上，数据管理技术经历了人工管理、文件系统、数据库技术三个阶段。这三个阶段的特点如下表所示：</li>
</ol>
<p><img src="https://i.loli.net/2019/11/20/PWB5OjCcolwpfh7.png" alt="DBMS-3.png"></p>
<ol start="5">
<li>人工管理阶段<blockquote>
<ul>
<li>20世纪50年代中期以前，计算机主要用于科学计算。当时的硬件条件是，外存只有纸带、卡片和磁带、没有磁盘等直接存储的设备；软件条件是，没有操作系统，没有管理数据的专门软件;数据处理方式是批处理。</li>
<li>人工管理数据具有如下特点:<blockquote>
<ul>
<li>数据不保存</li>
<li>应用程序管理数据</li>
<li>数据不共享</li>
<li>数据不具备独立性</li>
</ul>
</blockquote>
</li>
</ul>
</blockquote>
</li>
</ol>

        
    </section>
</article>


    <article class="article" itemscope itemprop="blogPost">
    
    <header class="article-header">
        
        <h1 itemprop="name">
            <a href="/CPWS.github.io/2019/11/16/HttpClient/">HttpClient</a>
        </h1>
        
        <div class="article-meta clearfix">
            <a class="article-date" href="https://CPWS.github.io/page/2/index.html">
    
    <i class="icon-calendar"></i>
    
    <time datetime="2019-11-16T08:24:20.000Z" itemprop="datePublished">2019-11-16</time>
</a>

            
<div class="article-tag-list">
    <i class="icon-tag"></i>
    <a class="article-tag-link" href="/CPWS.github.io/tags/HttpClient/">HttpClient</a>
</div>


        </div>
    </header>
    
    <section class="article-body markdown-body">
        
        <h2 id="HttpCLient使用步骤"><a href="#HttpCLient使用步骤" class="headerlink" title="HttpCLient使用步骤"></a>HttpCLient使用步骤</h2><p>模拟浏览器调用服务层请求数据.</p>
<h3 id="Get请求"><a href="#Get请求" class="headerlink" title="Get请求"></a>Get请求</h3><ul>
<li><p>实现步骤</p>
<ul>
<li>第一步：把HttpClient使用的jar包添加到工程中。</li>
<li>第二步：创建一个HttpClient的测试类</li>
<li>第三步：创建测试方法。</li>
<li>第四步：创建一个HttpClient对象</li>
<li>第五步：创建一个HttpGet对象，需要制定一个请求的url</li>
<li>第六步：执行请求。</li>
<li>第七步：接收返回结果。HttpEntity对象。</li>
<li>第八步：取响应的内容。</li>
<li>第九步：关闭HttpGet、HttpClient。</li>
</ul>
</li>
<li><p>测试代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testHttpGet</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    <span class="comment">// 第一步：把HttpClient使用的jar包添加到工程中。</span></span><br><span class="line">    <span class="comment">// 第二步：创建一个HttpClient的测试类</span></span><br><span class="line">    <span class="comment">// 第三步：创建测试方法。</span></span><br><span class="line">    <span class="comment">// 第四步：创建一个HttpClient对象</span></span><br><span class="line">    CloseableHttpClient httpClient = HttpClients.createDefault();</span><br><span class="line">    <span class="comment">// 第五步：创建一个HttpGet对象，需要制定一个请求的url</span></span><br><span class="line">    HttpGet get = <span class="keyword">new</span> HttpGet(<span class="string">"http://www.itheima.com"</span>);</span><br><span class="line">    <span class="comment">// 第六步：执行请求。</span></span><br><span class="line">    CloseableHttpResponse response = httpClient.execute(get);</span><br><span class="line">    <span class="comment">// 第七步：接收返回结果。HttpEntity对象。</span></span><br><span class="line">    HttpEntity entity = response.getEntity();</span><br><span class="line">    <span class="comment">// 第八步：取响应的内容。</span></span><br><span class="line">    String html = EntityUtils.toString(entity);</span><br><span class="line">    System.out.println(html);</span><br><span class="line">    <span class="comment">// 第九步：关闭response、HttpClient。</span></span><br><span class="line">    response.close();</span><br><span class="line">    httpClient.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="Post请求"><a href="#Post请求" class="headerlink" title="Post请求"></a>Post请求</h3><ul>
<li>实现步骤<ul>
<li>第一步：创建一个httpClient对象</li>
<li>第二步：创建一个HttpPost对象。需要指定一个url</li>
<li>第三步：创建一个list模拟表单，list中每个元素是一个NameValuePair对象</li>
<li>第四步：需要把表单包装到Entity对象中。StringEntity</li>
<li>第五步：执行请求。</li>
<li>第六步：接收返回结果</li>
<li>第七步：关闭流。</li>
</ul>
</li>
<li>测试代码<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testHttpPost</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 第一步：创建一个httpClient对象</span></span><br><span class="line">    CloseableHttpClient httpClient = HttpClients.createDefault();</span><br><span class="line">    <span class="comment">// 第二步：创建一个HttpPost对象。需要指定一个url</span></span><br><span class="line">    HttpPost post = <span class="keyword">new</span> HttpPost(<span class="string">"http://localhost:8082/posttest.html"</span>);</span><br><span class="line">    <span class="comment">// 第三步：创建一个list模拟表单，list中每个元素是一个NameValuePair对象</span></span><br><span class="line">    List&lt;NameValuePair&gt; formList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">    formList.add(<span class="keyword">new</span> BasicNameValuePair(<span class="string">"name"</span>, <span class="string">"张三"</span>));</span><br><span class="line">    formList.add(<span class="keyword">new</span> BasicNameValuePair(<span class="string">"pass"</span>, <span class="string">"1243"</span>));</span><br><span class="line">    <span class="comment">// 第四步：需要把表单包装到Entity对象中。StringEntity</span></span><br><span class="line">    StringEntity entity = <span class="keyword">new</span> UrlEncodedFormEntity(formList, <span class="string">"utf-8"</span>);</span><br><span class="line">    post.setEntity(entity);</span><br><span class="line">    <span class="comment">// 第五步：执行请求。</span></span><br><span class="line">    CloseableHttpResponse response = httpClient.execute(post);</span><br><span class="line">    <span class="comment">// 第六步：接收返回结果</span></span><br><span class="line">    HttpEntity httpEntity = response.getEntity();</span><br><span class="line">    String result = EntityUtils.toString(httpEntity);</span><br><span class="line">    System.out.println(result);</span><br><span class="line">    <span class="comment">// 第七步：关闭流。</span></span><br><span class="line">    response.close();</span><br><span class="line">    httpClient.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>

        
    </section>
</article>


    <article class="article" itemscope itemprop="blogPost">
    
    <header class="article-header">
        
        <h1 itemprop="name">
            <a href="/CPWS.github.io/2019/11/01/Java框架下载路径/">Java框架下载路径</a>
        </h1>
        
        <div class="article-meta clearfix">
            <a class="article-date" href="https://CPWS.github.io/page/2/index.html">
    
    <i class="icon-calendar"></i>
    
    <time datetime="2019-11-01T11:50:29.000Z" itemprop="datePublished">2019-11-01</time>
</a>

            
<div class="article-tag-list">
    <i class="icon-tag"></i>
    <a class="article-tag-link" href="/CPWS.github.io/tags/Java框架下载路径/">Java框架下载路径</a>
</div>


        </div>
    </header>
    
    <section class="article-body markdown-body">
        
        <h3 id="Struts框架下载路径"><a href="#Struts框架下载路径" class="headerlink" title="Struts框架下载路径"></a>Struts框架下载路径</h3><ul>
<li><code>https://struts.apache.org/download.cgi#struts2520</code></li>
<li>学习视频：<code>https://www.bilibili.com/video/av31846422/</code><h3 id="Hibernate框架下载路径"><a href="#Hibernate框架下载路径" class="headerlink" title="Hibernate框架下载路径"></a>Hibernate框架下载路径</h3></li>
<li><code>http://hibernate.org/orm/releases/</code></li>
<li>学习视频：<code>https://www.bilibili.com/video/av31842997/</code><h3 id="Mybatis框架下载路径"><a href="#Mybatis框架下载路径" class="headerlink" title="Mybatis框架下载路径"></a>Mybatis框架下载路径</h3></li>
<li><code>https://github.com/mybatis/mybatis-3/releases</code><h3 id="Spring与Mybatis整合的jar包"><a href="#Spring与Mybatis整合的jar包" class="headerlink" title="Spring与Mybatis整合的jar包"></a>Spring与Mybatis整合的jar包</h3><code>https://blog.csdn.net/qiangqiang816/article/details/81541188</code><h3 id="Spring框架下载路径"><a href="#Spring框架下载路径" class="headerlink" title="Spring框架下载路径"></a>Spring框架下载路径</h3></li>
<li><code>https://repo.spring.io/release/org/springframework/spring/</code><h3 id="SpringMVC框架下载路径"><a href="#SpringMVC框架下载路径" class="headerlink" title="SpringMVC框架下载路径"></a>SpringMVC框架下载路径</h3></li>
<li><code>https://repo.spring.io/release/org/springframework/spring/</code></li>
<li>SSM学习视频：<code>https://www.bilibili.com/video/av41334365/</code><h3 id="maven仓库路径"><a href="#maven仓库路径" class="headerlink" title="maven仓库路径"></a>maven仓库路径</h3></li>
<li><code>https://mvnrepository.com/</code><h3 id="Commons-io-Commons-fileupload"><a href="#Commons-io-Commons-fileupload" class="headerlink" title="Commons-io,Commons-fileupload"></a>Commons-io,Commons-fileupload</h3></li>
<li><code>http://commons.apache.org/proper/commons-io/</code></li>
<li><code>http://commons.apache.org/proper/commons-fileupload/</code></li>
</ul>
<h3 id="redis安装"><a href="#redis安装" class="headerlink" title="redis安装"></a>redis安装</h3><ul>
<li>官方网站：<a href="http://redis.io" target="_blank" rel="noopener">http://redis.io</a></li>
</ul>
<h3 id="开发工具连接"><a href="#开发工具连接" class="headerlink" title="开发工具连接"></a>开发工具连接</h3><ul>
<li><code>https://pan.baidu.com/s/1A9VWHJMzow_zD0Pkp0d7jw</code></li>
<li><code>H97F</code><h3 id="项目实战"><a href="#项目实战" class="headerlink" title="项目实战"></a>项目实战</h3></li>
</ul>
<ol>
<li>917-web学生校园在线点餐系统源码ssm实现java+mysql项目源代码</li>
</ol>
<ul>
<li><code>https://pan.baidu.com/s/1mt9pDdOjoqTty-x-Dqm-FA</code></li>
<li>提取码：<code>rd37</code></li>
</ul>
<ol start="2">
<li></li>
</ol>
<ul>
<li>smm项目链接：<code>https://pan.baidu.com/s/185P0EwiVzr5M_d182PPmkA</code></li>
<li>提取码：<code>pvjc</code></li>
<li>springmvc+Mybatis链接：<code>https://pan.baidu.com/s/1CYIpdJhHzZjlSOOHBuak1g</code></li>
<li>提取码：<code>4gp2</code></li>
</ul>
<h3 id="lucene-solr"><a href="#lucene-solr" class="headerlink" title="lucene+solr"></a>lucene+solr</h3><ul>
<li>lucene+solr视频教程（四套）：</li>
<li><code>https://pan.baidu.com/s/10so9BJhlNj_bbRX7IBO2Pw</code>：<code>提取码: 74ew</code></li>
</ul>
<h3 id="elasticsearch"><a href="#elasticsearch" class="headerlink" title="elasticsearch"></a>elasticsearch</h3><ul>
<li>elasticsearch教程（三套）：</li>
<li>链接：<code>https://pan.baidu.com/s/1t0VLlWaZxLM5SHlnqVl15g</code>:<code>提取码：q4fg</code></li>
</ul>

        
    </section>
</article>


    <article class="article" itemscope itemprop="blogPost">
    
    <header class="article-header">
        
        <h1 itemprop="name">
            <a href="/CPWS.github.io/2019/11/01/SSM框架整合-配置文件/">SSM框架整合-配置文件</a>
        </h1>
        
        <div class="article-meta clearfix">
            <a class="article-date" href="https://CPWS.github.io/page/2/index.html">
    
    <i class="icon-calendar"></i>
    
    <time datetime="2019-11-01T11:49:43.000Z" itemprop="datePublished">2019-11-01</time>
</a>

            
<div class="article-tag-list">
    <i class="icon-tag"></i>
    <a class="article-tag-link" href="/CPWS.github.io/tags/SSM框架整合-配置文件/">SSM框架整合-配置文件</a>
</div>


        </div>
    </header>
    
    <section class="article-body markdown-body">
        
        <h2 id="Web-xml配置文件"><a href="#Web-xml配置文件" class="headerlink" title="Web.xml配置文件"></a>Web.xml配置文件</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span> <span class="attr">xmlns</span>=<span class="string">"http://java.sun.com/xml/ns/javaee"</span> <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"</span> <span class="attr">version</span>=<span class="string">"3.0"</span>&gt;</span></span><br><span class="line"> 	<span class="comment">&lt;!-- 配置上下文参数 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:applicationContext.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">listener</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">listener-class</span>&gt;</span>org.springframework.web.context.ContextLoaderListener<span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">listener</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- SpringMVC前端控制器 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springmvc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">    		<span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">    		<span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:springmvc.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springmvc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 字符编码过滤器 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">    		<span class="tag">&lt;<span class="name">param-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">    		<span class="tag">&lt;<span class="name">param-value</span>&gt;</span>utf-8<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="Spring框架的常用配置"><a href="#Spring框架的常用配置" class="headerlink" title="Spring框架的常用配置"></a>Spring框架的常用配置</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">		<span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">		<span class="attr">xmlns:aop</span>=<span class="string">"http://www.springframework.org/schema/aop"</span></span></span><br><span class="line"><span class="tag">		<span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag">		<span class="attr">xmlns:tx</span>=<span class="string">"http://www.springframework.org/schema/tx"</span></span></span><br><span class="line"><span class="tag">		<span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">		http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">		http://www.springframework.org/schema/aop</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/aop/spring-aop.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/context/spring-context.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/tx</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/tx/spring-tx.xsd"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">default-autowire</span>=<span class="string">"byName"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 扫描注解 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.gdaib.service.impl"</span>&gt;</span><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- 加载属性文件 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">"classpath:db.properties"</span>/&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- 数据源 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"dataSource"</span> <span class="attr">class</span>=<span class="string">"org.springframework.jdbc.datasource.DriverManagerDataSource"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driverClassName"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.driver&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"url"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.url&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.username&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.password&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- SqlSessionFactory --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"factory"</span> <span class="attr">class</span>=<span class="string">"org.mybatis.spring.SqlSessionFactoryBean"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"typeAliasesPackage"</span> <span class="attr">value</span>=<span class="string">"com.gdaib.pojo"</span> &gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- 扫描器 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.mybatis.spring.mapper.MapperScannerConfigurer"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"basePackage"</span> <span class="attr">value</span>=<span class="string">"com.gdaib.mapper"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"sqlSessionFactoryBeanName"</span> <span class="attr">value</span>=<span class="string">"factory"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- 事务管理器 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"txManager"</span> <span class="attr">class</span>=<span class="string">"org.springframework.jdbc.datasource.DataSourceTransactionManager"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- 声明式事务 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">tx:advice</span> <span class="attr">id</span>=<span class="string">"txAdvice"</span> <span class="attr">transaction-manager</span>=<span class="string">"txManager"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">"ins*"</span>/&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">"del*"</span>/&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">"upd*"</span>/&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">"*"</span> <span class="attr">read-only</span>=<span class="string">"true"</span>/&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">tx:advice</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- 配置AOP --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">expression</span>=<span class="string">"execution(* com.gdaib.service.impl.*.*(..))"</span> <span class="attr">id</span>=<span class="string">"mypoint"</span>/&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">aop:advisor</span> <span class="attr">advice-ref</span>=<span class="string">"txAdvice"</span> <span class="attr">pointcut-ref</span>=<span class="string">"mypoint"</span>/&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="SpringMVC的常用配置"><a href="#SpringMVC的常用配置" class="headerlink" title="SpringMVC的常用配置"></a>SpringMVC的常用配置</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">		<span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">		<span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag">		<span class="attr">xmlns:mvc</span>=<span class="string">"http://www.springframework.org/schema/mvc"</span></span></span><br><span class="line"><span class="tag">		<span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">		http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">		http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/context/spring-context.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/mvc</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/mvc/spring-mvc.xsd"</span>&gt;</span></span><br><span class="line">      	<span class="comment">&lt;!-- 扫描注解 --&gt;</span></span><br><span class="line">      	<span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.gdaib.controller"</span>&gt;</span><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line">      	<span class="comment">&lt;!-- 注解确定， 注册HandlerMapping和HandlerAdapter--&gt;</span></span><br><span class="line">      	<span class="tag">&lt;<span class="name">mvc:annotation-driven</span>&gt;</span><span class="tag">&lt;/<span class="name">mvc:annotation-driven</span>&gt;</span></span><br><span class="line">      	<span class="comment">&lt;!-- 设置静态 --&gt;</span></span><br><span class="line">      	<span class="tag">&lt;<span class="name">mvc:resources</span> <span class="attr">location</span>=<span class="string">"/js/"</span> <span class="attr">mapping</span>=<span class="string">"/js/**"</span>&gt;</span><span class="tag">&lt;/<span class="name">mvc:resources</span>&gt;</span></span><br><span class="line">      	<span class="tag">&lt;<span class="name">mvc:resources</span> <span class="attr">location</span>=<span class="string">"/css/"</span> <span class="attr">mapping</span>=<span class="string">"/css/**"</span>&gt;</span><span class="tag">&lt;/<span class="name">mvc:resources</span>&gt;</span></span><br><span class="line">      	<span class="tag">&lt;<span class="name">mvc:resources</span> <span class="attr">location</span>=<span class="string">"/images/"</span> <span class="attr">mapping</span>=<span class="string">"/images/**"</span>&gt;</span><span class="tag">&lt;/<span class="name">mvc:resources</span>&gt;</span></span><br><span class="line">      	<span class="comment">&lt;!-- 视图解析器 --&gt;</span></span><br><span class="line">      	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"viewResource"</span> <span class="attr">class</span>=<span class="string">"org.springframework.web.servlet.view.InternalResourceViewResolver"</span>&gt;</span></span><br><span class="line">      		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"prefix"</span> <span class="attr">value</span>=<span class="string">"/"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">      		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"suffix"</span> <span class="attr">value</span>=<span class="string">"*.jsp"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">      	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="资源文件常用配置"><a href="#资源文件常用配置" class="headerlink" title="资源文件常用配置"></a>资源文件常用配置</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">jdbc.driver=com.mysql.cj.jdbc.Driver</span><br><span class="line">jdbc.url=jdbc:mysql://localhost:3306/ssm?serverTimezone=UTC&amp;characterEncoding=utf8</span><br><span class="line">jdbc.password=123456</span><br><span class="line">jdbc.username=root</span><br></pre></td></tr></table></figure>
        
    </section>
</article>


    <article class="article" itemscope itemprop="blogPost">
    
    <header class="article-header">
        
        <h1 itemprop="name">
            <a href="/CPWS.github.io/2019/10/31/maven/">maven</a>
        </h1>
        
        <div class="article-meta clearfix">
            <a class="article-date" href="https://CPWS.github.io/page/2/index.html">
    
    <i class="icon-calendar"></i>
    
    <time datetime="2019-10-31T10:59:50.000Z" itemprop="datePublished">2019-10-31</time>
</a>

            
<div class="article-tag-list">
    <i class="icon-tag"></i>
    <a class="article-tag-link" href="/CPWS.github.io/tags/maven/">maven</a>
</div>


        </div>
    </header>
    
    <section class="article-body markdown-body">
        
        <h2 id="搭建maven项目时setting-xml的设置"><a href="#搭建maven项目时setting-xml的设置" class="headerlink" title="搭建maven项目时setting.xml的设置"></a>搭建maven项目时setting.xml的设置</h2><ul>
<li><p>镜像包添加</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mirrors</span>&gt;</span></span><br><span class="line"> </span><br><span class="line">     <span class="tag">&lt;<span class="name">mirror</span>&gt;</span> </span><br><span class="line">     <span class="tag">&lt;<span class="name">id</span>&gt;</span>alimaven<span class="tag">&lt;/<span class="name">id</span>&gt;</span> </span><br><span class="line">     <span class="tag">&lt;<span class="name">name</span>&gt;</span>aliyun maven<span class="tag">&lt;/<span class="name">name</span>&gt;</span> </span><br><span class="line">     <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://maven.aliyun.com/nexus/content/groups/public/<span class="tag">&lt;/<span class="name">url</span>&gt;</span> </span><br><span class="line">     <span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>central<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span> </span><br><span class="line">     <span class="tag">&lt;/<span class="name">mirror</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mirrors</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>本地仓库配置：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">localRepository</span>&gt;</span><span class="tag">&lt;<span class="name">localRepository</span>/&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>JDK版本的配置</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">profile</span>&gt;</span>    </span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span>&gt;</span>jdk-1.8<span class="tag">&lt;/<span class="name">id</span>&gt;</span>    </span><br><span class="line">    <span class="tag">&lt;<span class="name">activation</span>&gt;</span>    </span><br><span class="line">    	<span class="tag">&lt;<span class="name">activeByDefault</span>&gt;</span>true<span class="tag">&lt;/<span class="name">activeByDefault</span>&gt;</span>    </span><br><span class="line">    	<span class="tag">&lt;<span class="name">jdk</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">jdk</span>&gt;</span>    </span><br><span class="line">    <span class="tag">&lt;/<span class="name">activation</span>&gt;</span>    </span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span>    </span><br><span class="line">    	<span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span>    </span><br><span class="line">    	<span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span>    </span><br><span class="line">    	<span class="tag">&lt;<span class="name">maven.compiler.compilerVersion</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">maven.compiler.compilerVersion</span>&gt;</span>    </span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span>    </span><br><span class="line"><span class="tag">&lt;/<span class="name">profile</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>Tomcat的配置</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.codehaus.mojo<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>tomcat-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">path</span>&gt;</span>/<span class="tag">&lt;/<span class="name">path</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">port</span>&gt;</span>8080<span class="tag">&lt;/<span class="name">port</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">uriEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">uriEncoding</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://localhost:8080/manager/html<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">server</span>&gt;</span>tomcat6<span class="tag">&lt;/<span class="name">server</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>

        
    </section>
</article>


    <article class="article" itemscope itemprop="blogPost">
    
    <header class="article-header">
        
        <h1 itemprop="name">
            <a href="/CPWS.github.io/2019/10/31/springmvc/">springmvc</a>
        </h1>
        
        <div class="article-meta clearfix">
            <a class="article-date" href="https://CPWS.github.io/page/2/index.html">
    
    <i class="icon-calendar"></i>
    
    <time datetime="2019-10-31T10:59:40.000Z" itemprop="datePublished">2019-10-31</time>
</a>

            
<div class="article-tag-list">
    <i class="icon-tag"></i>
    <a class="article-tag-link" href="/CPWS.github.io/tags/springmvc/">springmvc</a>
</div>


        </div>
    </header>
    
    <section class="article-body markdown-body">
        
        <h3 id="SpringMVC简介"><a href="#SpringMVC简介" class="headerlink" title="SpringMVC简介"></a>SpringMVC简介</h3><ol>
<li>SpringMVC中重要组件：<blockquote>
<ul>
<li><code>DispatcherServlet</code>：前端控制器，接收所有请求（如果配置<code>/</code>则不包含jsp）</li>
<li><code>HandlerMapping</code>：解析请求格式，判断希望要执行哪个具体的方法。</li>
<li><code>HandlerAdapter</code>：负责调用具体的方法。</li>
<li><code>ViewResolver</code>：视图解析器。解析结果，准备跳转到具体的物理视图。</li>
</ul>
</blockquote>
</li>
<li>SpringMVC运行原理图。</li>
</ol>
<p><img src="https://i.loli.net/2019/10/31/FdS49BbymskY1tT.png" alt="1572525012_1_.png"></p>
<ol start="3">
<li>Spring容器和Springmvc容器的关系<blockquote>
<ul>
<li>代码</li>
</ul>
</blockquote>
</li>
</ol>
<p><img src="https://i.loli.net/2019/11/01/eU29QEmcgsFNhGl.png" alt="Spring-springmvc.png"></p>
<blockquote>
<ul>
<li>Spring容器和Springmvc容器的关系是父子容器<blockquote>
<ul>
<li>Springmvc容器中能够调用Spring容器的所有内容</li>
<li>图示</li>
</ul>
</blockquote>
</li>
</ul>
</blockquote>
<p><img src="https://i.loli.net/2019/11/01/jxHwaKE7kypvTuB.png" alt="springmvc02.png"></p>
<h3 id="SpringMVC环境搭建"><a href="#SpringMVC环境搭建" class="headerlink" title="SpringMVC环境搭建"></a>SpringMVC环境搭建</h3><ol>
<li>导入jar包</li>
</ol>
<p><img src="https://i.loli.net/2019/11/01/Ahy8GaqEbTnM72m.png" alt="1572584411_1_.png"></p>
<ol start="2">
<li><p>在web.xml中配置前端控制器:DispatcherServlet</p>
<blockquote>
<ul>
<li>如果不配置<code>&lt;init-param&gt;</code>，则会在<code>/WEB-INF/</code>找配置文件</li>
</ul>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span> <span class="attr">xmlns</span>=<span class="string">"http://java.sun.com/xml/ns/javaee"</span> <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"</span> <span class="attr">version</span>=<span class="string">"3.0"</span>&gt;</span></span><br><span class="line"> 	<span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line"> 		<span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springmvc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line"> 		<span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line"> 		<span class="comment">&lt;!-- 修改配置文件路径和名称 --&gt;</span></span><br><span class="line"> 		<span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line"> 			<span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line"> 			<span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:springmvc.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line"> 		<span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line"> 		<span class="comment">&lt;!-- 自启动 --&gt;</span></span><br><span class="line"> 		<span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line"> 	<span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"> 	<span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"> 		<span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springmvc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line"> 		<span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"> 	<span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>新建Springmvc.xml配置文件，引入<code>xmlns:mvc</code>属性命名空间。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">		<span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">		<span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag">		<span class="attr">xmlns:mvc</span>=<span class="string">"http://www.springframework.org/schema/mvc"</span></span></span><br><span class="line"><span class="tag">		<span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">		http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">		http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/context/spring-context.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/mvc</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/mvc/spring-mvc.xsd"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 注解扫描器 --&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.gdaib.controller"</span>&gt;</span><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!-- 配置注解驱动 --&gt;</span><span class="comment">&lt;!-- 相当于配置如下两个属性 --&gt;</span></span><br><span class="line">       <span class="comment">&lt;!-- org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping --&gt;</span></span><br><span class="line">       <span class="comment">&lt;!-- org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter --&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">mvc:annotation-driven</span>&gt;</span><span class="tag">&lt;/<span class="name">mvc:annotation-driven</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!-- 静态资源 --&gt;</span></span><br><span class="line">       <span class="comment">&lt;!-- 第一个参数：不拦截某个目录，第二个参数访问的路径,**代表该目录下的所有文件 --&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">mvc:resources</span> <span class="attr">location</span>=<span class="string">"/js/"</span> <span class="attr">mapping</span>=<span class="string">"/js/**"</span>&gt;</span><span class="tag">&lt;/<span class="name">mvc:resources</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>编写控制器类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.gdaib.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DemoController</span> </span>&#123;</span><br><span class="line">	<span class="meta">@RequestMapping</span>(<span class="string">"demo"</span>)</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">demo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"执行demo"</span>);</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"main.jsp"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="meta">@RequestMapping</span>(<span class="string">"demo2"</span>)</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">demo2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"指定demo2"</span>);</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"main.jsp"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="字符编码过滤器"><a href="#字符编码过滤器" class="headerlink" title="字符编码过滤器"></a>字符编码过滤器</h3><ol>
<li>在<code>web.xml</code>中配置Filter<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 解决中文乱码 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>utf-8<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="传参"><a href="#传参" class="headerlink" title="传参"></a>传参</h3><ol>
<li><p>把内容写到方法（HandlerMethod）参数中， SpringMVC中只要有这个内容，注入内容</p>
</li>
<li><p>基本数据类型参数，默认保证参数名称和参数名称一样</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"demo"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">demo</span><span class="params">(String name,<span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">    System.out.println(<span class="string">"执行demo"</span>);</span><br><span class="line">    System.out.println(name + <span class="string">"|"</span> + age);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"main.jsp"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>如果请求名和参数名不对应应使用<code>@RequestParam()</code>赋值</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"demo"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">demo</span><span class="params">(@RequestParam(value=<span class="string">"name"</span>)</span>String name,@<span class="title">RequestParam</span><span class="params">(value=<span class="string">"age"</span>)</span><span class="keyword">int</span> age) </span>&#123;</span><br><span class="line">    System.out.println(<span class="string">"执行demo"</span>);</span><br><span class="line">    System.out.println(name + <span class="string">"|"</span> + age);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"main.jsp"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>如果方法参数是基本数据类型（不是封装类），可以为其设置默认值</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//如果参数为空时，为他们设置默认值</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"page"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">page</span><span class="params">(@RequestParam(defaultValue = <span class="string">"2"</span>)</span><span class="keyword">int</span> pageSize,@<span class="title">RequestParam</span><span class="params">(defaultValue = <span class="string">"1"</span>)</span><span class="keyword">int</span> pageNumber) </span>&#123;</span><br><span class="line">    System.out.println(pageSize+<span class="string">" "</span>+pageNumber);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"main.jsp"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>如果强制要求必须有某个参数</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"demo2"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">demo2</span><span class="params">(@RequestParam(required = <span class="keyword">true</span>)</span>String name) </span>&#123;</span><br><span class="line">    System.out.println(<span class="string">"必须传递name参数："</span>+name);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"main.js"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>HandlerMethod中参数是对象类型，请求参数名和对象中属性一致（get/set）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"demo4"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">demo4</span><span class="params">(People peo)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"main.js"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>请求参数中包含多个同名参数的获取方法</p>
<blockquote>
<ul>
<li>复选框传递的参数就是多个同名参数</li>
</ul>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"demo5"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">demo5</span><span class="params">(String name,<span class="keyword">int</span> age,@RequestParam(<span class="string">"hover"</span>)</span>List&lt;String&gt; hover) </span>&#123;</span><br><span class="line">    System.out.println(name + <span class="string">" "</span>+age+<span class="string">" "</span>+hover);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"main.jsp"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>请求参数中对象.属性格式</p>
<blockquote>
<ul>
<li>JSP代码</li>
</ul>
</blockquote>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=<span class="string">"text"</span> name=<span class="string">"peo.name"</span>/&gt;</span><br><span class="line">&lt;input type=<span class="string">"text"</span> name=<span class="string">"peo.age"</span>/&gt;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<blockquote>
<ul>
<li>新建一个类</li>
</ul>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> People peo;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> People <span class="title">getPeo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> peo;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPeo</span><span class="params">(People peo)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.peo = peo;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"Demo [peo="</span> + peo + <span class="string">"]"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<ul>
<li>控制器</li>
</ul>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"demo06"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">demo6</span><span class="params">(Demo demo)</span> </span>&#123;</span><br><span class="line">    System.out.println(demo);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"main.jsp"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="8">
<li>在请求参数中传递集合对象类型对象<blockquote>
<ul>
<li>JSP页面</li>
</ul>
</blockquote>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=<span class="string">"text"</span> name=<span class="string">"peo[0].name"</span>/&gt;</span><br><span class="line">&lt;input type=<span class="string">"text"</span> name=<span class="string">"peo[0].age"</span>/&gt;</span><br><span class="line">&lt;input type=<span class="string">"text"</span> name=<span class="string">"peo[1].name"</span>/&gt;</span><br><span class="line">&lt;input type=<span class="string">"text"</span> name=<span class="string">"peo[1].age"</span>/&gt;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<blockquote>
<ul>
<li>新建一个类</li>
</ul>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> List&lt;People&gt; peo;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> List&lt;People&gt; <span class="title">getPeo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> peo;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPeo</span><span class="params">(List&lt;People&gt; peo)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.peo = peo;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"Demo [peo="</span> + peo + <span class="string">"]"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<ul>
<li>控制器类</li>
</ul>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"demo06"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">demo6</span><span class="params">(Demo demo)</span> </span>&#123;</span><br><span class="line">    System.out.println(demo);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"main.jsp"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="9">
<li>restful风格<blockquote>
<ul>
<li>简化jsp中参数编写格式</li>
<li>在JSP中设定特定的格式</li>
</ul>
</blockquote>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;a href="demo08/1232/abcd"&gt;跳转&lt;/a&gt;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<blockquote>
<ul>
<li>在控制器中<blockquote>
<ul>
<li>在<code>@RequestMapping</code>中一定要和请求格式对应</li>
<li>{名称}中名称自定义</li>
<li><code>@PathVariable</code>获取<code>@RequestMapping</code>中内容，默认按照方法参数名称去寻找。</li>
</ul>
</blockquote>
</li>
</ul>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//restful</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"demo08/&#123;id1&#125;/&#123;name1&#125;"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">demo8</span><span class="params">(@PathVariable(<span class="string">"id1"</span>)</span> <span class="keyword">int</span> id,@<span class="title">PathVariable</span><span class="params">(value = <span class="string">"name1"</span>)</span>String name) </span>&#123;</span><br><span class="line">    System.out.println(id+<span class="string">" "</span>+name);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"/main.jsp"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="跳转方式"><a href="#跳转方式" class="headerlink" title="跳转方式"></a>跳转方式</h3><ol>
<li><p>默认的跳转方式：请求转发。</p>
</li>
<li><p>设置返回字符串的内容</p>
<blockquote>
<ul>
<li>添加 redirect:资源路径  ————&gt; 重定向</li>
<li>添加 forward:资源路径/省略  ————&gt; 转发</li>
</ul>
</blockquote>
<h3 id="视图解析器"><a href="#视图解析器" class="headerlink" title="视图解析器"></a>视图解析器</h3></li>
<li><p>Springmvc会提供默认解析器</p>
</li>
<li><p>程序员自定义解析器</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 配置视图解析器 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">""</span> <span class="attr">class</span>=<span class="string">"org.springframework.web.servlet.view.InternalResourceViewResolver"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"prefix"</span> <span class="attr">value</span>=<span class="string">"/"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"suffix"</span> <span class="attr">value</span>=<span class="string">".jsp"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>如果希望不执行自定义解析器，在方法返回值前面添加<code>forward</code>或者<code>redirect</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"demo07"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">demo7</span><span class="params">(<span class="keyword">int</span> id,String name)</span> </span>&#123;</span><br><span class="line">    System.out.println(id+<span class="string">" "</span>+name);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"forward:main.jsp"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="ResponseBody"><a href="#ResponseBody" class="headerlink" title="@ResponseBody"></a>@ResponseBody</h3><ol>
<li>在方法上只有<code>@RequestMapping</code>时，无论方法返回值是什么都认为需要跳转。</li>
<li>在方法上添加<code>@ResponseBody</code><blockquote>
<ul>
<li>如果返回值满足key-value形式（对象或map）<blockquote>
<ul>
<li>把相应响应头设置为<code>application/json;charset=utf-8</code></li>
<li>把转换后的内容以输出流的形式响应给客户端。</li>
</ul>
</blockquote>
</li>
<li>如果返回值不满足key-value，例如返回值为String<blockquote>
<ul>
<li>把响应头设置为<code>text/html</code></li>
<li>把方法返回值以流的形式输出。</li>
<li>如果返回值包含中文，出现中文乱码</li>
<li>produces表示响应头中Content-Type值</li>
</ul>
</blockquote>
</li>
</ul>
</blockquote>
<h3 id="SSM三大框架整合"><a href="#SSM三大框架整合" class="headerlink" title="SSM三大框架整合"></a>SSM三大框架整合</h3></li>
</ol>
<h3 id="JSP九大内置对象和四大作用域"><a href="#JSP九大内置对象和四大作用域" class="headerlink" title="JSP九大内置对象和四大作用域"></a>JSP九大内置对象和四大作用域</h3><ol>
<li>九大内置对象</li>
</ol>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>含义</th>
<th>获取方式</th>
</tr>
</thead>
<tbody><tr>
<td>request</td>
<td>HttpServletRequest</td>
<td>封装所有请求信息</td>
<td>方法参数</td>
</tr>
<tr>
<td>response</td>
<td>HttpServletResponse</td>
<td>封装所有响应信息</td>
<td>方法参数</td>
</tr>
<tr>
<td>session</td>
<td>HttpSession</td>
<td>封装所有会话信息</td>
<td>req.getSession()</td>
</tr>
<tr>
<td>application</td>
<td>ServletContext</td>
<td>所有信息</td>
<td>getServletContext()<br>req.getServletContext()</td>
</tr>
<tr>
<td>out</td>
<td>PrintWriter</td>
<td>输出对象</td>
<td>response.getWriter()</td>
</tr>
<tr>
<td>exception</td>
<td>Exception</td>
<td>异常对象</td>
<td>…</td>
</tr>
<tr>
<td>page</td>
<td>Object</td>
<td>当前页面对象</td>
<td>…</td>
</tr>
<tr>
<td>pageContext</td>
<td>PageContext</td>
<td>获取其他对象</td>
<td></td>
</tr>
<tr>
<td>config</td>
<td>ServletConfig</td>
<td>配置信息</td>
<td>…</td>
</tr>
</tbody></table>
<ol start="2">
<li>四大作用域<blockquote>
<ul>
<li>page：在当前页面不会重新实例化.</li>
<li>request：在一次请求中同一个对象，下次请求重新实例化一个request对象。</li>
<li>session：一次会话；只要客户端Cookie传递的Jsessionid不变，Session不会重新实例化（不超过默认时间）<blockquote>
<ul>
<li>实际有效时间：浏览器关闭；cookie失效</li>
</ul>
</blockquote>
</li>
<li>application：只要toncat启动时才实例化，关闭时销毁该对象。</li>
</ul>
</blockquote>
</li>
</ol>
<h3 id="SpringMVC作用域传值的几种方式"><a href="#SpringMVC作用域传值的几种方式" class="headerlink" title="SpringMVC作用域传值的几种方式"></a>SpringMVC作用域传值的几种方式</h3><ol>
<li><p>使用原生Servlet:在HandlerMethod方法参数中添加作用域.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DemoController</span> </span>&#123;</span><br><span class="line">	<span class="meta">@RequestMapping</span>(<span class="string">"demo"</span>)</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">demo1</span><span class="params">(HttpServletRequest req,HttpSession session)</span> </span>&#123;</span><br><span class="line">		req.setAttribute(<span class="string">"req"</span>, <span class="string">"req的值"</span>);</span><br><span class="line">		session.setAttribute(<span class="string">"session"</span>,<span class="string">"session的值"</span>);</span><br><span class="line">		req.getServletContext().setAttribute(<span class="string">"application"</span>, <span class="string">"application的值"</span>);</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"/main.jsp"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用Map集合</p>
<blockquote>
<ul>
<li>把map中内容放在request作用域中</li>
<li>Spring会把map集合通过<code>BindingAwareModelMap</code>进行实例</li>
</ul>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"demo02"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">demo2</span><span class="params">(Map&lt;String,Object&gt; map)</span> </span>&#123;</span><br><span class="line">    map.put(<span class="string">"map"</span>, <span class="string">"map的值"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"/main.jsp"</span>; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用SpringMVC中Model接口</p>
<blockquote>
<ul>
<li>把内容放入到request作用域中.</li>
</ul>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"demo03"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">demo3</span><span class="params">(Model model)</span> </span>&#123;</span><br><span class="line">    model.addAttribute(<span class="string">"map"</span>, <span class="string">"map的值"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"/main.jsp"</span>; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用SpringMVC中的ModelAndView</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"demo04"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> ModelAndView <span class="title">demo4</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">//参数，跳转视图</span></span><br><span class="line">    ModelAndView mav=<span class="keyword">new</span> ModelAndView(<span class="string">"/main.jsp"</span>);</span><br><span class="line">    mav.addObject(<span class="string">"mav"</span>,<span class="string">"mav的值"</span>);</span><br><span class="line">    <span class="keyword">return</span> mav;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="文件下载"><a href="#文件下载" class="headerlink" title="文件下载"></a>文件下载</h3><ol>
<li>访问资源时响应头如果没有设置<code>Content-Disposition</code>，浏览器默认按照inline值进行处理<blockquote>
<ul>
<li>inline：能显示就显示，不能显示就下载。</li>
</ul>
</blockquote>
</li>
<li>只需要修改响应头中<code>Content-Disposition=&quot;attachment;filename=文件名&quot;</code><blockquote>
<ul>
<li>attachment 下载：以附件形式下载。</li>
<li>filename=值就是下载时显示的下载文件名。</li>
</ul>
</blockquote>
</li>
<li>实现步骤：<blockquote>
<ul>
<li>导入apache的两个jar包。<code>commoms-io.jar</code>，<code>commons-fileupload.jar</code></li>
<li>在jsp页面中添加下载路径，设置要下载文件。</li>
<li>编写控制器类。<code>Content-Disposition</code></li>
</ul>
</blockquote>
</li>
</ol>
<h3 id="文件上传"><a href="#文件上传" class="headerlink" title="文件上传"></a>文件上传</h3><ol>
<li>基于apache的commons.fileupload.jar完成文件上传。</li>
<li>MultiPartResolver作用：<blockquote>
<ul>
<li>把客户端上传的文件转换成MultiPartFile封装类</li>
<li>通过MultiFile封装类获取文件类。</li>
</ul>
</blockquote>
</li>
<li>表单数据类型分类<blockquote>
<ul>
<li>在<code>&lt;form&gt;</code>的enctype属性控制表单类型</li>
<li>默认值<code>application/x-www-form-urlencoded</code>，普通表单数据。（少量文件信息）</li>
<li>text/plain:大文字量时使用的类型，邮件，论文</li>
<li>multipart/form-data ：表单文件内容为二进制流。</li>
</ul>
</blockquote>
</li>
<li>实现步骤：<blockquote>
<ul>
<li>导入SpringMVC和Commons-fileupload、Commons-io几个jar</li>
<li>编写JSP页面</li>
</ul>
</blockquote>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;form action=<span class="string">"upload"</span> enctype=<span class="string">"multipart/form-data"</span> method=<span class="string">"post"</span>&gt;</span><br><span class="line">    姓名：&lt;input type=<span class="string">"text"</span> name=<span class="string">"name"</span>/&gt;&lt;br&gt; </span><br><span class="line">    文件：&lt;input type=<span class="string">"file"</span> name=<span class="string">"file"</span>/&gt;&lt;br&gt; </span><br><span class="line">    &lt;input type=<span class="string">"submit"</span> value=<span class="string">"提交"</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<blockquote>
<ul>
<li>写配置文件</li>
</ul>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- MultipartResolver解析器 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"multipartResolver"</span> <span class="attr">class</span>=<span class="string">"org.springframework.web.multipart.commons.CommonsMultipartResolver"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 异常时跳转到特定页面 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"exceptionResolver"</span> <span class="attr">class</span>=<span class="string">"org.springframework.web.servlet.handler.SimpleMappingExceptionResolver"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"exceptionMappings"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">props</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">"异常类型"</span>&gt;</span>/error.jsp<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">props</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<ul>
<li>编写控制器类</li>
</ul>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"upload"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">upload</span><span class="params">(MultipartFile file,String name)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">    System.out.println(name);</span><br><span class="line">    String fileName=file.getOriginalFilename();</span><br><span class="line">    String suffix = fileName.substring(fileName.lastIndexOf(<span class="string">"."</span>));</span><br><span class="line">    String uuid = UUID.randomUUID().toString();</span><br><span class="line">    FileUtils.copyInputStreamToFile(file.getInputStream(), <span class="keyword">new</span> File(<span class="string">"D:/"</span>+uuid+suffix));</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"/main.jsp"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="自定义拦截器"><a href="#自定义拦截器" class="headerlink" title="自定义拦截器"></a>自定义拦截器</h3><ol>
<li>跟过滤器比较像的技术</li>
<li>发送请求时被拦截器拦截。在控制器的前后添加额外功能。<blockquote>
<ul>
<li>跟AOP区分开，AOP在特定方法前后扩充（对ServiceImpl）</li>
<li>拦截器，请求的拦截，针对点是控制器的方法（对Controller）</li>
</ul>
</blockquote>
</li>
<li>SpringMVC</li>
<li>实现自定义拦截器的步骤<blockquote>
<ul>
<li>新建类实现<code>HandlerInterceptor</code>接口</li>
</ul>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.gdaib.interceptor;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.HandlerInterceptor;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.ModelAndView;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DemoInterceptor</span> <span class="keyword">implements</span> <span class="title">HandlerInterceptor</span></span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//记录在执行过程中出现的异常</span></span><br><span class="line">	<span class="comment">//可以把异常记录到日志中</span></span><br><span class="line">	<span class="comment">//jsp执行完成后执行</span></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterCompletion</span><span class="params">(HttpServletRequest arg0, HttpServletResponse arg1, Object arg2, Exception arg3)</span></span></span><br><span class="line"><span class="function">			<span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		System.out.println(<span class="string">"afterCompletion"</span>);</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//控制器执行完成，进入到jsp页面之前执行</span></span><br><span class="line">	<span class="comment">//日志记录功能</span></span><br><span class="line">	<span class="comment">//敏感词语过滤</span></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">postHandle</span><span class="params">(HttpServletRequest arg0, HttpServletResponse arg1, Object arg2, ModelAndView arg3)</span></span></span><br><span class="line"><span class="function">			<span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		System.out.println(<span class="string">"postHandle"</span>);</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//在进入控制器之前拦截</span></span><br><span class="line">	<span class="comment">//如果返回false，阻止进入控制器</span></span><br><span class="line">	<span class="comment">//控制代码</span></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">preHandle</span><span class="params">(HttpServletRequest arg0, HttpServletResponse arg1, Object arg2)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		System.out.println(<span class="string">"preHandler"</span>);</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<blockquote>
<ul>
<li>在Springmvc配置文件中进行配置</li>
</ul>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment">&lt;!-- 拦截器 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:interceptors</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 拦截所有 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"com.gdaib.interceptor.DemoInterceptor"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 只拦截请求路径为demo1 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">mvc:mapping</span> <span class="attr">path</span>=<span class="string">"/demo1"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"com.gdaib.interceptor.DemoInterceptor"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mvc:interceptors</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="拦截器栈"><a href="#拦截器栈" class="headerlink" title="拦截器栈"></a>拦截器栈</h3><ol>
<li>多个拦截器同时生效时，组成了拦截器栈</li>
<li>先进后出</li>
<li>执行顺序和springmvc配置文件的配置顺序有关</li>
<li>设置先配置拦截器A，再配置拦截器B，执行顺序为：<blockquote>
<ul>
<li>PreHandler(A) –&gt; PreHandler(B) –&gt; controller –&gt; PostHandler(B) –&gt; PostHandler(A) –&gt; afterCompletion(B) –&gt; afterCompletion(A)</li>
</ul>
</blockquote>
</li>
</ol>
<h3 id="登录验证"><a href="#登录验证" class="headerlink" title="登录验证"></a>登录验证</h3><ol>
<li>使用springmvc拦截器实现登录验证<blockquote>
<ul>
<li>把页面放入到web-inf中<blockquote>
<ul>
<li>放入到web-inf中后必须通过控制器转发到页面</li>
<li>springmvc拦截器拦截的是控制器，不能拦截jsp</li>
</ul>
</blockquote>
</li>
<li>通过拦截器拦截全部控制器，需要在拦截器内部放行login控制器</li>
</ul>
</blockquote>
<h3 id="SpringMVC运行原理"><a href="#SpringMVC运行原理" class="headerlink" title="SpringMVC运行原理"></a>SpringMVC运行原理</h3></li>
<li>文字解释<blockquote>
<ul>
<li>如果在web.xml中设置DispatcherServlet的<code>&lt;url-pattern&gt;</code>为<code>\</code>时，当用户发起请求，请求一个控制器时，会执行DispatcherServlet。由DispatchServlet调用HandlerMapping。具体调用哪个实现类需要根据项目环境，如果使用注解方式调用<code>DefaultAnnotationHandlerMapping</code>解析URL，解析后调用<code>HandlerAdapter</code>组件的<code>AnnotationMethodHandlerAdapter</code>调用<code>Controller</code>中的<code>HandlerMethod</code>，当<code>HandlerMethod</code>执行完后会返回<code>View</code>,会被<code>ViewResolver</code>进行视图解析，解析后执行对应的jsp文件，最终把运行结果响应给客户端.</li>
</ul>
</blockquote>
</li>
</ol>

        
    </section>
</article>


    <article class="article" itemscope itemprop="blogPost">
    
    <header class="article-header">
        
        <h1 itemprop="name">
            <a href="/CPWS.github.io/2019/10/26/hibernate5/">hibernate5</a>
        </h1>
        
        <div class="article-meta clearfix">
            <a class="article-date" href="https://CPWS.github.io/page/2/index.html">
    
    <i class="icon-calendar"></i>
    
    <time datetime="2019-10-26T10:33:42.000Z" itemprop="datePublished">2019-10-26</time>
</a>

            
<div class="article-tag-list">
    <i class="icon-tag"></i>
    <a class="article-tag-link" href="/CPWS.github.io/tags/hibernate5/">hibernate5</a>
</div>


        </div>
    </header>
    
    <section class="article-body markdown-body">
        
        <h2 id="ORM和Hibernate"><a href="#ORM和Hibernate" class="headerlink" title="ORM和Hibernate"></a>ORM和Hibernate</h2><h3 id="对象-关系数据库映射（ORM）"><a href="#对象-关系数据库映射（ORM）" class="headerlink" title="对象/关系数据库映射（ORM）"></a>对象/关系数据库映射（ORM）</h3><ul>
<li>ORM可以称为面向对象编程语言和数据库之间的桥梁。</li>
<li>ORM：全称是：Object/Relation Mapping，即对象/关系数据库映射.</li>
<li>采用ORM框架之后，应用程序不再访问底层数据库，而是以面向对象的方法来操作持久化对象，而ORM框架则将这些面向对象的操作转换成底层的SQL操作。<h3 id="基本的映射方式"><a href="#基本的映射方式" class="headerlink" title="基本的映射方式"></a>基本的映射方式</h3></li>
<li>ORM基本映射有如下几条映射关系<blockquote>
<ul>
<li>数据表映射类</li>
<li>数据表的行映射对象（即实例）</li>
<li>数据表的列（字段）映射对象的属性</li>
</ul>
</blockquote>
<h3 id="流行的ORM框架简介"><a href="#流行的ORM框架简介" class="headerlink" title="流行的ORM框架简介"></a>流行的ORM框架简介</h3></li>
<li>目前流行的ORM框架有如下产品：<blockquote>
<ul>
<li>JPA：JPA的最大优势在于它是官方标准，因此具有通用性。如果应用程序面向JPA编程，那么应用程序可以在各种ORM框架之间自由的切换：Hibernate?、TopLike?、OpenJPA?随你喜欢。</li>
<li>Hibernate：目前最流行的开源ORM框架，已经被选作JBoss持久层的解决方案。</li>
<li>Mybatis(Ibatis)：Apache软件基金的子项目。与其称它为一种ORM框架，不如称它是一种<code>SQL Mapping</code>框架。不支持纯粹的面向对象操作。对一些数据库访问灵活的地方,Mybatis更加灵活，它允许开发人员直接编写SQL语句。</li>
<li>TopLink：Oracle公司的产品。现在主要作为JPA实现。ClassFish服务器的JPA实现就是TopLink。</li>
</ul>
</blockquote>
<h3 id="Hibernate概述"><a href="#Hibernate概述" class="headerlink" title="Hibernate概述"></a>Hibernate概述</h3></li>
<li>Hibernate能在众多的ORM框架中脱颖而出，因为Hibernate与其他框架相比有如下优势：<blockquote>
<ul>
<li>开源和免费的<code>License</code>，方便需要时研究源代码，改写源代码，进行功能限定。</li>
<li>轻量级封装，避免引入过多复杂的问题，调试容易，减轻程序员负担。</li>
<li>有可扩展性，API开放。功能不够用的时候，自己编码进行扩展。</li>
<li>开发者活跃，产品有稳定的发展保障。</li>
</ul>
</blockquote>
</li>
</ul>
<hr>
<h2 id="Hibernate入门"><a href="#Hibernate入门" class="headerlink" title="Hibernate入门"></a>Hibernate入门</h2><ul>
<li><p>hibernate的用法非常简单，只要在Java项目中导入Hibernate框架，就可以以面向对象的方式操作关系数据库。</p>
<h3 id="hibernate的下载和安装"><a href="#hibernate的下载和安装" class="headerlink" title="hibernate的下载和安装"></a>hibernate的下载和安装</h3></li>
<li><p>下载地址：<code>www.hibernate.org</code>、<code>www.jboss.org</code></p>
</li>
<li><p>下载步骤：</p>
<blockquote>
<ul>
<li>登录<code>http://hibernate.org/orm/</code>站点，下载压缩包。</li>
<li>解压缩刚下载的压缩包。该文件夹下包含如下文件结构：<blockquote>
<ul>
<li>documentation：该路径下存放Hibernate的相关文档，包括Hibernate的参考文档和API文档等。</li>
<li>lib：该路径下存放了Hibernate5.2的核心类库，以及编译和运行所以来的第三方类库。其中lib路径下的required子目录下保存了运行Hibernate5.2的核心类库，以及必须的第三方类库。</li>
<li>project：该路径下存放了Hibernate各种相关项目的源代码。</li>
<li>lgpl.txt、logo等杂项文件。</li>
</ul>
</blockquote>
</li>
<li>将解压缩路径中lib目录下的required子目录下的jar包添加到应以的类加载路径中–即可通过添加环境变量的方式来添加，也可以通过ant或IDE工具来管理应用程序的类加载路径。</li>
<li>如果直接在控制台编译使用了HibernateAPI类，则需要将Hibernate和兴JAR包以及必须的依赖jar包添加到CLASSPath路径中。如果是使用Ant或者Eclipse等IDE工具，则无需修改环境变量。</li>
</ul>
</blockquote>
</li>
<li><p>经过以上步骤，就可以在应用中使用Hibernate框架的功能了。</p>
</li>
<li><p>除此之外，hibernate的底层还是基于JDBC驱动的，所以在应用程序中使用Hibernate进行持久操作同样少不了JDBC驱动。如果底层是使用Mysql，则还需要将mysql的驱动包导入到classpath中。</p>
<h3 id="Hibernate的数据库操作"><a href="#Hibernate的数据库操作" class="headerlink" title="Hibernate的数据库操作"></a>Hibernate的数据库操作</h3></li>
<li><p>前面已经介绍，在所有的ORM框架中还有一个重要的媒介：PO(持久化对象)。持久化对象的作用是完成持久化操作，简单的说，通过该对象可以对数据执行查询、修改、删除的操作–以面向对象的方式操作数据库。</p>
</li>
<li><p>Hibernate里的PO非常简单的，前面说过的Hibernate是低侵入性的设计，完全采用普通的Java对象作为持久化对象使用。看下面的pojo(普通的、传统的Java对象)类.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.crazyit.app.domain;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">News</span> </span>&#123;</span><br><span class="line">	<span class="comment">//消息类的标识属性</span></span><br><span class="line">	<span class="keyword">private</span> Integer id;</span><br><span class="line">	<span class="comment">//消息标题</span></span><br><span class="line">	<span class="keyword">private</span> String title;</span><br><span class="line">	<span class="comment">//消息内容</span></span><br><span class="line">	<span class="keyword">private</span> String content;</span><br><span class="line">	<span class="comment">//各属性的getter和setter方法</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> Integer <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> id;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(Integer id)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.id = id;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getTitle</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> title;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setTitle</span><span class="params">(String title)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.title = title;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getContent</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> content;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setContent</span><span class="params">(String content)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.content = content;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>照着上面定义好了之后，该类目前还不具备持久化操作的能力，为了使其具备持久化的能力，还要为其添加一些注解的。下面为News类增加注解。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.crazyit.app.domain;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.persistence.Entity;</span><br><span class="line"><span class="keyword">import</span> javax.persistence.GeneratedValue;</span><br><span class="line"><span class="keyword">import</span> javax.persistence.GenerationType;</span><br><span class="line"><span class="keyword">import</span> javax.persistence.Id;</span><br><span class="line"><span class="keyword">import</span> javax.persistence.Table;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@Table</span>(name = <span class="string">"news_inf"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">News</span> </span>&#123;</span><br><span class="line">	<span class="comment">//消息类的标识属性</span></span><br><span class="line">	<span class="meta">@Id</span></span><br><span class="line">	<span class="meta">@GeneratedValue</span>(strategy = GenerationType.IDENTITY)</span><br><span class="line">	<span class="keyword">private</span> Integer id;</span><br><span class="line">	<span class="comment">//消息标题</span></span><br><span class="line">	<span class="keyword">private</span> String title;</span><br><span class="line">	<span class="comment">//消息内容</span></span><br><span class="line">	<span class="keyword">private</span> String content;</span><br><span class="line">	<span class="comment">//各属性的getter和setter方法</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> Integer <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> id;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(Integer id)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.id = id;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getTitle</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> title;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setTitle</span><span class="params">(String title)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.title = title;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getContent</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> content;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setContent</span><span class="params">(String content)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.content = content;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>关于上面的注解的简单解释</p>
<blockquote>
<ul>
<li>@Entity:该注解声明该类是一个Hibernate的持久化类。</li>
<li>@Table：指定该类映射的表。此处指定该类映射到<code>news_inf</code>表。</li>
<li>@Id:用于指定该类的标识属性。所谓标识属性，就是可以唯一标识该对象的属性，标识属性通常映射到数据表的主键列。</li>
<li>@GeneratedValue用于指定主键的生成策略，其中strategy属性制定了主键的生成策略为IDENTITY策略，也就是采用自动增长的主键生成策略。</li>
</ul>
</blockquote>
</li>
<li><p>从上面的注解信息可以看出：PO = POJO + 持久化注解。</p>
</li>
<li><p>除了写完了PO之后，Hibernate还需要添加一些配置信息，例如使用那个数据库，使用那个JDBC操作，使用数据库的用户名和密码等，这些配置信息对所有的持久化类都是通用的。</p>
</li>
<li><p>Hibernate的配置信息既可以使用*.properties属性文件配置，也可以使用xml配置文件进行配置。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE hibernate-configuration PUBLIC</span></span><br><span class="line"><span class="meta">		"-//Hibernate/Hibernate Configuration DTD 3.0//EN"</span></span><br><span class="line"><span class="meta">		"http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd"&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">hibernate-configuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">session-factory</span>&gt;</span></span><br><span class="line">  		<span class="comment">&lt;!-- 指定两节数据库的相关信息 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hibernate.connection.driver_class"</span>&gt;</span>com.mysql.cj.jdbc.Driver<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hibernate.connection.password"</span>&gt;</span>123456<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hibernate.connection.url"</span>&gt;</span>jdbc:mysql://localhost:3306/hibernate?useSSL=true&amp;amp;characterEncoding=utf8&amp;amp;serverTimezone=UTC<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hibernate.connection.username"</span>&gt;</span>root<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">     	<span class="comment">&lt;!-- HIBERNATE的相关配置 --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 指定连接池最大的连接数 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hibernate.c3p0.max_size"</span>&gt;</span>20<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">         <span class="comment">&lt;!-- 指定连接池最小的连接数 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hibernate.c3p0.min_size"</span>&gt;</span>1<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 指定连接池里连接的超时时长 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hibernate.c3p0.timeout"</span>&gt;</span>5000<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 指定连接池最大缓存多个多少个Statement对象 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hibernate.c3p0.max_statements"</span>&gt;</span>100<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hibernate.c3p0.idle_test_period"</span>&gt;</span>3000<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hibernate.c3p0.acquire_increment"</span>&gt;</span>2<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 指定数据库方言 --&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hibernate.dialect"</span>&gt;</span>org.hibernate.dialect.MySQL5InnoDBDialect<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">         <span class="comment">&lt;!-- 根据需要自动创建数据库表 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hibernate.hbm2ddl.auto"</span>&gt;</span>update<span class="tag">&lt;/<span class="name">property</span>&gt;</span><span class="comment">&lt;!-- ① --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 显示Hibernate持久操作所生成的SQL --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"show_sql"</span>&gt;</span>true<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 将SQL格式化后输出 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"format_sql"</span>&gt;</span>true<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 罗列所有持久化类的类名 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mapping</span> <span class="attr">class</span>=<span class="string">"org.crazyit.app.domain.News"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">session-factory</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">hibernate-configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>Hibernate配置文件的默认文件名为<code>hibernate.cfg.xml</code>，当程序调用Configuration对象的configuration()方法时，Hibernate将自动加载该配置文件。</p>
</li>
<li><p>由于上面的程序需要使用C3p0数据库连接池，因为还需要将Options目录下的c3p0目录下的配置文件导入到系统的类加载器路径下。</p>
</li>
<li><p>上面配置文件①号粗体代码制定了hbm2ddl.auto属性，该属性指定是否需要Hibernate根据持久化类自动创建数据库表。属性值为true,表明Hibernate会根据持久类的映射关系来自动创建数据库表。</p>
</li>
<li><p><code>&lt;mapper../&gt;</code>元素指定持久化类名。如果有多个持久化类名，只要在此处罗列多个<code>&lt;mapper../&gt;</code>元素即可。</p>
</li>
<li><p>测试代码，实现数据库添加</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> lee;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.crazyit.app.domain.News;</span><br><span class="line"><span class="keyword">import</span> org.hibernate.Session;</span><br><span class="line"><span class="keyword">import</span> org.hibernate.SessionFactory;</span><br><span class="line"><span class="keyword">import</span> org.hibernate.Transaction;</span><br><span class="line"><span class="keyword">import</span> org.hibernate.cfg.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NewsManager</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		<span class="comment">/***</span></span><br><span class="line"><span class="comment">		 * 实例化Configuration</span></span><br><span class="line"><span class="comment">		 * 不带参数的configuration()方法默认加载hibernate.cfg.xml文件</span></span><br><span class="line"><span class="comment">		 * 如果传入abc.xml作为参数，则不会加载hibernate.cfg.xml配置文件，只会加载abc.xml配置文件</span></span><br><span class="line"><span class="comment">		 */</span></span><br><span class="line">		Configuration cfg=<span class="keyword">new</span> Configuration().configure();</span><br><span class="line">		<span class="comment">//以Configuration为实例创建SqlSessionFactory</span></span><br><span class="line">		SessionFactory sf = cfg.buildSessionFactory();</span><br><span class="line">		<span class="comment">//创建session</span></span><br><span class="line">		Session sess = sf.openSession();</span><br><span class="line">		<span class="comment">//开启事务</span></span><br><span class="line">		Transaction tx = sess.beginTransaction();</span><br><span class="line">		<span class="comment">//创建消息对象</span></span><br><span class="line">		News n=<span class="keyword">new</span> News();</span><br><span class="line">		n.setTitle(<span class="string">"疯狂Java联盟成立了"</span>);</span><br><span class="line">		n.setContent(<span class="string">"疯狂Java联盟成立了，网站地址：http://crazyit.org/"</span>);</span><br><span class="line">		<span class="comment">//保存信息</span></span><br><span class="line">		sess.save(n);</span><br><span class="line">		<span class="comment">//提交事务</span></span><br><span class="line">		tx.commit();</span><br><span class="line">		<span class="comment">//关闭</span></span><br><span class="line">		sess.close();</span><br><span class="line">		sf.close();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>从以上也可以看出，这是完全面向对象化的操作方式。</p>
</li>
<li><p>运行结果</p>
</li>
</ul>
<p><img src="image/hibernateQs.PNG" alt></p>
<ul>
<li><p>总结：为了使用Hibernate进行持久化操作，通常有如下操作步骤：</p>
<blockquote>
<ul>
<li>开发持久化类：POJO+持久化注解组成</li>
<li>获取Configuration对象</li>
<li>获取SessionFactory</li>
<li>获取Session，打开事务 </li>
<li>用面向对象的方式操作数据库</li>
<li>关闭事务，关闭Session</li>
</ul>
</blockquote>
</li>
<li><p>随着PO与Session的关联关系，PO有如下三种状态：</p>
<blockquote>
<ul>
<li>瞬时：如果PO从未与Session发生关联，该POJO实例处于瞬时状态。</li>
<li>持久化：如果PO与Session关联起来，且该实例对应到数据库记录，则该实例处于持久化状态。</li>
<li>脱管：如果PO曾与Session关联过，但因为Session的关闭等原因，PO脱离了Session的管理，这种状态称为脱管状态。</li>
</ul>
</blockquote>
</li>
<li><p>对比Hibernate和JDBC两种操作数据库的方式，不难发现Hibernate有如下两个显著特征：</p>
<blockquote>
<ul>
<li>不需要编写SQL语句，而是允许采用OO方式来访问数据库。</li>
<li>在JDBC访问过程中大量的checked异常被包装成hibernate的Runtime异常,从而不再要求程序处理任何的异常。</li>
</ul>
</blockquote>
</li>
</ul>
<h3 id="在Eclipse中使用Hibernate"><a href="#在Eclipse中使用Hibernate" class="headerlink" title="在Eclipse中使用Hibernate"></a>在Eclipse中使用Hibernate</h3><ul>
<li>实现步骤如下：<blockquote>
<ul>
<li>首先创建一个Java Project,且命名为HibernateDemo01</li>
<li>右击项目创建一个lib文件夹，将Hibernate所依赖的第三方jar、Mysql驱动包、JAXB包、Activction包和C3P0存入到该目录下。</li>
</ul>
</blockquote>
</li>
</ul>
<p><img src="image/hibernate-jar.PNG" alt></p>
<blockquote>
<ul>
<li>选中所有的jar，右击build path–&gt;add Path</li>
<li>操作完以上步骤之后，就可以按上面的步骤搭建Hibernate环境</li>
<li>注意Hibernate.cfg.xml文件通常存放在src目录下.</li>
</ul>
</blockquote>
<hr>
<h2 id="Hibernate的体系结构"><a href="#Hibernate的体系结构" class="headerlink" title="Hibernate的体系结构"></a>Hibernate的体系结构</h2><ul>
<li>通过前面的介绍可以知道：Hibernate Session，只有处于Session管理下POJO才具有持久化的功能。</li>
<li>应用程序的数据访问层既可以通过JPA（Java Persistence API）执行ORM操作，也可以通过Hibernate原生API来操作ORM。JPA和Hibernate的关系就是ORM的规范与ORM规范的实现。JPA相当于ORM的规范,Hibernate相当于规范的实现。</li>
</ul>
<hr>
<h2 id="深入Hibernate配置文件"><a href="#深入Hibernate配置文件" class="headerlink" title="深入Hibernate配置文件"></a>深入Hibernate配置文件</h2><h3 id="创建Configuration对象"><a href="#创建Configuration对象" class="headerlink" title="创建Configuration对象"></a>创建Configuration对象</h3><ul>
<li>随着hibernate所使用的配置文件的不同，创建Configuration对象的方式也不相同。通常有如下几种配置Hibernate的方式：<blockquote>
<ul>
<li>使用Hibernate.properties文件作为配置文件</li>
<li>使用Hibernate.cfg.xml文件作为配置文件</li>
<li>不使用任何配置文件，以编码的方式创建Configuration对象</li>
</ul>
</blockquote>
</li>
<li>Configuration实例的唯一作用就是创建SessionFactory实例。所有它被设计为启动期间对象，一旦SessionFactory创建完成，Configuration就被丢弃了。</li>
<li>使用hibernate.properties作为配置文件.<blockquote>
<ul>
<li>此处给出了使用hibernate.properties文件创建Configuration的方法</li>
</ul>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//调用addAnnotatedClass()添加持久化类</span></span><br><span class="line">Configuration c=<span class="keyword">new</span> Configuration().addAnnotatedClass(Item.class).addAnnotatedClass(Bid.class);</span><br></pre></td></tr></table></figure>

</li>
</ul>
<blockquote>
<ul>
<li>查看hibernate.properties配置文件发现，该文件没有提供添加Hibernate持久化类的方式。因此使用它作为配置文件时，必须调用<code>addAnnotatedClass()</code>或<code>addpackage()</code>方法，使用这些方法添加持久化类。</li>
</ul>
<ul>
<li>使用<code>Hibernate.cfg.xml</code>文件作为配置文件</li>
</ul>
<ul>
<li>因为在该配置文件中添加了持久化类，因此无需通过编程的方式添加持久化类。采用这种配置文件的方式创建Configuration实例可以通过如下的代码实现：</li>
</ul>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//configure方法将负责加载hibernate.cfg.xml配置文件</span></span><br><span class="line">Configuration cfg=<span class="keyword">new</span> Configuration().configure();</span><br></pre></td></tr></table></figure>

<ul>
<li>不使用任何配置文件，以编码的方式创建Configuration对象<blockquote>
<ul>
<li>这是一种极端的方式，通常不会通过这种创建Configuration实例。Configuration提供了如下常用方法：<blockquote>
<ul>
<li>Configuration addAnnotatedClass(Class annotatedClass)：用于为Configuration对象添加一个持久化类。</li>
<li>Configuration addPackage(String packageName)：用于为Configuration对象添加指定包下的所欲持久化类。</li>
<li>Configuration setProperties(Properties properties)：用于为Configuration添加一系列属性，这一些属性通过Properties实例传入。</li>
<li>Configuration setProperty(String propertyName,String value)：用于为Configuration对象设置一个单独的属性。</li>
</ul>
</blockquote>
</li>
<li>由于通过如上4个方法，可以无需使用任何配置文件，直接通过编程的方式创建Configuration实例。</li>
</ul>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NewsManager</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		<span class="comment">//实例化Configuration，不需要加载任何的配置文件</span></span><br><span class="line">		Configuration cfg=<span class="keyword">new</span> Configuration()</span><br><span class="line">						<span class="comment">//通过addAnnotatedClass()方法添加持久化类</span></span><br><span class="line">						.addAnnotatedClass(org.crazyit.app.domain.News.class)</span><br><span class="line">						<span class="comment">//通过setProperties设置连接属性</span></span><br><span class="line">						.setProperty(<span class="string">"hibernate.connection.driver_class"</span>,<span class="string">"com.mysql.cj.jdbc.Driver"</span>)</span><br><span class="line">						.setProperty(<span class="string">"hibernate.connection.url"</span>,<span class="string">"jdbc:mysql://localhost:3306/hibernate?useSSL=true&amp;amp;characterEncoding=utf8&amp;amp;serverTimezone=UTC"</span>)</span><br><span class="line">						.setProperty(<span class="string">"hibernate.connection.username"</span>,<span class="string">"root"</span>)</span><br><span class="line">						.setProperty(<span class="string">"hibernate.connection.password"</span>, <span class="string">"123456"</span>)</span><br><span class="line">						.setProperty(<span class="string">"hibernate.c3p0.max_size"</span>, <span class="string">"20"</span>)</span><br><span class="line">						.setProperty(<span class="string">"hibernate.c3p0.min_size"</span>, <span class="string">"1"</span>)</span><br><span class="line">						.setProperty(<span class="string">"hibernate.c3p0.timeout"</span>, <span class="string">"5000"</span>)</span><br><span class="line">						.setProperty(<span class="string">"hibernate.c3p0.max_statements"</span>, <span class="string">"100"</span>)</span><br><span class="line">						.setProperty(<span class="string">"hibernate.c3p0.idle_test_period"</span>, <span class="string">"3000"</span>)</span><br><span class="line">						.setProperty(<span class="string">"hibernate.c3p0.acquire_increment"</span>, <span class="string">"2"</span>)</span><br><span class="line">						.setProperty(<span class="string">"hibernate.dialect"</span>, <span class="string">"org.hibernate.dialect.MySQL5InnoDBDialect"</span>)</span><br><span class="line">						.setProperty(<span class="string">"hibernate.hbm2ddl.auto"</span>, <span class="string">"update"</span>);</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//以Configuration为实例创建SqlSessionFactory</span></span><br><span class="line">		SessionFactory sf = cfg.buildSessionFactory();</span><br><span class="line">		<span class="comment">//创建session</span></span><br><span class="line">		Session sess = sf.openSession();</span><br><span class="line">		<span class="comment">//开启事务</span></span><br><span class="line">		Transaction tx = sess.beginTransaction();</span><br><span class="line">		<span class="comment">//创建消息对象</span></span><br><span class="line">		News n=<span class="keyword">new</span> News();</span><br><span class="line">		n.setTitle(<span class="string">"疯狂Java联盟成立了"</span>);</span><br><span class="line">		n.setContent(<span class="string">"疯狂Java联盟成立了，网站地址：http://crazyit.org/"</span>);</span><br><span class="line">		<span class="comment">//保存信息</span></span><br><span class="line">		sess.save(n);</span><br><span class="line">		<span class="comment">//提交事务</span></span><br><span class="line">		tx.commit();</span><br><span class="line">		<span class="comment">//关闭</span></span><br><span class="line">		sess.close();</span><br><span class="line">		sf.close();				</span><br><span class="line">						</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="hibernate-properties文件与hibernate-cfg-xml文件"><a href="#hibernate-properties文件与hibernate-cfg-xml文件" class="headerlink" title="hibernate.properties文件与hibernate.cfg.xml文件"></a>hibernate.properties文件与hibernate.cfg.xml文件</h3><ul>
<li>在实际开发中，通常会使用<code>hibernate.cfg.xml</code>作为配置文件.</li>
<li>查看hibernate.properties配置文件 配置属性<blockquote>
<ul>
<li><code>hibernate.dialect org.hibernate.dialect.MySQLDialect</code></li>
</ul>
</blockquote>
</li>
<li>查看hibernate.cfg.xml配置文件，配置属性<blockquote>
<ul>
<li><code>&lt;property name=&quot;hibernate.dialect&quot;&gt;org.hibernate.dialect.MySQL5InnoDBDialect&lt;/property&gt;</code></li>
</ul>
</blockquote>
</li>
<li>上面两个文件，虽然两者的配置风格不同，但是其实质完全一样。<h3 id="JDBC连接属性"><a href="#JDBC连接属性" class="headerlink" title="JDBC连接属性"></a>JDBC连接属性</h3></li>
<li>Hibernate需要进行数据库访问，因此必须设置连接数据库的相关属性.所有的hibernate属性的名字和语义都在<code>org.hibernate.cfg.Environment</code>中定义.</li>
<li>下面是关于JDBC连接配置中重要的设置<blockquote>
<ul>
<li>hibernate.connection.driver_class：设置连接数据库的驱动。</li>
<li>hibernate.connection.url:设置所需连接数据库服务的URL</li>
<li>hibernate.connection.username：设置连接数据库的用户名</li>
<li>hibernate.connection.password：设置连接数据库的密码</li>
<li>hibernate.dialect：设置连接数据库所使用方言</li>
<li>hibernate.connection.pool_size：设置Hibernate数据库连接池最大的连接数</li>
</ul>
</blockquote>
</li>
<li>下面是配置C3P0连接池的配置阶段<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 指定连接池最大的连接数 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hibernate.c3p0.max_size"</span>&gt;</span>20<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 指定连接池最小的连接数 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hibernate.c3p0.min_size"</span>&gt;</span>1<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 指定连接池里连接的超时时长 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hibernate.c3p0.timeout"</span>&gt;</span>5000<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 指定连接池最大缓存多个多少个Statement对象 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hibernate.c3p0.max_statements"</span>&gt;</span>100<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hibernate.c3p0.idle_test_period"</span>&gt;</span>3000<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hibernate.c3p0.acquire_increment"</span>&gt;</span>2<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="数据库方言"><a href="#数据库方言" class="headerlink" title="数据库方言"></a>数据库方言</h3><ul>
<li>数据库方言：告诉Hibernate底层应该使用哪种数据库。<h3 id="JNDI数据源的连接属性"><a href="#JNDI数据源的连接属性" class="headerlink" title="JNDI数据源的连接属性"></a>JNDI数据源的连接属性</h3></li>
<li>如果无须Hibernate自己管理属性，而是直接访问容器管理数据源，Hibernate可以使用JNDI数据源的相关配置。</li>
<li>下面是连接JNDI(Java Naming Directory Interface：Java命名目录接口)数据源的主要配置属性：<blockquote>
<ul>
<li>hibernate.connection.datasource：指定JDNI数据源的名字</li>
<li>hibernate.jndi.url：指定JDNI提供者的url，该属性是可选的。如果JNDI与Hibernate持久化访问的代码处于同一个应用中，则无须指定该属性。</li>
<li>hibernate.jndi.class：指定JDNI InitialContextFactory的实现类，该属性也是可选的。如果JNDI与Hibernate持久化访问的代码处于同一个应用中，则无须指定该属性。</li>
<li>hibernate.connection.username：指定连接数据库的用户名，该属性是可选的。</li>
<li>hibernate.connection.password：指定连接数据库的密码，该属性是可选的。</li>
</ul>
</blockquote>
</li>
<li>即时使用JNDI数据源，也一样需要指定连接数据库的方言。</li>
<li>下面配置Hibernate连接Tomcat中数据源的配置片段：<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hibernate.connection.datasource"</span>&gt;</span>java:comp/env/jdbc/dstest<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--指定数据库方言--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hibernate.dialect"</span>&gt;</span>org.hibernate.dialect.MySQL5InnoDBDialect<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="Hibernate事务属性"><a href="#Hibernate事务属性" class="headerlink" title="Hibernate事务属性"></a>Hibernate事务属性</h3><ul>
<li>Hibernate关于事务管理的属性有如下几个：<blockquote>
<ul>
<li>hibernate.transaction.factory_class;</li>
<li>jta.UserTransaction</li>
<li>hibernate.transaction.manager_lookup_class</li>
<li>hibernate.transaction.flush_before_completion</li>
<li>hibernate.transaction.auto_close_session</li>
</ul>
</blockquote>
<h3 id="二级缓存相关属性"><a href="#二级缓存相关属性" class="headerlink" title="二级缓存相关属性"></a>二级缓存相关属性</h3></li>
<li>Hibernate中的SessionFactory持有一个可选的二级缓存，通过这个二级缓存可以提高持久化的访问性能。</li>
<li>Hibernate关于二级缓存的属性有如下几个:<blockquote>
<ul>
<li>hibernate.cache.use_second_level_cache</li>
<li>hibernate.cache.region.factory_class</li>
<li>hibernate.cache.region_prefix</li>
<li>hibernate.cache.use_minimal_puts</li>
<li>hibernate.cache.use_query_cache</li>
<li>hibernate.cache.query_cache_factory</li>
<li>hibernate.cache.use_structured_entries</li>
</ul>
</blockquote>
<h3 id="外连接抓取属性"><a href="#外连接抓取属性" class="headerlink" title="外连接抓取属性"></a>外连接抓取属性</h3></li>
<li><code>@ManyToOne</code>、<code>@OneToMany</code>、<code>@ManyToMany</code>、<code>@OneToOne</code><h3 id="其他常用的配置属性"><a href="#其他常用的配置属性" class="headerlink" title="其他常用的配置属性"></a>其他常用的配置属性</h3></li>
<li>除了上面介绍的必要属性之外，Hibernate常用的配置属性还有如下几个：<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 其他常用配置 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 显示Hibernate持久操作所生成的SQL --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"show_sql"</span>&gt;</span>true<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 将SQL格式化后输出 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"format_sql"</span>&gt;</span>true<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 添加调试 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hibernate.use_sql_comments"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 指定JDBC抓取数量的大小 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hibernate.jdbc.fetch_size"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 指定Hibernate使用JDBC2的批量更新的大小 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hibernate.jdbc.batch_size"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 设置为是否自动提交 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hibernate.connection.autocommit"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 根据需要自动创建数据库表 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hibernate.hbm2ddl.auto"</span>&gt;</span>update<span class="tag">&lt;/<span class="name">property</span>&gt;</span><span class="comment">&lt;!-- ① --&gt;</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="当然Hibernate配置文件中的配置属性还有很多，可以参考hibernate官方参考文档。"><a href="#当然Hibernate配置文件中的配置属性还有很多，可以参考hibernate官方参考文档。" class="headerlink" title="当然Hibernate配置文件中的配置属性还有很多，可以参考hibernate官方参考文档。"></a>当然Hibernate配置文件中的配置属性还有很多，可以参考hibernate官方参考文档。</h3><hr>
<h2 id="深入理解持久化对象"><a href="#深入理解持久化对象" class="headerlink" title="深入理解持久化对象"></a>深入理解持久化对象</h2>
        
    </section>
</article>


    <article class="article" itemscope itemprop="blogPost">
    
    <header class="article-header">
        
        <h1 itemprop="name">
            <a href="/CPWS.github.io/2019/10/23/spring4/">spring4</a>
        </h1>
        
        <div class="article-meta clearfix">
            <a class="article-date" href="https://CPWS.github.io/page/2/index.html">
    
    <i class="icon-calendar"></i>
    
    <time datetime="2019-10-23T11:39:01.000Z" itemprop="datePublished">2019-10-23</time>
</a>

            
<div class="article-tag-list">
    <i class="icon-tag"></i>
    <a class="article-tag-link" href="/CPWS.github.io/tags/spring4/">spring4</a>
</div>


        </div>
    </header>
    
    <section class="article-body markdown-body">
        
        <h2 id="Spring框架简介"><a href="#Spring框架简介" class="headerlink" title="Spring框架简介"></a>Spring框架简介</h2><ol>
<li>主要发明者：Rod Johnson</li>
<li>轮子理论推崇者：<blockquote>
<ul>
<li>轮子理论：不用重复发明轮子。</li>
<li>IT行业：直接使用写好的代码。</li>
</ul>
</blockquote>
</li>
<li>Spring框架宗旨：不重新发明技术，让原有技术使用起来更加方便。</li>
<li>Spring的极大核心功能<blockquote>
<ul>
<li>Ioc/DI：控制反转/依赖注入</li>
<li>Aop：面向切面编程</li>
<li>声明式事务</li>
</ul>
</blockquote>
</li>
<li>Spring框架的runtime<blockquote>
<ul>
<li>test:Spring框架提供的测试功能</li>
<li>Core Container容器：核心容器。Spring启动基本的条件<blockquote>
<ul>
<li>Beans：Spring负责创建类对象并管理对象。</li>
<li>Core：核心类库。</li>
<li>Context：上下文参数，获取外部资源或者管理注解。</li>
<li>SpEl：expression.jar</li>
</ul>
</blockquote>
</li>
<li>AOP:实现aop功能需要依赖</li>
<li>Aspects：切面AOP依赖的包</li>
<li>Data Access/Integration：spring封装数据访问层相关内容<blockquote>
<ul>
<li>jdbc：spring对jdbc封装后的代码。</li>
<li>ORM：封装持久层框架的代码；如Hibernate</li>
</ul>
</blockquote>
</li>
<li>transaction：对应spring-tx.jar 声明式事务</li>
<li>WEB：需要spring完成Web相关功能时需要<blockquote>
<ul>
<li>例如：由tomcat加载spring配置文件需要有<code>spring-web</code>包</li>
</ul>
</blockquote>
</li>
</ul>
</blockquote>
</li>
</ol>
<p><img src="https://i.loli.net/2019/10/23/SrK7vQueOlyMNRT.png" alt="1571831446_1_.png"></p>
<ol start="6">
<li>Spring框架中重要概念：<blockquote>
<ul>
<li>容器(container)：spring当做一个大容器</li>
<li>BeanFactory接口：老版本。<blockquote>
<ul>
<li>新版本中ApplicationContext接口BeanFactory子接口。BeanFactory的功能在ApplicationContext中都有。</li>
</ul>
</blockquote>
</li>
</ul>
</blockquote>
</li>
<li>从Spring3开始把Spring框架的功能拆分成多个.jar</li>
</ol>
<hr>
<h2 id="SpringIoc简介："><a href="#SpringIoc简介：" class="headerlink" title="SpringIoc简介："></a>SpringIoc简介：</h2><ol>
<li>中文名称：控制反转</li>
<li>英文名称：（Inversion of Control）</li>
<li>Ioc是什么？<blockquote>
<ul>
<li>Ioc完成的事情是原先由程序主动通过new实例化对象事情，转交给Spring负责。</li>
<li>控制反转中的控制指的是：控制类的对象。</li>
<li>控制反转中的反转指的是：转交给Spring负责。</li>
<li>Ioc最大的作用：<code>解耦</code>。</li>
<li>程序员不需要去管理对象。解除了对象管理和程序员之间的耦合。</li>
</ul>
</blockquote>
</li>
</ol>
<hr>
<h2 id="Spring环境搭建"><a href="#Spring环境搭建" class="headerlink" title="Spring环境搭建"></a>Spring环境搭建</h2><ol>
<li><p>导入jar包</p>
<blockquote>
<ul>
<li>四个核心包+日志包</li>
</ul>
</blockquote>
</li>
<li><p>在src下新建applicationContext.xml</p>
<blockquote>
<ul>
<li>文件名称和路径自定义</li>
<li>记住Spring容器applicationContext，applicationContext配置的信息最终存储到了applicationContext容器中。</li>
<li>Spring配置文件是基于schema<blockquote>
<ul>
<li>Schema文件扩展名.xsd</li>
<li>把Schema理解成Dtd的升级版<blockquote>
<ul>
<li>比dtd具备更好的扩展性。</li>
</ul>
</blockquote>
</li>
<li>每次引入一个xsd配置文件就是一个namespace（xmlns）</li>
<li>配置文件中只需要导入schema即可。<blockquote>
<ul>
<li>通过<code>&lt;/bean&gt;</code>创建对象。</li>
<li>对象是在加载配置文件时被加载。</li>
</ul>
</blockquote>
</li>
</ul>
</blockquote>
</li>
</ul>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">		<span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">		<span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">		http://www.springframework.org/schema/beans/spring-beans.xsd"</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">			id：表示获取到对象标识</span></span><br><span class="line"><span class="comment">			class：创建哪个类的对象</span></span><br><span class="line"><span class="comment">		 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"peo"</span> <span class="attr">class</span>=<span class="string">"com.gdaib.pojo.People"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>编写测试方法</p>
<blockquote>
<ul>
<li>getBean(“<code>&lt;bean/&gt;</code>属性的id值”,创建的对象类型)。 </li>
<li>getBeanDefinitionNames()：获取bean属性管理的所有对象。</li>
</ul>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ApplicationContext ac=<span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"applicationContext.xml"</span>);</span><br><span class="line">People people = ac.getBean(<span class="string">"peo"</span>,People.class);</span><br><span class="line">System.out.println(people);</span><br><span class="line">String[] names = ac.getBeanDefinitionNames();</span><br><span class="line"><span class="keyword">for</span> (String string : names) &#123;</span><br><span class="line">    System.out.println(string);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<hr>
<h2 id="Spring创建对象的三种方式："><a href="#Spring创建对象的三种方式：" class="headerlink" title="Spring创建对象的三种方式："></a>Spring创建对象的三种方式：</h2><ol>
<li><p>通过构造方法创建</p>
<blockquote>
<ul>
<li>无参构造创建：默认情况</li>
<li>有参构造创建：需要明确配置<blockquote>
<ul>
<li>需要在类提供有参构造方法</li>
<li>在<code>applicationContext.xml</code>中设置调用哪个构造方法创建对象。<blockquote>
<ul>
<li>如果设定的条件匹配多个构造方法，执行最后的构造方法。</li>
<li>index：参数的索引，从0开始。</li>
<li>name：参数名。</li>
<li>type：参数类型。</li>
<li>value指定参数的参数值。</li>
</ul>
</blockquote>
</li>
</ul>
</blockquote>
</li>
</ul>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">    http://www.springframework.org/schema/beans/spring-beans.xsd"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">        id：表示获取到对象标识</span></span><br><span class="line"><span class="comment">        class：创建哪个类的对象</span></span><br><span class="line"><span class="comment">        --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"peo"</span> <span class="attr">class</span>=<span class="string">"com.gdaib.pojo.People"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- ref引用另一个bean；value基本数据类型或String等 --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- &lt;constructor-arg index="0" value="123"&gt;&lt;/constructor-arg&gt;</span></span><br><span class="line"><span class="comment">        &lt;constructor-arg index="1" value="张三"&gt;&lt;/constructor-arg&gt; --&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">index</span>=<span class="string">"0"</span> <span class="attr">name</span>=<span class="string">"id"</span> <span class="attr">type</span>=<span class="string">"int"</span> <span class="attr">value</span>=<span class="string">"321"</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">index</span>=<span class="string">"1"</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">type</span>=<span class="string">"java.lang.String"</span> <span class="attr">value</span>=<span class="string">"李四"</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>实例工厂</p>
<blockquote>
<ul>
<li>工厂设计模式：帮助创建类对象，一个工厂可以生产多个对象。</li>
<li>实例工厂：需要先创建工厂，才能生产对象。</li>
<li>实现步骤：<blockquote>
<ul>
<li>需要有一个实例工厂模式</li>
</ul>
</blockquote>
</li>
</ul>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.gdaib.pojo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PeopleFactory2</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> People <span class="title">newInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">new</span> People(<span class="number">1</span>,<span class="string">"测试"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<blockquote>
<ul>
<li>在applicationContext.xml配置并创建bean对象。</li>
</ul>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 实例工厂 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"factory"</span> <span class="attr">class</span>=<span class="string">"com.gdaib.pojo.PeopleFactory2"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"peo1"</span> <span class="attr">factory-bean</span>=<span class="string">"factory"</span> <span class="attr">factory-method</span>=<span class="string">"newInstance"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="3">
<li>静态工厂<blockquote>
<ul>
<li>不需要创建工厂，快速创建对象</li>
<li>实现步骤：<blockquote>
<ul>
<li>编写一个静态工厂（在方法上加上一个static）</li>
</ul>
</blockquote>
</li>
</ul>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.gdaib.pojo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PeopleFactory2</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> People <span class="title">newInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">new</span> People(<span class="number">1</span>,<span class="string">"测试"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<blockquote>
<blockquote>
<ul>
<li>在applicationContext.xml进行配置</li>
</ul>
</blockquote>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 静态工厂 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"peo2"</span> <span class="attr">class</span>=<span class="string">"com.gdaib.pojo.PeopleFactory2"</span> <span class="attr">factory-method</span>=<span class="string">"newInstance"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="如何给Bean的属性赋值（注入）"><a href="#如何给Bean的属性赋值（注入）" class="headerlink" title="如何给Bean的属性赋值（注入）"></a>如何给Bean的属性赋值（注入）</h2><ol>
<li>通过构造方法设置值</li>
<li>设置注入(setter方法)<blockquote>
<ul>
<li>如果属性是基本数据类型或String类型</li>
</ul>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"peo"</span> <span class="attr">class</span>=<span class="string">"com.gdaib.pojo.People"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"id"</span> <span class="attr">value</span>=<span class="string">"555"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">value</span>=<span class="string">"张三"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
<blockquote>
<ul>
<li>等效于</li>
</ul>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"peo"</span> <span class="attr">class</span>=<span class="string">"com.gdaib.pojo.People"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"id"</span>&gt;</span><span class="tag">&lt;<span class="name">value</span>&gt;</span>345<span class="tag">&lt;/<span class="name">value</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"name"</span>&gt;</span><span class="tag">&lt;<span class="name">value</span>&gt;</span>lisi<span class="tag">&lt;/<span class="name">value</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<ul>
<li>如果属性是<code>Set&lt;?&gt;</code>时</li>
</ul>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"peo"</span> <span class="attr">class</span>=<span class="string">"com.gdaib.pojo.People"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"id"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>567<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"name"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>lisi<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"sets"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>1<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>2<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>3<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>4<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<ul>
<li>如果对象是List&lt;?&gt;集合</li>
</ul>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"peo"</span> <span class="attr">class</span>=<span class="string">"com.gdaib.pojo.People"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"id"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>567<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"name"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>lisi<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"lists"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>1<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>2<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>3<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>4<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<ul>
<li><code>如果list集合中只有一个值</code></li>
</ul>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"list"</span> <span class="attr">value</span>=<span class="string">"1"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<ul>
<li>如果属性是数组时</li>
</ul>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"peo"</span> <span class="attr">class</span>=<span class="string">"com.gdaib.pojo.People"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"id"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>567<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"name"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>lisi<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"strs"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">array</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>1<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>2<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>3<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>4<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">array</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<ul>
<li><code>如果数组中只有一个值</code></li>
</ul>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"strs"</span> <span class="attr">value</span>=<span class="string">"1"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<ul>
<li>如果属性是map</li>
</ul>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"maps"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">map</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">"1"</span> <span class="attr">value</span>=<span class="string">"2"</span>&gt;</span><span class="tag">&lt;/<span class="name">entry</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">"3"</span> <span class="attr">value</span>=<span class="string">"4"</span>&gt;</span><span class="tag">&lt;/<span class="name">entry</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">map</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<ul>
<li>如果属性是Properties时</li>
</ul>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"demo"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">props</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">"key1"</span>&gt;</span>value1<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">"key2"</span>&gt;</span>value2<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">props</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="DI"><a href="#DI" class="headerlink" title="DI"></a>DI</h2><ol>
<li>DI：中文名称：依赖注入</li>
<li>DI: 英文名称：Dependency Injection</li>
<li>DI是什么？<blockquote>
<ul>
<li>DI和IOC是一样的</li>
<li>当一个类(A)中需要依赖另一个类(B)对象时，把B赋值给A的过程就叫注入。</li>
</ul>
</blockquote>
</li>
<li>代码体现<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"peo"</span> <span class="attr">class</span>=<span class="string">"com.gdaib.pojo.People"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"desk"</span> <span class="attr">ref</span>=<span class="string">"desk"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"desk"</span> <span class="attr">class</span>=<span class="string">"com.gdaib.pojo.Desk"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"id"</span> <span class="attr">value</span>=<span class="string">"1"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"price"</span> <span class="attr">value</span>=<span class="string">"12.3"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
<hr>
<h2 id="使用Spring简化Mybatis"><a href="#使用Spring简化Mybatis" class="headerlink" title="使用Spring简化Mybatis"></a>使用Spring简化Mybatis</h2><ol>
<li>导入jar包：导入Mybatis所有的jar包和spring基本包，spring-jdbc,spring-tx,spring-aop,spring整合mybatis的包等。</li>
</ol>
<p><img src="https://i.loli.net/2019/10/25/M4rlQG2dq3REzPH.png" alt="spring-mybatis.png"></p>
<ol start="2">
<li><p>编写spring配置文件：applicationContext.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">    http://www.springframework.org/schema/beans/spring-beans.xsd"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">        数据源封装类 </span></span><br><span class="line"><span class="comment">        数据源：获取数据库连接</span></span><br><span class="line"><span class="comment">        spring-jdbc.jar</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"dataSource"</span> <span class="attr">class</span>=<span class="string">"org.springframework.jdbc.datasource.DriverManagerDataSource"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driverClassName"</span> <span class="attr">value</span>=<span class="string">"com.mysql.cj.jdbc.Driver"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"url"</span> <span class="attr">value</span>=<span class="string">"jdbc:mysql://localhost:3306/ssm?serverTimezone=UTC&amp;amp;characterEncoding=UTF8"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">value</span>=<span class="string">"root"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"123456"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 依赖注入 创建SqlSessionFactory对象--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"factory"</span> <span class="attr">class</span>=<span class="string">"org.mybatis.spring.SqlSessionFactoryBean"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 数据库连接信息来源与DataSource --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 扫描器 相当Mybatis中Mappers标签下的package标签，扫描com.gdaib.mapper包后会给对应接口创建对象  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.mybatis.spring.mapper.MapperScannerConfigurer"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 指定要扫描哪个包 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"basePackage"</span> <span class="attr">value</span>=<span class="string">"com.gdaib.mapper"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 和factory产生关系 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"sqlSessionFactory"</span> <span class="attr">ref</span>=<span class="string">"factory"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 由spring来管理实现类 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"airportService"</span> <span class="attr">class</span>=<span class="string">"com.gdaib.pojo.impl.AirportServiceImpl"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"airportMapper"</span> <span class="attr">ref</span>=<span class="string">"airportMapper"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>编写代码</p>
<blockquote>
<ul>
<li>正常编写pojo</li>
<li>编写Mapper包下时必须使用接口绑定方案或者注解方法(必须有接口)</li>
<li>正常编写Service接口和Service接口的实现类<blockquote>
<ul>
<li>需要在Service实现类中声明Mapper接口对象，并生成getter和setter方法。</li>
</ul>
</blockquote>
</li>
<li>spring无法管理Servlet</li>
</ul>
</blockquote>
<h2 id="AOP"><a href="#AOP" class="headerlink" title="AOP"></a>AOP</h2></li>
<li><p>AOP：中文名称：面向切面编程</p>
</li>
<li><p>AOP: 英文名称：Aspect Oriented Programming</p>
</li>
<li><p>正常程序执行流程都是纵向执行流程。</p>
<blockquote>
<ul>
<li>又叫面向切面编程，在原有纵向执行流程中添加横切面。</li>
<li>不需要修改原有程序代码（体现出程序高扩展性）<blockquote>
<ul>
<li>高扩展性</li>
<li>原有功能相当于释放了部分逻辑，让职责更加明确。</li>
</ul>
</blockquote>
</li>
</ul>
</blockquote>
</li>
<li><p>面向切面编程是什么？</p>
<blockquote>
<ul>
<li>在程序原有纵向执行流程中，针对某一个某一些方法添加通知，形成横切面的过程就叫做面向切面编程。</li>
</ul>
</blockquote>
</li>
<li><p>常用概念</p>
<blockquote>
<ul>
<li>原有功能：切点：pointcut</li>
<li>前置通知：在切点之前执行的功能：before advice</li>
<li>后置通知：在切点之后执行的功能：after advice</li>
<li>如果切点执行过程中出现异常，会触发异常通知。throwable advice</li>
<li>所有功能的总称叫做切面</li>
<li>织入：把切面嵌入到原有功能的过程叫做织入。</li>
</ul>
</blockquote>
</li>
<li><p>Spring提供了2中AOP方式</p>
<blockquote>
<ul>
<li>Schema-based<blockquote>
<ul>
<li>每个通知都需要实现接口或类。</li>
<li>配置spring文件时在<code>&lt;aop:config&gt;</code>配置</li>
</ul>
</blockquote>
</li>
<li>AspectJ<blockquote>
<ul>
<li>每个通知不需要实现类或接口</li>
<li>配置spring配置文件是在<code>&lt;aop:config&gt;</code>的字标签<code>&lt;aop:aspect&gt;</code>中配置。</li>
</ul>
</blockquote>
</li>
<li>schema-based实现步骤：<blockquote>
<ul>
<li>导入jar包</li>
</ul>
</blockquote>
</li>
</ul>
</blockquote>
</li>
</ol>
<p><img src="https://i.loli.net/2019/10/25/micsfUBRbygqHpv.png" alt="aop.png"></p>
<blockquote>
<blockquote>
<ul>
<li>新建通知类：前置通知类和后置通知类</li>
<li>arg0：切点方法对象 Method对象</li>
<li>arg1：切点方法参数</li>
<li>arg2：切点在哪个对象中</li>
</ul>
</blockquote>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.gdaib.advise;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.aop.MethodBeforeAdvice;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyBeforeAdvice</span> <span class="keyword">implements</span> <span class="title">MethodBeforeAdvice</span></span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">before</span><span class="params">(Method arg0, Object[] arg1, Object arg2)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">		</span><br><span class="line">		System.out.println(<span class="string">"前置通知"</span>);</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<blockquote>
<ul>
<li>arg0:切点方法返回值</li>
<li>arg1：切点方法对象</li>
<li>arg2：切点方法参数</li>
<li>arg4：切点方法所在类的对象</li>
</ul>
</blockquote>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.gdaib.advise;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.aop.AfterReturningAdvice;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyAfterAdvice</span> <span class="keyword">implements</span> <span class="title">AfterReturningAdvice</span></span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterReturning</span><span class="params">(Object arg0, Method arg1, Object[] arg2, Object arg3)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		System.out.println(<span class="string">"执行后置通知"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<blockquote>
<ul>
<li>配置spring配置文件<blockquote>
<ul>
<li>引入aop命名空间</li>
<li>配置通知类<code>&lt;bean/&gt;</code></li>
<li>配置通知 <code>&lt;aop:advisor&gt;</code></li>
<li><code>*</code>：通配符，匹配任意方法名，任意类名，任意一级包名</li>
<li><code>(..)</code>：如果希望匹配任意方法参数</li>
</ul>
</blockquote>
</li>
</ul>
</blockquote>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:aop</span>=<span class="string">"http://www.springframework.org/schema/aop"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">    http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">    http://www.springframework.org/schema/aop</span></span></span><br><span class="line"><span class="tag"><span class="string">    http://www.springframework.org/schema/aop/spring-aop.xsd"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 配置通知类对象 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"mybefore"</span> <span class="attr">class</span>=<span class="string">"com.gdaib.advise.MyBeforeAdvice"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"myafter"</span> <span class="attr">class</span>=<span class="string">"com.gdaib.advise.MyAfterAdvice"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 添加切面功能 Schema-based--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 配置切点 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">expression</span>=<span class="string">"execution(* com.gdaib.test.Demo.demo2())"</span> <span class="attr">id</span>=<span class="string">"mypoint"</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 添加前置通知 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:advisor</span> <span class="attr">advice-ref</span>=<span class="string">"mybefore"</span> <span class="attr">pointcut-ref</span>=<span class="string">"mypoint"</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 添加后置通知 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:advisor</span> <span class="attr">advice-ref</span>=<span class="string">"myafter"</span> <span class="attr">pointcut-ref</span>=<span class="string">"mypoint"</span>/&gt;</span></span><br><span class="line">        </span><br><span class="line">    <span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 配置demo,测试时使用 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"demo"</span> <span class="attr">class</span>=<span class="string">"com.gdaib.test.Demo"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<blockquote>
<ul>
<li>测试</li>
</ul>
</blockquote>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">demo1</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"demo1"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">demo2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"demo2"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">demo3</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"demo3"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		<span class="comment">//AOP 扩展</span></span><br><span class="line">		<span class="comment">//IOC 解耦</span></span><br><span class="line">		</span><br><span class="line">		ApplicationContext ac=<span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"applicationContext.xml"</span>);</span><br><span class="line">		Demo demo=ac.getBean(<span class="string">"demo"</span>,Demo.class);</span><br><span class="line">		demo.demo1();</span><br><span class="line">		demo.demo2();</span><br><span class="line">		demo.demo3();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<blockquote>
<ul>
<li>运行结果</li>
</ul>
</blockquote>
</blockquote>
<p><img src="https://i.loli.net/2019/10/25/yY4eWH5TEpXAGI1.png" alt="aop-result.png"></p>
<h2 id="配置异常通知的步骤：（AspectJ）"><a href="#配置异常通知的步骤：（AspectJ）" class="headerlink" title="配置异常通知的步骤：（AspectJ）"></a>配置异常通知的步骤：（AspectJ）</h2><ol>
<li>只有当切点报异常才能出发异常通知.</li>
<li>在spring中有<code>AspectJ</code>方式提供了异常通知的方法。<blockquote>
<ul>
<li>如果希望通过<code>Schema-based</code>实现需要按照特定的要求自己编写方法</li>
</ul>
</blockquote>
</li>
<li>实现步骤：<blockquote>
<ul>
<li>新建一个类，在类中写任意名称的方法</li>
</ul>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Myexception</span> <span class="keyword">implements</span> <span class="title">ThrowsAdvice</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">myexcetion</span><span class="params">(Exception e)</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"异常捕获通知:"</span>+e.getMessage());</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<blockquote>
<ul>
<li>在spring配置文件中配置 <blockquote>
<ul>
<li><code>&lt;aop:aspect&gt;</code>的ref属性表示：方法在哪个类中</li>
<li><code>&lt;aop:xxx&gt;</code>表示什么通知</li>
<li>method:表示调用哪个方法</li>
<li>throwing：异常对象名，必须和通知方法中参数名相同（可以不再通知方法中添加任何参数）</li>
</ul>
</blockquote>
</li>
</ul>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"my"</span> <span class="attr">class</span>=<span class="string">"com.gdaib.advise.Myexception"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:aspect</span> <span class="attr">ref</span>=<span class="string">"my"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">expression</span>=<span class="string">"execution(* com.gdaib.test.Demo.demo1())"</span> <span class="attr">id</span>=<span class="string">"mypoint"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:after-throwing</span> <span class="attr">method</span>=<span class="string">"myexcetion"</span> <span class="attr">pointcut-ref</span>=<span class="string">"mypoint"</span> <span class="attr">throwing</span>=<span class="string">"e"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">aop:aspect</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"demo"</span> <span class="attr">class</span>=<span class="string">"com.gdaib.test.Demo"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="使用Schema-base方式实现异常通知"><a href="#使用Schema-base方式实现异常通知" class="headerlink" title="使用Schema-base方式实现异常通知"></a>使用<code>Schema-base</code>方式实现异常通知</h2><ol>
<li><p>新建一个类实现<code>ThrowAdvice</code>接口</p>
<blockquote>
<ul>
<li>必须自己写方法，且必须叫afterThrowing</li>
<li>有两种参数方式,必须一个或四个</li>
<li>throwing值必须和方法参数名一致.</li>
</ul>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.gdaib.advise;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.aop.ThrowsAdvice;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyThrow</span> <span class="keyword">implements</span> <span class="title">ThrowsAdvice</span></span>&#123;</span><br><span class="line">	 <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterThrowing</span><span class="params">(ArithmeticException ex)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">	       System.out.println(<span class="string">"异常通知Schema-based"</span>);</span><br><span class="line">	  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>在spring的applicationContext.xml中进行配置</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">		<span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">		<span class="attr">xmlns:aop</span>=<span class="string">"http://www.springframework.org/schema/aop"</span></span></span><br><span class="line"><span class="tag">		<span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">		http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">		http://www.springframework.org/schema/aop</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/aop/spring-aop.xsd"</span>&gt;</span></span><br><span class="line">       </span><br><span class="line">        <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"mythrow"</span> <span class="attr">class</span>=<span class="string">"com.gdaib.advise.MyThrow"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">expression</span>=<span class="string">"execution(* com.gdaib.test.Demo.demo1())"</span> <span class="attr">id</span>=<span class="string">"mypoint"</span>/&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">aop:advisor</span> <span class="attr">advice-ref</span>=<span class="string">"mythrow"</span> <span class="attr">pointcut-ref</span>=<span class="string">"mypoint"</span>/&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">aop:aspect</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">aop:after-throwing</span> <span class="attr">method</span>=<span class="string">"mythrow"</span> <span class="attr">throwing</span>=<span class="string">"ex"</span>/&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">aop:aspect</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"demo"</span> <span class="attr">class</span>=<span class="string">"com.gdaib.test.Demo"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
<h2 id="环绕通知-schema-base"><a href="#环绕通知-schema-base" class="headerlink" title="环绕通知(schema-base)"></a>环绕通知(schema-base)</h2><ol>
<li>把前置通知和后置通知都写到一个通知中，成为环绕通知。</li>
<li>实现步骤：<blockquote>
<ul>
<li>新建一个类实现<code>MethodInterceptor</code>接口，并重写invoke方法</li>
</ul>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/***</span></span><br><span class="line"><span class="comment"> * 环绕通知(schema-base)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 1huangzewei</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyArround</span> <span class="keyword">implements</span> <span class="title">MethodInterceptor</span></span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> Object <span class="title">invoke</span><span class="params">(MethodInvocation arg0)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"环绕-前置"</span>);</span><br><span class="line">		Object result = arg0.proceed(); <span class="comment">//放行，调用切点方式</span></span><br><span class="line">		System.out.println(<span class="string">"环绕-后置"</span>);</span><br><span class="line">		<span class="keyword">return</span> result;</span><br><span class="line">	&#125;	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<blockquote>
<ul>
<li>在spring中配置applicationContext.xml文件</li>
</ul>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"myarround"</span> <span class="attr">class</span>=<span class="string">"com.gdaib.advise.MyArround"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">expression</span>=<span class="string">"execution(* com.gdaib.test.Demo.demo1())"</span> <span class="attr">id</span>=<span class="string">"mypoint"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:advisor</span> <span class="attr">advice-ref</span>=<span class="string">"myarround"</span> <span class="attr">pointcut-ref</span>=<span class="string">"mypoint"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"demo"</span> <span class="attr">class</span>=<span class="string">"com.gdaib.test.Demo"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="ApsectJ方式实现"><a href="#ApsectJ方式实现" class="headerlink" title="ApsectJ方式实现"></a>ApsectJ方式实现</h2><ol>
<li><p>新建类，不用实现任何方法</p>
<blockquote>
<ul>
<li>类中的方法任意定义</li>
</ul>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyAdvice</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">before</span><span class="params">(String name,<span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"前置通知"</span>);</span><br><span class="line">		System.out.println(name+<span class="string">" "</span>+age);	</span><br><span class="line">	&#125; </span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">after</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"后置通知1"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">myaftering</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"后置通知2"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">mythrow</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"异常通知"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> Object <span class="title">myaround</span><span class="params">(ProceedingJoinPoint p)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"执行环绕通知"</span>);</span><br><span class="line">		System.out.println(<span class="string">"环绕前置"</span>);</span><br><span class="line">		Object result = p.proceed();</span><br><span class="line">		System.out.println(<span class="string">"环绕后置"</span>);</span><br><span class="line">		<span class="keyword">return</span> result;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>配置Spring配置文件</p>
<blockquote>
<ul>
<li><code>&lt;aop:after&gt;</code>：后置通知，是否出现异常都执行</li>
<li><code>&lt;aop:after-returning/&gt;</code>：后置通知，只有当切点正确执行时执行。</li>
<li><code>&lt;aop:after&gt;</code>、<code>&lt;aop:after-returning&gt;</code>、<code>&lt;aop:after-throwing&gt;</code>执行顺序和配置顺序有关。</li>
<li>execution()括号不能加上参数</li>
<li>中间使用and不能使用&amp;&amp; 有spring把and解析成&amp;&amp;</li>
<li>args括号里的名称是自定义。顺序和demo1(参数，参数)对应</li>
<li><code>&lt;aop:before&gt;</code>;arg-names=“名称”，名称来源于expression=””中arg()，名称必须一样。</li>
<li>args()有几个参数，arg-names里面必须有几个。</li>
<li>arg-names里面名称必须和通知方法参数名对应。</li>
</ul>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"demo"</span> <span class="attr">class</span>=<span class="string">"com.gdaib.test.Demo"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"myadvice"</span> <span class="attr">class</span>=<span class="string">"com.gdaib.advise.MyAdvice"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:aspect</span> <span class="attr">ref</span>=<span class="string">"myadvice"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">expression</span>=<span class="string">"execution(* com.gdaib.test.Demo.demo1(String,int)) and args(name,age))"</span> <span class="attr">id</span>=<span class="string">"mypoint"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:before</span> <span class="attr">method</span>=<span class="string">"before"</span> <span class="attr">pointcut-ref</span>=<span class="string">"mypoint"</span> <span class="attr">arg-names</span>=<span class="string">"name,age"</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 下面两者的区别在于after不管方法出不出异常都会执行，而后者只能在方法执行正常时才执行 --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- &lt;aop:after method="after" pointcut-ref="mypoint"/&gt;</span></span><br><span class="line"><span class="comment">        &lt;aop:after-returning method="myaftering" pointcut-ref="mypoint"/&gt;</span></span><br><span class="line"><span class="comment">        &lt;aop:after-throwing method="mythrow" pointcut-ref="mypoint"/&gt;</span></span><br><span class="line"><span class="comment">        </span></span><br><span class="line"><span class="comment">        &lt;aop:around method="myaround" pointcut-ref="mypoint"/&gt; --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">aop:aspect</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
<hr>
<h2 id="使用注解-基于Aspect"><a href="#使用注解-基于Aspect" class="headerlink" title="使用注解(基于Aspect)"></a>使用注解(基于Aspect)</h2><ol>
<li>Spring不会自动去寻找注解，必须告诉Spring哪些包下的类可能有注解。<blockquote>
<ul>
<li>引入xmlns:context。</li>
</ul>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.gdaib.advise,com.gdaib.test"</span>&gt;</span><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
<blockquote>
<ul>
<li><code>@Component</code>：<blockquote>
<ul>
<li>相当于<code>&lt;bean/&gt;</code></li>
<li>如果没有参数，把类名首字母变小写，相当于<code>&lt;bean id=&quot;&quot;/&gt;</code></li>
<li><code>@Component(“自定义名称”)</code></li>
</ul>
</blockquote>
</li>
</ul>
<ol start="3">
<li>实现步骤</li>
</ol>
<ul>
<li>在Spring配置文件中设置注解在哪些包中</li>
</ul>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 如果有多个，使用逗号隔开 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.gdaib.advise,com.gdaib.test"</span>&gt;</span><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span>	</span><br><span class="line"><span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">    true:使用CGLIB动态代理</span></span><br><span class="line"><span class="comment">    false：使用JDK动态代理</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:aspectj-autoproxy</span> <span class="attr">proxy-target-class</span>=<span class="string">"true"</span>&gt;</span><span class="tag">&lt;/<span class="name">aop:aspectj-autoproxy</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<ul>
<li>在Demo类中添加@Component,在指定方法上添加切点即<code>@Pointcut</code>注解</li>
</ul>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo</span> </span>&#123;</span><br><span class="line">	<span class="comment">//添加切点</span></span><br><span class="line">	<span class="meta">@Pointcut</span>(<span class="string">"execution(* com.gdaib.test.Demo.demo1())"</span>)</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">demo1</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">		<span class="comment">//int i=5/0;</span></span><br><span class="line">		System.out.println(<span class="string">"demo1"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<ul>
<li>在通知类类中配置<blockquote>
<ul>
<li>@Component：表明该类被Spring管理</li>
<li>@Aspect:表明该切面使用AspectJ</li>
</ul>
</blockquote>
</li>
</ul>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyAdvice</span> </span>&#123;</span><br><span class="line">	<span class="meta">@Before</span>(<span class="string">"com.gdaib.test.Demo.demo1()"</span>)</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">mybefore</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"前置通知"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//添加后置通知</span></span><br><span class="line">	<span class="comment">/*@After("com.gdaib.test.Demo.demo1()")</span></span><br><span class="line"><span class="comment">	public void myafter() &#123;</span></span><br><span class="line"><span class="comment">		System.out.println("后置通知");</span></span><br><span class="line"><span class="comment">	&#125;*/</span></span><br><span class="line">	<span class="meta">@AfterThrowing</span>(<span class="string">"com.gdaib.test.Demo.demo1()"</span>)</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">mythrow</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"通知异常"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//环绕通知</span></span><br><span class="line">	<span class="meta">@Around</span>(<span class="string">"com.gdaib.test.Demo.demo1()"</span>)</span><br><span class="line">	<span class="function"><span class="keyword">public</span> Object <span class="title">myarround</span><span class="params">(ProceedingJoinPoint p)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"环绕-前"</span>);</span><br><span class="line">		Object result=p.proceed();</span><br><span class="line">		System.out.println(<span class="string">"环绕-后"</span>);</span><br><span class="line">		<span class="keyword">return</span> result;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="代理设计模式"><a href="#代理设计模式" class="headerlink" title="代理设计模式"></a>代理设计模式</h3><ol>
<li>设计模式：前人总结的一套解决待定问题的代码;</li>
<li>代理设计模式优点：<blockquote>
<ul>
<li>保护真实对象。</li>
<li>让真实对象职责更明确。</li>
<li>扩展。</li>
</ul>
</blockquote>
</li>
<li>代理设计模式<blockquote>
<ul>
<li>真实对象</li>
<li>代理对象</li>
<li>抽象对象（抽象功能）</li>
</ul>
</blockquote>
<h3 id="静态代理设计模式"><a href="#静态代理设计模式" class="headerlink" title="静态代理设计模式"></a>静态代理设计模式</h3></li>
<li>由代理对象代理真实对象的功能。<blockquote>
<ul>
<li>自己编写代理类.</li>
<li>每个代理的功能需要单独编写。</li>
</ul>
</blockquote>
</li>
<li>静态代理设计模式的缺点：<blockquote>
<ul>
<li>当代理功能比较多时，代理类就得代理多个方法。</li>
<li>总结：静态代理模式代码的可重用性差。</li>
</ul>
</blockquote>
<h3 id="动态代理"><a href="#动态代理" class="headerlink" title="动态代理"></a>动态代理</h3></li>
<li>为了解决静态代理频繁编写代理功能的缺点。</li>
<li>分类：<blockquote>
<ul>
<li>JDK提供的</li>
<li>CGLIB</li>
</ul>
</blockquote>
<h3 id="JDK动态代理"><a href="#JDK动态代理" class="headerlink" title="JDK动态代理"></a>JDK动态代理</h3></li>
<li>和CGLIB动态代理的比较<blockquote>
<ul>
<li>JDK自带,不需要导入第三方jar包</li>
<li>缺点：真实对象必须实现接口;利用反射机制，效率不高;</li>
</ul>
</blockquote>
<h3 id="CGLIB动态代理"><a href="#CGLIB动态代理" class="headerlink" title="CGLIB动态代理"></a>CGLIB动态代理</h3></li>
<li>优点：基于字节码操作，生成真实对象的子类。<blockquote>
<ul>
<li>效率比JDK动态代理高</li>
<li>不需要实现接口</li>
</ul>
</blockquote>
</li>
<li>缺点，需要导入jar包. </li>
<li>使用SpringAOP时，只要出现Proxy和真实对象转换异常<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">    true:使用CGLIB动态代理</span></span><br><span class="line"><span class="comment">    false：使用JDK动态代理</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:aspectj-autoproxy</span> <span class="attr">proxy-target-class</span>=<span class="string">"true"</span>&gt;</span><span class="tag">&lt;/<span class="name">aop:aspectj-autoproxy</span>&gt;</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="自动驻入"><a href="#自动驻入" class="headerlink" title="自动驻入"></a>自动驻入</h3><ul>
<li>在spring配置文件中对象名和<code>ref=&quot;id&quot;</code>id名相同时使用自动注入，可以不配置property</li>
<li>两种配置方法 <blockquote>
<ul>
<li>在<code>&lt;bean&gt;</code>中通过<code>autowire=&quot;&quot;</code>配置，只对<code>&lt;bean&gt;</code>生效。</li>
<li>在<code>&lt;beans&gt;</code>中通过<code>default-autowire=&quot;&quot;</code>配置，表当当前文件中所有<code>&lt;bean&gt;</code>都是全局配置内容。</li>
</ul>
</blockquote>
</li>
<li>autowire可取值<blockquote>
<ul>
<li>default:默认值，根据全局<code>default-autowire=&quot;&quot;</code>值。默认全局和局部都没有配置情况下。相当于no.</li>
<li>no：默认全局和局部都没有配置情况下。</li>
<li>byName：通过名称自动注入，在spring容器中找类id</li>
<li>byType：根据类型注入。<blockquote>
<ul>
<li>Spring容器中不可以出现两个相同类型的<code>&lt;bean/&gt;</code></li>
</ul>
</blockquote>
</li>
<li>construtor:根据构造方法注入<blockquote>
<ul>
<li>提供对应参数的构造方法(构造方法参数中包含注入对象那个)</li>
<li>底层使用byName，构造方法参数名和其他<code>&lt;bean&gt;</code>的id相同。</li>
</ul>
</blockquote>
</li>
</ul>
</blockquote>
<h3 id="spring中加载properties文件"><a href="#spring中加载properties文件" class="headerlink" title="spring中加载properties文件"></a>spring中加载properties文件</h3></li>
</ul>
<ol>
<li><p>在src下新建xxx.properties文件</p>
</li>
<li><p>在spring的配置文件中添加<code>xmlns:context</code>，在下面添加</p>
<blockquote>
<ul>
<li>如果需要加载多个配置文件，需要用逗号隔开</li>
</ul>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">"classpath:db.properties"</span>/&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>添加属性配置文件记载，并且在<code>&lt;beans&gt;</code>中开启自动注入注意的地方</p>
<blockquote>
<ul>
<li>sqlSessionFactoryBean中的id不能叫sqlSessionFactory</li>
<li>修改:把原来通过ref引用替换成value赋值，自动注入只能影响ref，不能影响value赋值</li>
</ul>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 配置扫描器 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.mybatis.spring.mapper.MapperScannerConfigurer"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"basePackage"</span> <span class="attr">value</span>=<span class="string">"com.gdaib.mapper"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- &lt;property name="sqlSessionFactory" ref="factory"&gt;&lt;/property&gt; --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"sqlSessionFactoryBeanName"</span> <span class="attr">value</span>=<span class="string">"factory"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>在被spring管理的类中通过<code>@value(&quot;${key}&quot;)</code>取出properties中的值</p>
<blockquote>
<ul>
<li>添加注解扫描</li>
</ul>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">&lt;!-- 扫描注解 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">""</span>&gt;</span><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
<blockquote>
<ul>
<li>在类中添加<blockquote>
<ul>
<li>key和变量名可以不相同</li>
<li>变量类型任意，只要保证key对应点的value能转换成这个类型就可以。</li>
</ul>
</blockquote>
</li>
</ul>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Value</span>(<span class="string">"$&#123;key&#125;"</span>)</span><br><span class="line"><span class="keyword">private</span> String test;</span><br></pre></td></tr></table></figure>

<h3 id="scope属性"><a href="#scope属性" class="headerlink" title="scope属性"></a>scope属性</h3><ol>
<li><code>&lt;bean&gt;</code>的属性</li>
<li>作用：控制对象有效范围（单例，多例等）</li>
<li><code>&lt;bean/&gt;</code> 标签对应的对象都是单例</li>
<li>scope可取值<blockquote>
<ul>
<li>singleton：默认值，单例</li>
<li>prototype:多例，每次获取重新实例化</li>
<li>request:每次请求重新实例化</li>
<li>session：每个会话对象内，对象是单例的。</li>
<li>application：每个application范围内，对象是单例的。</li>
<li>global session spring推出的一个对象，依赖于<code>spring-webmvc-portlet</code>，类似于session</li>
</ul>
</blockquote>
<h3 id="单例设计模式"><a href="#单例设计模式" class="headerlink" title="单例设计模式"></a>单例设计模式</h3></li>
<li>作用：在应用程序中保证最多只有一个实例</li>
<li>好处：<blockquote>
<ul>
<li>提升运行效率。</li>
<li>实现数据共享.实例：application对象</li>
</ul>
</blockquote>
</li>
<li>懒汉式<blockquote>
<ul>
<li>对象只有被调用，才会去创建对象</li>
</ul>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.gdaib.singleton;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SingleTon</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> SingleTon singleTon;</span><br><span class="line">	<span class="comment">/***</span></span><br><span class="line"><span class="comment">	 * 方法名和类型相同</span></span><br><span class="line"><span class="comment">	 * 无返回值</span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 * 其他类不能实例化这个类</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="title">SingleTon</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line">	<span class="comment">/***</span></span><br><span class="line"><span class="comment">	 * 实例方法，实例方法必须通过对象调用</span></span><br><span class="line"><span class="comment">	 * 设置方法为静态方法</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> SingleTon <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">if</span>(singleTon==<span class="keyword">null</span>) &#123;</span><br><span class="line">			<span class="comment">//多线程访问下，可能出现线程安全</span></span><br><span class="line">			<span class="keyword">synchronized</span> (SingleTon.class) &#123;</span><br><span class="line">				<span class="keyword">if</span>(singleTon==<span class="keyword">null</span>) &#123;</span><br><span class="line">					singleTon=<span class="keyword">new</span> SingleTon();</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> singleTon;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<blockquote>
<ul>
<li>由于添加了锁，所以导致执行效率较低。</li>
</ul>
<ol start="4">
<li>饿汉式：解决了懒汉式中多线程可能出现多个对象和执行效率低的情况</li>
</ol>
<ul>
<li>在类被加载时就被实例化</li>
</ul>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.gdaib.singleton;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SingleTon</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> SingleTon singleTon=<span class="keyword">new</span> SingleTon();</span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="title">SingleTon</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> SingleTon <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> singleTon;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="声明式事务"><a href="#声明式事务" class="headerlink" title="声明式事务"></a>声明式事务</h3><ol>
<li>编程式事务<blockquote>
<ul>
<li>由程序员编写事务控制代码。</li>
<li>OpenSessionInView编程式事务。</li>
</ul>
</blockquote>
</li>
<li>声明式事务：<blockquote>
<ul>
<li>事务控制代码已由spring写好，程序员只需要声明出哪些方法需要进行事务控制和如何进行事务回滚。</li>
</ul>
</blockquote>
</li>
<li>声明式事务都是针对于ServiceImpl类的方法下</li>
<li>事务管理器基于通知（advice）的。</li>
<li>在spring中配置声明式事务<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 获取数据源 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"dataSource"</span> <span class="attr">class</span>=<span class="string">"org.springframework.jdbc.datasource.DriverManagerDataSource"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driverClassName"</span> <span class="attr">value</span>=<span class="string">"com.mysql.cj.jdbc.Driver"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"url"</span> <span class="attr">value</span>=<span class="string">"jdbc:mysql://localhost:3306/ssm?serverTimezone=UTC&amp;amp;characterEncoding=utf8"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">value</span>=<span class="string">"root"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"123456"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- spring-jdbc.jar --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"txManager"</span> <span class="attr">class</span>=<span class="string">"org.springframework.jdbc.datasource.DataSourceTransactionManager"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 配置声明式事务 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tx:advice</span> <span class="attr">id</span>=<span class="string">"txAdvice"</span> <span class="attr">transaction-manager</span>=<span class="string">"txManager"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 哪些方法需要事务控制 --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 方法以ins开头事务管理 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">"ins*"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">"del*"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">"upd*"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">"*"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tx:advice</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 切点范围设置大一点 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">expression</span>=<span class="string">"execution(* com.gdaib.service.impl.*.*(..))"</span> <span class="attr">id</span>=<span class="string">"mypoint"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:advisor</span> <span class="attr">advice-ref</span>=<span class="string">"txAdvice"</span> <span class="attr">pointcut-ref</span>=<span class="string">"mypoint"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="声明式事务属性解释"><a href="#声明式事务属性解释" class="headerlink" title="声明式事务属性解释"></a>声明式事务属性解释</h3><ol>
<li>name=””:哪些方法需要事务控制，支持通配符配置</li>
<li>readonly=”boolean”：是否是只读事务<blockquote>
<ul>
<li>如果为true，告诉数据库此事务为只读事务。数据库优化，会对性能有一定的提升，所以只要是查询的方法，建议使用此属性值.</li>
<li>如果为false(默认值)：事务需要提交的事务，建议新增，删除，修改</li>
</ul>
</blockquote>
</li>
<li>propagation：控制事务传播行为。<blockquote>
<ul>
<li>当一个具有事务控制的方法被另一个有事务控制的方法调用后，需要如何管理事务。（新建事务？在事务中执行？把事务挂起？报异常）</li>
<li>REQUIRED:如果当前有事务，就在事务中执行，如果当前没有事务，则新建一个事务。</li>
<li>SUPPORTS:如果当前有事务就在事务中执行，如果当前没有事务，就在非事务状态下执行。</li>
<li>MANDATORY：必须在事务内部执行，如果当前有事务，就在事务中执行，如果没有事务就报错。</li>
<li>REQUIRES_NEW:必须在事务中执行，如果当前没有事务，则新建事务，如果当前有事务，把当前事务挂起。</li>
<li>NOT_SUPPORTED:必须在非事务下执行，如果当前没有事务，正常执行，如果当前有事务，把当前事务挂起。</li>
<li>NEVER：必须在非事务状态下执行，如果当前没有事务，则正常执行，如果当前有事务，则报错。</li>
<li>NESTED：必须在事务状态下执行，如果没有事务，新建事务，如果当前有事务，创建一个嵌套事务。</li>
</ul>
</blockquote>
</li>
<li>isolation=””：事务隔离级别<blockquote>
<ul>
<li>在多线程和并发访问下如何保证访问到的数据具有完整性。</li>
<li>脏读：一个事务（A）读取到另一个事务(B)中未提交的数据，另一个事务中数据可能进行了改变，此时A事务读取的数据可能和数据库中的数据不一致的，此时认为数据是脏数据，读取脏数据过程叫做脏读。</li>
<li>不可重复读<blockquote>
<ul>
<li>主要针对的是某行数据（行中某列）</li>
<li>主要针对的操作是修改。</li>
<li>两个读取在通一个事务内。</li>
<li>当事务A第一次读取事务后，事务B对事务A读取的数据进行修改，事务A中再次读取的数据和之前读取的数据不一致，这个过程就叫做不可重复读。</li>
</ul>
</blockquote>
</li>
<li>幻读：<blockquote>
<ul>
<li>主要针对的操作是新增和删除</li>
<li>两次事务的结果</li>
<li>事务A按照特定条件查询出结果，事务B新增了一条符合条件的数据，事务A查询的数据和数据库中的数据不一致的，事务A好像出现了幻觉，这种情况称为幻读。</li>
</ul>
</blockquote>
</li>
<li>isolation的可能取值及作用：<blockquote>
<ul>
<li>DEFAULT：默认值，由底层数据库自动判断应该使用什么隔离级别。</li>
<li>READ_UNCOMMITTED：可以读取未提交事务，可能出现脏读、不可重复读、幻读，但是效率最高。</li>
<li>READ_COMMITTED:只能读取其他事务已经提交的数据，可以防止脏读，可能出现不可重复读和幻读。</li>
<li>REPEATABLE_READ：读取的数据被添加锁，防止其他事务修改此数据，可以防止不可重复读、脏读，可能出现幻读。</li>
<li>REPEATABLE_READ：排队操作，对整个表添加锁，一个事务在操作数据时，另一事物等待事务操作完成后才能操作这个表。这个操作，是最安全也是效率最低的。</li>
</ul>
</blockquote>
</li>
</ul>
</blockquote>
<h3 id="事务回滚"><a href="#事务回滚" class="headerlink" title="事务回滚"></a>事务回滚</h3></li>
<li>rollback-for=”类异常的全限定路径”<blockquote>
<ul>
<li>当出现什么异常时需要进行事务回滚。 </li>
<li>建议：给定该属性值。手动抛异常时一定要给定该属性值，即<code>throw new Exception()</code></li>
</ul>
</blockquote>
</li>
<li>no-rollback-for=””<blockquote>
<ul>
<li>当出现什么异常时不回滚事务。</li>
</ul>
</blockquote>
<h3 id="Spring常用注解"><a href="#Spring常用注解" class="headerlink" title="Spring常用注解"></a>Spring常用注解</h3></li>
<li><code>@Component</code>：创建类对象，相当于配置<code>&lt;bean/&gt;</code></li>
<li><code>@Service</code>与<code>@Component</code>功能相同，<code>@Service</code>写在<code>ServiceImpl</code>上。</li>
<li><code>@Repository</code>与<code>@Component</code>功能相同,该注解通常写在数据访问层上。</li>
<li><code>@Controller</code>与<code>@Component</code>功能相同，该注解通常写在控制器上。</li>
<li><code>@Resource</code>：Java中的注解；默认按照byName,建议把对象名称和属性名称写一样，如果没有名称对象，按照byType注入；不需要编写get和set方法。</li>
<li><code>@Autowired</code>：Spring框架中的注解；默认按照byType注入。</li>
<li><code>@Value</code>获取properties文件中的内容</li>
<li><code>@Pointcut</code>：定义切点。</li>
<li><code>@Aspect()</code>：定义切面类</li>
<li><code>@Before()</code>：定义前置通知</li>
<li><code>@After()</code>：定义后置通知</li>
<li><code>@AfterReturning()</code>：定义后置通知，必须切点正确执行</li>
<li><code>@Arround()</code>：环绕通知。<h3 id="ajax复习"><a href="#ajax复习" class="headerlink" title="ajax复习"></a><code>ajax</code>复习</h3></li>
<li>$.ajax</li>
<li>$.get、$.post</li>
<li>$.getJson</li>
<li>$.getScript</li>
<li>ObjectMapper mapper=new ObjectMapper(); mapper.writeValueAsString(对象);把对象转化为JSON格式字符串。</li>
</ol>
<h4 id="Spring源码下载地址-https-github-com-spring-projects-spring-framework-tags-after-v4-2-5-RELEASE"><a href="#Spring源码下载地址-https-github-com-spring-projects-spring-framework-tags-after-v4-2-5-RELEASE" class="headerlink" title="Spring源码下载地址:https://github.com/spring-projects/spring-framework/tags?after=v4.2.5.RELEASE"></a>Spring源码下载地址:<code>https://github.com/spring-projects/spring-framework/tags?after=v4.2.5.RELEASE</code></h4><h4 id="Spring框架下载地址：https-repo-spring-io-release-org-springframework-spring"><a href="#Spring框架下载地址：https-repo-spring-io-release-org-springframework-spring" class="headerlink" title="Spring框架下载地址：https://repo.spring.io/release/org/springframework/spring/"></a>Spring框架下载地址：<code>https://repo.spring.io/release/org/springframework/spring/</code></h4><h4 id="Spring与Mybatis整合的jar包：https-blog-csdn-net-qiangqiang816-article-details-81541188"><a href="#Spring与Mybatis整合的jar包：https-blog-csdn-net-qiangqiang816-article-details-81541188" class="headerlink" title="Spring与Mybatis整合的jar包：https://blog.csdn.net/qiangqiang816/article/details/81541188"></a>Spring与Mybatis整合的jar包：<code>https://blog.csdn.net/qiangqiang816/article/details/81541188</code></h4><h4 id="Maven地址：https-mvnrepository-com"><a href="#Maven地址：https-mvnrepository-com" class="headerlink" title="Maven地址：https://mvnrepository.com/"></a>Maven地址：<code>https://mvnrepository.com/</code></h4>
        
    </section>
</article>


    <article class="article" itemscope itemprop="blogPost">
    
    <header class="article-header">
        
        <h1 itemprop="name">
            <a href="/CPWS.github.io/2019/10/18/SSM/">SSM</a>
        </h1>
        
        <div class="article-meta clearfix">
            <a class="article-date" href="https://CPWS.github.io/page/2/index.html">
    
    <i class="icon-calendar"></i>
    
    <time datetime="2019-10-18T08:03:37.000Z" itemprop="datePublished">2019-10-18</time>
</a>

            
<div class="article-tag-list">
    <i class="icon-tag"></i>
    <a class="article-tag-link" href="/CPWS.github.io/tags/SSM/">SSM</a>
</div>


        </div>
    </header>
    
    <section class="article-body markdown-body">
        
        <h2 id="第2章-Java设计模式"><a href="#第2章-Java设计模式" class="headerlink" title="第2章 Java设计模式"></a>第2章 Java设计模式</h2><h3 id="Java反射技术"><a href="#Java反射技术" class="headerlink" title="Java反射技术"></a>Java反射技术</h3><ul>
<li><code>Java</code>反射技术应用很广泛，它能够配置：类的完全限定名、方法和参数，完成对象的初始化，甚至反射某些方法。这样就可以大大增加Java的可配置性，<code>SpringIoC</code>的基本原理也是如此，当然<code>SpringIoc</code>的代码要复杂很多。</li>
<li>Java的反射内容繁多，包括对象构建、反射方法，、注解、参数、接口等。<blockquote>
<ul>
<li>对象的构建：包括有参的构建方法和无参数的构建方法。</li>
<li>在Java中，放射是通过包<code>jacva.lang.reflect.*</code>来实现的。</li>
</ul>
</blockquote>
</li>
<li>通过反射构建对象<blockquote>
<ul>
<li>反射的优点是：只要配置就可以生成对象，可以解除耦合度，比较灵活。</li>
<li>反射的缺点是：运行速度比较慢。</li>
<li>案例实现：带无参数构造方法的实现：</li>
</ul>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zhuchuli.demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"></span><br><span class="line"><span class="comment">/***</span></span><br><span class="line"><span class="comment"> *  反射</span></span><br><span class="line"><span class="comment"> *  带有无参的构造方法 + 反射方法</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 1huangzewei</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ReflectServiceImpl</span> </span>&#123;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sayHello</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">		System.err.println(<span class="string">"hello:"</span>+name);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">/***</span></span><br><span class="line"><span class="comment">	 * 通过反射获取当前对象</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ReflectServiceImpl <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		ReflectServiceImpl object=<span class="keyword">null</span>;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			<span class="comment">/**</span></span><br><span class="line"><span class="comment">			 * 给类加载器注册一个类 ReflectServiceImpl的全限定名，然后通过调用newInstance()方法初始化一个对象</span></span><br><span class="line"><span class="comment">			 */</span></span><br><span class="line">			object=(ReflectServiceImpl) Class.forName(<span class="string">"com.zhuchuli.demo.ReflectServiceImpl"</span>).getConstructor().newInstance();</span><br><span class="line">			</span><br><span class="line">		&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">			<span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> object;</span><br><span class="line">	</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		ReflectServiceImpl.getInstance().sayHello(<span class="string">"张三"</span>);</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<blockquote>
<ul>
<li>案例实现：带有有参数构造方法的实现</li>
</ul>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zhuchuli.demo;</span><br><span class="line"><span class="comment">/***</span></span><br><span class="line"><span class="comment"> *  反射</span></span><br><span class="line"><span class="comment"> *  带有有参的构造方法</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 1huangzewei</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ReflectServiceImpl2</span> </span>&#123;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">ReflectServiceImpl2</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">super</span>();</span><br><span class="line">		<span class="keyword">this</span>.name = name;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sayHello</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		System.err.println(<span class="string">"hello:"</span>+name);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">/***</span></span><br><span class="line"><span class="comment">	 * 通过反射获取当前对象</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ReflectServiceImpl2 <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		ReflectServiceImpl2 object=<span class="keyword">null</span>;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			<span class="comment">/**</span></span><br><span class="line"><span class="comment">			 * 给类加载器注册一个类 ReflectServiceImpl的全限定名，然后通过调用newInstance()方法初始化一个对象</span></span><br><span class="line"><span class="comment">			 */</span></span><br><span class="line">			object=(ReflectServiceImpl2) Class.forName(<span class="string">"com.zhuchuli.demo.ReflectServiceImpl2"</span>).getConstructor(String.class).newInstance(<span class="string">"李四"</span>);</span><br><span class="line">			</span><br><span class="line">		&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">			<span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> object;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		ReflectServiceImpl2.getInstance().sayHello();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>反射方法<blockquote>
<ul>
<li>案例实现</li>
</ul>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zhuchuli.demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"></span><br><span class="line"><span class="comment">/***</span></span><br><span class="line"><span class="comment"> *  反射</span></span><br><span class="line"><span class="comment"> *  带有无参的构造方法 + 反射方法</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 1huangzewei</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ReflectServiceImpl</span> </span>&#123;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sayHello</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">		System.err.println(<span class="string">"hello:"</span>+name);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">/***</span></span><br><span class="line"><span class="comment">	 * 通过反射获取当前对象</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ReflectServiceImpl <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		ReflectServiceImpl object=<span class="keyword">null</span>;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			<span class="comment">/**</span></span><br><span class="line"><span class="comment">			 * 给类加载器注册一个类 ReflectServiceImpl的全限定名，然后通过调用newInstance()方法初始化一个对象</span></span><br><span class="line"><span class="comment">			 */</span></span><br><span class="line">			object=(ReflectServiceImpl) Class.forName(<span class="string">"com.zhuchuli.demo.ReflectServiceImpl"</span>).getConstructor().newInstance();</span><br><span class="line">			</span><br><span class="line">		&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">			<span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> object;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> Object <span class="title">reflectMethod</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		Object returnObj=<span class="keyword">null</span>;</span><br><span class="line">		ReflectServiceImpl target=<span class="keyword">new</span> ReflectServiceImpl();</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			Method method=ReflectServiceImpl.class.getMethod(<span class="string">"sayHello"</span>, String.class);</span><br><span class="line">			method.invoke(target, <span class="string">"王五"</span>);</span><br><span class="line">		&#125; <span class="keyword">catch</span> (NoSuchMethodException e) &#123;</span><br><span class="line">			<span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">			<span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> returnObj;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		ReflectServiceImpl.getInstance().reflectMethod();</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="动态代理模式和责任链模式"><a href="#动态代理模式和责任链模式" class="headerlink" title="动态代理模式和责任链模式"></a>动态代理模式和责任链模式</h3><ul>
<li><p>动态代理的意义在于生成一个占位（又称代理对象），来代理真实对象，从而控制真实对象的访问。</p>
</li>
<li><p>代理的作用：就是在访问真实对象之前或者之后加入一些对象的逻辑，或者根据其他规则控制是否使用真实对象。</p>
</li>
<li><p>代理必须分为两个步骤：</p>
<blockquote>
<ul>
<li>代理对象和真实对象建立代理关系。</li>
<li>实现代理对象的代理逻辑方法。 </li>
</ul>
</blockquote>
</li>
<li><p>JDK的动态代理</p>
<blockquote>
<ul>
<li>JDK的动态代理是<code>java.lang.reflect.*</code>包提供的方式，它必须借助于一个接口才能产生代理对象，所以先定义接口。</li>
</ul>
</blockquote>
</li>
<li><p>CGLIB动态代理</p>
<blockquote>
<ul>
<li>它的优势在于不需要提供接口，只要一个非抽象类即能实现动态代理。</li>
</ul>
</blockquote>
</li>
<li><p>拦截器：</p>
<blockquote>
<ul>
<li>由于动态代理一般比较难理解，程序设计者会设计一个拦截器接口供开发者使用。开发者只需要知道拦截器接口的方法、含义和作用即可，不需要知道动态代理是怎么实现的。用JDK动态代理来实现一个拦截器逻辑，为此先定义拦截器接口Interceptor。</li>
</ul>
</blockquote>
</li>
<li><p>责任链模式：</p>
<blockquote>
<ul>
<li>上一点提到了设计者往往会使用拦截器去代替动态代理，然后将拦截器的接口提供给开发者，从而简化了开发者的开发难度，但是拦截器有很多个。</li>
<li>当一个对象在一条链上被多个拦截器处理时，我们把这样的设计模式成为责任链模式，它用于一个对象在多个角色中传递的场景。</li>
<li>责任链的优点在于我们可以在传递链上加入新的拦截器，增加拦截逻辑，其缺点是会增加代理和反射，而代理和反射的性能不高。</li>
</ul>
</blockquote>
</li>
</ul>
<h3 id="观察者（Observer）模式"><a href="#观察者（Observer）模式" class="headerlink" title="观察者（Observer）模式"></a>观察者（Observer）模式</h3><ul>
<li>观察者模式又称为发布订阅模式，是对象的行为模式。观察者定义了一种一对多的依赖关系，让多个对象观察者同时监听被观察者的状态，当被观察者的状态发生该改变时，会通知所有的被观察者，并让其自动更新。</li>
<li>概述：</li>
<li>实例：<blockquote>
<ul>
<li>观察者要同时存在观察者和被观察者双方，观察者可以有多个。在Java中，需要去继承<code>java.util.Observable</code>类，从而定义被观察者</li>
<li>有了被观察者对象之后，还需要去编写观察者对象。想要编写观察者对象，还需要去实现<code>java.util.Observer</code>接口的<code>update</code>方法</li>
</ul>
</blockquote>
</li>
</ul>
<h3 id="工厂模式和抽象工厂模式"><a href="#工厂模式和抽象工厂模式" class="headerlink" title="工厂模式和抽象工厂模式"></a>工厂模式和抽象工厂模式</h3><h3 id="建造者模式"><a href="#建造者模式" class="headerlink" title="建造者模式"></a>建造者模式</h3>
        
    </section>
</article>


    <article class="article" itemscope itemprop="blogPost">
    
    <header class="article-header">
        
        <h1 itemprop="name">
            <a href="/CPWS.github.io/2019/10/14/文档study/">文档study</a>
        </h1>
        
        <div class="article-meta clearfix">
            <a class="article-date" href="https://CPWS.github.io/page/2/index.html">
    
    <i class="icon-calendar"></i>
    
    <time datetime="2019-10-14T13:00:14.000Z" itemprop="datePublished">2019-10-14</time>
</a>

            
<div class="article-tag-list">
    <i class="icon-tag"></i>
    <a class="article-tag-link" href="/CPWS.github.io/tags/文档study/">文档study</a>
</div>


        </div>
    </header>
    
    <section class="article-body markdown-body">
        
        <h2 id="文档"><a href="#文档" class="headerlink" title="文档"></a>文档</h2>
        
    </section>
</article>




<nav class="page-nav">
    <a class="extend prev" rel="prev" href="/CPWS.github.io/">&laquo; Prev</a><a class="page-number" href="/CPWS.github.io/">1</a><span class="page-number current">2</span><a class="page-number" href="/CPWS.github.io/page/3/">3</a><a class="page-number" href="/CPWS.github.io/page/4/">4</a><a class="extend next" rel="next" href="/CPWS.github.io/page/3/">Next &raquo;</a>
</nav>



            </div>
        </div>
        <footer class="footer">
    Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>, Theme by <a href="https://github.com/sanonz/hexo-theme-concise" target="_blank">Concise</a>

    
    <script>
        var _hmt = _hmt || [];
        (function () {
            var hm = document.createElement("script");
            hm.src = "https://hm.baidu.com/hm.js?e4027971a230b210f4671f485b33846a";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();
    </script>
    
</footer>

    </main>

    <script type="text/javascript" src="https://cdn.bootcss.com/jquery/1.9.0/jquery.min.js"></script>
    <script type="text/javascript">
    $(function() {
        var nodes = {
            nav: $('#nav'),
            aside: $('#aside'),
            asideInner: $('#aside-inner'),
            navInner: $('#nav-inner')
        };

        var doing = false;
        nodes.asideInner.on('webkitAnimationEnd mozAnimationEnd oAnimationEnd oanimationend animationend', function() {
            if (nodes.aside.hasClass('mobile-open')) {
                nodes.aside.removeClass('mobile-open');
            } else {
                nodes.aside.removeClass('mobile-close panel-show');
            }
            doing = false;
        });
        $('#open-panel, #aside-mask').on('click', function() {
            if (doing) {
                return;
            }

            if (nodes.aside.hasClass('panel-show')) {
                nodes.aside.addClass('mobile-close');
            } else {
                nodes.aside.addClass('mobile-open panel-show');
            }
        });
        $('#open-menus').on('click', function() {
            nodes.navInner.slideToggle();
        });

        if (window.innerWidth <= 960) {
            setTimeout(function() {
                nodes.navInner.slideUp();
            }, 3000);
        }
    });
    </script>
    

</body>
</html>
