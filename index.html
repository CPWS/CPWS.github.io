<!DOCTYPE html>
<html lang="zh-CN">
<head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="UTF-8">

    

    

    <title>Prossible&#39;s Blog</title>
    <meta name="author" content="zhuli">
    <meta name="keywords" content>
    <meta name="description" content>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">

    
    <link rel="alternate" href="https://sanonz.github.io/atom.xml" title="Prossible&#39;s Blog" type="application/atom+xml">
    
    
    <link rel="icon" href="https://cpws.github.io/images/favicon.ico">
    

    <style type="text/css">
    @font-face {
        font-family: 'icomoon';
        src: url("/CPWS.github.io/fonts/icomoon.eot?q628ml");
        src: url("/CPWS.github.io/fonts/icomoon.eot?q628ml#iefix") format('embedded-opentype'),
             url("/CPWS.github.io/fonts/icomoon.ttf?q628ml") format('truetype'),
             url("/CPWS.github.io/fonts/icomoon.woff?q628ml") format('woff'),
             url("/CPWS.github.io/fonts/icomoon.svg?q628ml#icomoon") format('svg');
        font-weight: normal;
        font-style: normal;
    }
    </style>
    <link rel="stylesheet" href="/CPWS.github.io/css/style.css">

    <!--[if lt IE 9]>
    <style type="text/css">
    .nav-inner {top:0;}
    .author-meta {position:static;top:0;}
    .search-form {height:36px;}
    </style>
    <script type="text/javascript" src="https://unpkg.com/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
    <![endif]-->
</head>
<body>

    <main class="app">
        <header id="header" class="header clearfix">
    <div id="nav" class="nav">
    <div class="nav-mobile">
        <button id="open-panel" class="open-panel nav-mobile-item"><i class="icon-documents"></i></button>
        <h1 class="nav-mobile-title nav-mobile-item">Prossible&#39;s Blog</h1>
        <button id="open-menus" class="open-panel nav-mobile-item"><i class="icon-library"></i></button>
    </div>

    <nav id="nav-inner" class="nav-inner">
        
            <a class="nav-item active" href="/CPWS.github.io/">
                <span class="nav-text">首页</span>
            </a>
        
            <a class="nav-item" href="/CPWS.github.io/categories/front-end">
                <span class="nav-text">前端</span>
            </a>
        
            <a class="nav-item" href="/CPWS.github.io/categories/back-end">
                <span class="nav-text">后端</span>
            </a>
        
            <a class="nav-item" href="/CPWS.github.io/tags">
                <span class="nav-text">标签</span>
            </a>
        
            <a class="nav-item" href="/CPWS.github.io/archives">
                <span class="nav-text">归档</span>
            </a>
        
            <a class="nav-item" href="https://sanonz.github.io/atom.xml">
                <span class="nav-text">订阅</span>
            </a>
        
            <a class="nav-item" href="/CPWS.github.io/about">
                <span class="nav-text">关于</span>
            </a>
        
    </nav>
</div>

    <aside id="aside" class="aside">
    <div id="aside-mask" class="aside-mask"></div>
    <div id="aside-inner" class="aside-inner">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit"><i class="icon-search-stroke"></i></button><input type="hidden" name="sitesearch" value="https://CPWS.github.io"></form>

        
        

        
        <div class="author-meta">
            
            <div class="author-avatar">
                <a href="/CPWS.github.io/">
                    <img src="http://img.mp.itc.cn/q_mini,c_zoom,w_640/upload/20161221/c495640d0fc24a91b9c95dc0d54b6002_th.jpeg" title="ZHUCHULI">
                </a>
            </div>
            
            <div class="author-name">ZHUCHULI</div>
            <div class="author-work">Web Developer &amp; Designer</div>
            <div class="author-location">
                <i class="icon-location vm"></i>
                <span class="vm">GuangZhou, China</span>
            </div>
            
            <div class="author-thread-wrap">
                <div class="author-threads clearfix">
                    
                        <a class="thread-item" href="https://github.com/CPWS" target="_blank" rel="noopener">
                            <!-- Generated by IcoMoon.io -->
<svg viewbox="0 0 1024 1024" width="38" height="38" fill="currentColor">
<path d="M512 32.12c-265.004 0-479.88 220.23-479.88 492.090 0 217.446 137.536 401.684 328.202 466.81 23.994 4.498 32.778-10.712 32.778-23.78 0-11.782-0.428-42.632-0.642-83.764-133.466 29.778-161.744-65.984-161.744-65.984-21.852-56.772-53.344-71.982-53.344-71.982-43.49-30.636 3.214-29.992 3.214-29.992 48.202 3.428 73.482 50.772 73.482 50.772 42.846 75.196 112.258 53.558 139.68 40.918 4.284-31.706 16.71-53.558 30.42-65.77-106.474-12.426-218.516-54.63-218.516-243.152 0-53.772 18.638-97.69 49.274-131.966-4.928-12.426-21.424-62.556 4.714-130.252 0 0 40.276-13.282 131.966 50.344 38.348-10.926 79.266-16.282 120.184-16.496 40.704 0.214 81.836 5.57 120.184 16.496 91.692-63.626 131.752-50.344 131.752-50.344 26.136 67.698 9.64 117.828 4.714 130.252 30.636 34.492 49.274 78.408 49.274 131.966 0 188.952-112.258 230.514-219.16 242.724 17.138 15.21 32.564 45.202 32.564 91.048 0 65.77-0.642 118.898-0.642 134.966 0 13.068 8.57 28.492 32.992 23.566 191.094-64.912 328.418-249.152 328.418-466.382 0-271.86-214.874-492.090-479.88-492.090z"/>
</svg>

                        </a>
                    
                        <a class="thread-item" href="http://weibo.com/sanonz" target="_blank" rel="noopener">
                            <!-- Generated by IcoMoon.io -->
<svg viewbox="0 0 1024 1024" width="38" height="38" fill="currentColor">
<path d="M21.332 512c0-270.988 219.68-490.666 490.668-490.666s490.666 219.68 490.666 490.666c0 270.988-219.678 490.666-490.666 490.666s-490.666-219.678-490.666-490.666zM960 512c0-247.424-200.576-448-448-448s-448 200.576-448 448c0 247.424 200.576 448 448 448s448-200.576 448-448zM768 597.332c47.128 0 85.332-38.206 85.332-85.332s-38.206-85.332-85.332-85.332c-47.128 0-85.332 38.204-85.332 85.332s38.206 85.332 85.332 85.332zM512 597.332c47.128 0 85.332-38.206 85.332-85.332s-38.206-85.332-85.332-85.332c-47.128 0-85.332 38.204-85.332 85.332s38.204 85.332 85.332 85.332zM255.998 597.332c47.128 0 85.332-38.206 85.332-85.332s-38.204-85.332-85.332-85.332c-47.128 0-85.332 38.204-85.332 85.332s38.204 85.332 85.332 85.332z"/>
</svg>

                        </a>
                    
                        <a class="thread-item" href="https://twitter.com/sanonze" target="_blank" rel="noopener">
                            <!-- Generated by IcoMoon.io -->
<svg viewbox="0 0 1024 1024" width="38" height="38" fill="currentColor">
<path d="M512.029 31.011c-263.32 0-476.784 213.502-476.784 476.784 0 263.32 213.464 476.743 476.784 476.743s476.743-213.424 476.743-476.743c0-263.282-213.444-476.784-476.743-476.784zM752.193 411.663c0.251 5.151 0.349 10.319 0.349 15.548 0 158.786-120.856 341.85-341.85 341.85-67.844 0-131.021-19.884-184.188-53.961 9.41 1.104 18.955 1.665 28.656 1.665 56.305 0 108.115-19.208 149.221-51.425-52.567-0.987-96.925-35.741-112.22-83.468 7.32 1.433 14.85 2.149 22.595 2.149 10.959 0 21.569-1.433 31.656-4.201-54.987-11.035-96.402-59.634-96.402-117.796 0-0.524 0-1.025 0.020-1.549 16.186 9.003 34.716 14.404 54.427 15.044-32.258-21.587-53.458-58.317-53.458-100.023 0-22.015 5.925-42.673 16.264-60.408 59.266 72.683 147.807 120.527 247.676 125.521-2.053-8.77-3.118-17.968-3.118-27.378 0-66.333 53.787-120.14 120.158-120.14 34.561 0 65.771 14.599 87.69 37.93 27.378-5.363 53.091-15.393 76.305-29.16-9.003 28.074-28.036 51.618-52.858 66.47 24.338-2.903 47.495-9.37 69.024-18.917-16.070 24.144-36.459 45.306-59.945 62.248z"/>
</svg>

                        </a>
                    
                </div>
            </div>
            
        </div>
        
    </div>
</aside>

</header>

        <div id="content" class="content">
            <div id="wrapper" class="wrapper" style="max-width: 800px">
                
    <article class="article" itemscope itemprop="blogPost">
    
    <header class="article-header">
        
        <h1 itemprop="name">
            <a href="/CPWS.github.io/2019/12/28/springdata/">springdata</a>
        </h1>
        
        <div class="article-meta clearfix">
            <a class="article-date" href="https://CPWS.github.io/index.html">
    
    <i class="icon-calendar"></i>
    
    <time datetime="2019-12-28T00:47:10.000Z" itemprop="datePublished">2019-12-28</time>
</a>

            
<div class="article-tag-list">
    <i class="icon-tag"></i>
    <a class="article-tag-link" href="/CPWS.github.io/tags/springdata/">springdata</a>
</div>


        </div>
    </header>
    
    <section class="article-body markdown-body">
        
        <h2 id="SpringData内容介绍"><a href="#SpringData内容介绍" class="headerlink" title="SpringData内容介绍"></a><code>SpringData</code>内容介绍</h2><p><strong><code>Spring</code>整合<code>Hibernate</code></strong></p>
<ol>
<li>Spring整合Hibernate步骤</li>
<li>Hibernate添加、修改、删除操作</li>
<li>Hibernate-HQL查询</li>
<li>Hibernate-SQL查询</li>
<li>Hibernate-QBC查询</li>
</ol>
<p><strong><code>Spring</code>整合<code>Hibernate</code>基于<code>JPA</code>规范</strong></p>
<ol>
<li>Spring整合Hibernate JPA规范</li>
<li>Hibernate JPA中的CRUD操作</li>
<li>Hibernate JPA中的HQL查询</li>
<li>Hibernate JPA中的SQL查询</li>
<li>Hibernate JPA中的QBC查询</li>
</ol>
<p><strong><code>Spring Data JPA</code></strong></p>
<ol>
<li><p>Spring Data JPA 初级</p>
<ol>
<li>Spring Data JPA介绍</li>
<li>Spring Data整合JPA</li>
<li>Spring Data JPA核心与继承结构</li>
<li>Spring Data JPA源码分析</li>
</ol>
</li>
<li><p>Spring Data JPA接口详解</p>
<ol>
<li>Repository接口-方法命名规则查询</li>
<li>Repository接口-@Query注解查询</li>
<li>Repository接口-@Query注解跟新操作</li>
<li>CrudRepository接口讲解</li>
<li>PagingAndSortingRepository接口讲解</li>
<li>JpaRepository接口讲解</li>
<li>JpaspecificationExecutor接口讲解</li>
<li>自定义Repository接口</li>
</ol>
</li>
<li><p>Spring Data JPA关联关系查询</p>
<ol>
<li>Spring Data JPA一对一关联关系查询</li>
<li>Spring Data JPA一对多关联关系查询</li>
<li>Spring Data JPA多对多关联关系查询</li>
</ol>
</li>
</ol>
<p><strong><code>Spring Data Redis</code></strong></p>
<ol>
<li>Redis安装</li>
<li>Spring Data Redis整合Redis</li>
<li>Spring Data Redis序列化器使用</li>
</ol>
<p>课程中使用到的工具</p>
<ol>
<li>JDK1.7.0_72 </li>
<li>Eclipse Mars</li>
<li>Hibernate:5.0.7Final</li>
<li>Spring 4.2.0RELEASE</li>
<li>Spring Data JPA：1.9.0RELEASE</li>
<li>Spring Data Redis：1.6.0RELEASE</li>
</ol>
<p>课程技术要求</p>
<ul>
<li>需要对<code>Spring</code>、<code>Hibernate</code>、<code>Redis</code>技术有一定的了解</li>
</ul>
<h2 id="课程技术介绍"><a href="#课程技术介绍" class="headerlink" title="课程技术介绍"></a>课程技术介绍</h2><p><strong>Hibernate</strong></p>
<ul>
<li>Hibernate是一个开放源代码的对象关系映射框架，它对JDBC进行了非常轻量级的对象封装，它将POJO与数据库表建立映射关系，是一个全自动的orm框架，hibernate可以自动生成SQL语句，自动执行，使得Java程序员可以随心所欲的使用对象编程思维来操纵数据库。 Hibernate可以应用在任何使用JDBC的场合，既可以在Java的客户端程序使用，也可以在Servlet/JSP的Web应用中使用，最具革命意义的是，Hibernate可以在应用EJB的JaveEE架构中取代CMP，完成数据持久化的重任。</li>
</ul>
<p><strong>JPA标准</strong></p>
<ul>
<li>JPA是Java Persistence API的简称，中文名Java持久层API，是JDK 5.0注解或XML描述对象－关系表的映射关系，并将运行期的实体对象持久化到数据库中。 [1] </li>
<li>Sun引入新的JPA ORM规范出于两个原因：其一，简化现有Java EE和Java SE应用开发工作；其二，Sun希望整合ORM技术，实现天下归一。</li>
</ul>
<p><strong>Hibernate JPA</strong></p>
<ul>
<li>Hibernate在3.2以后根据JPA规范提供了一套操作持久层的API</li>
</ul>
<p><strong>Spring Data</strong></p>
<ul>
<li>Spring Data’s mission is to provide a familiar and consistent, Spring-based programming model for data access while still retaining the special traits of the underlying data store.</li>
</ul>
<p><strong>Spring Data JPA</strong></p>
<ul>
<li>Spring Data JPA, part of the larger Spring Data family, makes it easy to easily implement JPA based repositories. This module deals with enhanced support for JPA based data access layers. It makes it easier to build Spring-powered applications that use data access technologies.</li>
<li>Spring Data JPA底层默认使用Hibernate来做JPA实现。</li>
</ul>
<p><strong>Spring Data Redis</strong></p>
<ul>
<li>Spring Data Redis, part of the larger Spring Data family, provides easy configuration and access to Redis from Spring applications. It offers both low-level and high-level abstractions for interacting with the store, freeing the user from infrastructural concerns.</li>
</ul>
<h2 id="SpringData第一章-Spring整合Hibernate"><a href="#SpringData第一章-Spring整合Hibernate" class="headerlink" title="SpringData第一章 Spring整合Hibernate"></a>SpringData第一章 Spring整合Hibernate</h2><p><strong>创建项目</strong></p>
<ol>
<li><p>导入jar包</p>
<ul>
<li>Hibernate</li>
<li>Hibernate C3P0</li>
<li>spring-ioc、spring-aop、spring-jdbc、spring-orm、spring-test</li>
<li>commons-logging-1.1.1</li>
<li>mysql驱动包</li>
<li>单元测试：junit4</li>
</ul>
</li>
</ol>
<p><img src="https://i.loli.net/2019/12/28/uvY6kPX5Wh3risV.png" alt="1577500768_1_.png"></p>
<ol start="2">
<li>创建Spring的配置文件<strong>applicationContext.xml</strong>,存放在src目录下</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">		<span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">		<span class="attr">xmlns:aop</span>=<span class="string">"http://www.springframework.org/schema/aop"</span></span></span><br><span class="line"><span class="tag">		<span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag">		 <span class="attr">xmlns:tx</span>=<span class="string">"http://www.springframework.org/schema/tx"</span></span></span><br><span class="line"><span class="tag">		<span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">		http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">		http://www.springframework.org/schema/aop</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/aop/spring-aop.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/tx</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/tx/spring-tx.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/context/spring-context.xsd"</span>&gt;</span></span><br><span class="line">     </span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong><code>Spring</code> 整合 <code>Hibernate</code> 配置文件：applicationContext.xml</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">		<span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">		<span class="attr">xmlns:aop</span>=<span class="string">"http://www.springframework.org/schema/aop"</span></span></span><br><span class="line"><span class="tag">		<span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag">		 <span class="attr">xmlns:tx</span>=<span class="string">"http://www.springframework.org/schema/tx"</span></span></span><br><span class="line"><span class="tag">		<span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">		http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">		http://www.springframework.org/schema/aop</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/aop/spring-aop.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/tx</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/tx/spring-tx.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/context/spring-context.xsd"</span>&gt;</span></span><br><span class="line">     	</span><br><span class="line">     	<span class="comment">&lt;!-- 配置读取properties文件的工具类 --&gt;</span></span><br><span class="line">     	<span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">"classpath:jdbc.properties"</span>/&gt;</span></span><br><span class="line">     	<span class="comment">&lt;!-- 配置C3P0数据库连接池 --&gt;</span></span><br><span class="line">     	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"dataSource"</span> <span class="attr">class</span>=<span class="string">"com.mchange.v2.c3p0.ComboPooledDataSource"</span>&gt;</span></span><br><span class="line">     		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"jdbcUrl"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.url&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">     		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driverClass"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.driver&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">     		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"user"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.username&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">     		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.password&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">     	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">     	<span class="comment">&lt;!-- 配置Hibernate的SessionFactory --&gt;</span></span><br><span class="line">     	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"sessionFactory"</span> <span class="attr">class</span>=<span class="string">"org.springframework.orm.hibernate5.LocalSessionFactoryBean"</span>&gt;</span></span><br><span class="line">     		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">     		<span class="comment">&lt;!-- Hibernate Properties属性：配置与Hibernate相关的内容，如显示sql语句，开启正向工程 --&gt;</span></span><br><span class="line">     		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hibernateProperties"</span>&gt;</span></span><br><span class="line">     			<span class="tag">&lt;<span class="name">props</span>&gt;</span></span><br><span class="line">     				<span class="comment">&lt;!-- 显示当前执行的sql语句 --&gt;</span></span><br><span class="line">     				<span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">"hibernate.show_sql"</span>&gt;</span>true<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">     				<span class="comment">&lt;!-- 开启正向工程 --&gt;</span></span><br><span class="line">     				<span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">"hibernate.hbm2ddl.auto"</span>&gt;</span>update<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">                     <span class="comment">&lt;!-- mysql数据库方言 --&gt;</span></span><br><span class="line">     				<span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">"hibernate.dialect"</span>&gt;</span>org.hibernate.dialect.MySQL5InnoDBDialect<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">     				<span class="comment">&lt;!-- 指定采用的是数据库连接池 --&gt;</span></span><br><span class="line">     				<span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">"hibernate.temp.use_jdbc_metadata_defaults"</span>&gt;</span>false<span class="tag">&lt;/<span class="name">prop</span>&gt;</span>  </span><br><span class="line">     			<span class="tag">&lt;/<span class="name">props</span>&gt;</span></span><br><span class="line">     		<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">     		<span class="comment">&lt;!-- 扫描实体所在的包 --&gt;</span></span><br><span class="line">     		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"packagesToScan"</span>&gt;</span></span><br><span class="line">     			<span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">     				<span class="tag">&lt;<span class="name">value</span>&gt;</span>com.gdaib.pojo<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">     			<span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">     		<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">     	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">     	<span class="comment">&lt;!-- 配置Hibernate的事务管理器 --&gt;</span></span><br><span class="line">     	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"transactionManager"</span> <span class="attr">class</span>=<span class="string">"org.springframework.orm.hibernate5.HibernateTransactionManager"</span>&gt;</span></span><br><span class="line">     		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"sessionFactory"</span> <span class="attr">ref</span>=<span class="string">"sessionFactory"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">     	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">     	<span class="comment">&lt;!-- 配置开启注解事务处理 --&gt;</span></span><br><span class="line">     	<span class="tag">&lt;<span class="name">tx:annotation-driven</span>  <span class="attr">transaction-manager</span>=<span class="string">"transactionManager"</span>/&gt;</span></span><br><span class="line">     	<span class="comment">&lt;!-- 配置Spring IOC的注解扫描--&gt;</span></span><br><span class="line">     	<span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.gdaib"</span>&gt;</span><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>Hibernate完成CRUD操作</strong></p>
<ol>
<li>mysql下创建test数据库</li>
<li>在com.gdaib.pojo包下创建一个实体类：Users.java</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.gdaib.pojo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.persistence.Column;</span><br><span class="line"><span class="keyword">import</span> javax.persistence.Entity;</span><br><span class="line"><span class="keyword">import</span> javax.persistence.GeneratedValue;</span><br><span class="line"><span class="keyword">import</span> javax.persistence.GenerationType;</span><br><span class="line"><span class="keyword">import</span> javax.persistence.Id;</span><br><span class="line"><span class="keyword">import</span> javax.persistence.Table;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@Table</span>(name = <span class="string">"t_users"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Users</span> <span class="keyword">implements</span> <span class="title">Serializable</span></span>&#123;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//GenerationType.IDENTITY：id自增长</span></span><br><span class="line">	<span class="meta">@Id</span></span><br><span class="line">	<span class="meta">@GeneratedValue</span>(strategy = GenerationType.IDENTITY)</span><br><span class="line">	<span class="meta">@Column</span>(name=<span class="string">"userid"</span>)</span><br><span class="line">	<span class="keyword">private</span> Integer userid;</span><br><span class="line">	<span class="meta">@Column</span>(name=<span class="string">"username"</span>)</span><br><span class="line">	<span class="keyword">private</span> String username;</span><br><span class="line">	<span class="meta">@Column</span>(name=<span class="string">"userage"</span>)</span><br><span class="line">	<span class="keyword">private</span> Integer userage;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> Integer <span class="title">getUserid</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> userid;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUserid</span><span class="params">(Integer userid)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.userid = userid;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getUsername</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> username;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUsername</span><span class="params">(String username)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.username = username;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> Integer <span class="title">getUserage</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> userage;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUserage</span><span class="params">(Integer userage)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.userage = userage;</span><br><span class="line">	&#125;	</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li><p>编写UsersDao接口和实现类</p>
<ul>
<li>修改配置文件，添加HibernateTemplate的配置</li>
</ul>
</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 配置HibernateTemplate对象 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"hibernateTemplate"</span> <span class="attr">class</span>=<span class="string">"org.springframework.orm.hibernate5.HibernateTemplate"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"sessionFactory"</span> <span class="attr">ref</span>=<span class="string">"sessionFactory"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>接口实现类</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.gdaib.dao.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.orm.hibernate5.HibernateTemplate;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Repository;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.gdaib.dao.UsersDao;</span><br><span class="line"><span class="keyword">import</span> com.gdaib.pojo.Users;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UsersDaoImpl</span> <span class="keyword">implements</span> <span class="title">UsersDao</span></span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Autowired</span></span><br><span class="line">	<span class="keyword">private</span> HibernateTemplate hibernateTemplate;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">insertUsers</span><span class="params">(Users users)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">this</span>.hibernateTemplate.save(users);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updateUsers</span><span class="params">(Users users)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">this</span>.hibernateTemplate.update(users);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteUsers</span><span class="params">(Users users)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">this</span>.hibernateTemplate.delete(users);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> Users <span class="title">selectUsersById</span><span class="params">(Integer userid)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">this</span>.hibernateTemplate.get(Users.class, userid);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>编写测试代码</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.gdaib.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> org.junit.runner.RunWith;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.annotation.Rollback;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.context.ContextConfiguration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.context.junit4.SpringJUnit4ClassRunner;</span><br><span class="line"><span class="keyword">import</span> org.springframework.transaction.annotation.Transactional;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.gdaib.dao.UsersDao;</span><br><span class="line"><span class="keyword">import</span> com.gdaib.pojo.Users;</span><br><span class="line"></span><br><span class="line"><span class="comment">//spring整合junit</span></span><br><span class="line"><span class="meta">@RunWith</span>(SpringJUnit4ClassRunner.class)</span><br><span class="line"><span class="meta">@ContextConfiguration</span>(<span class="string">"classpath:applicationContext.xml"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UsersDaoImplTest</span> </span>&#123;</span><br><span class="line">	</span><br><span class="line">	<span class="meta">@Autowired</span></span><br><span class="line">	<span class="keyword">private</span> UsersDao usersDao;</span><br><span class="line">	<span class="comment">/***</span></span><br><span class="line"><span class="comment">	 * 测试添加用户</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@Test</span></span><br><span class="line">	<span class="meta">@Transactional</span> <span class="comment">//在测试类，对于事务提交默认的是回滚，在业务逻辑类中不会，此时应该再加一个注解</span></span><br><span class="line">	<span class="meta">@Rollback</span>(<span class="keyword">false</span>)</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">textInsertUsers</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		Users users=<span class="keyword">new</span> Users();</span><br><span class="line">		users.setUserage(<span class="number">20</span>);</span><br><span class="line">		users.setUsernames(<span class="string">"李四"</span>);</span><br><span class="line">		<span class="keyword">this</span>.usersDao.insertUsers(users);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/***</span></span><br><span class="line"><span class="comment">	 * 跟新用户</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@Test</span></span><br><span class="line">	<span class="meta">@Transactional</span></span><br><span class="line">	<span class="meta">@Rollback</span>(<span class="keyword">false</span>)</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testUpdateUsers</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		Users users=<span class="keyword">new</span> Users();</span><br><span class="line">		users.setUserid(<span class="number">1</span>);</span><br><span class="line">		users.setUserage(<span class="number">22</span>);</span><br><span class="line">		users.setUsernames(<span class="string">"王五"</span>);</span><br><span class="line">		<span class="keyword">this</span>.usersDao.updateUsers(users);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">/***</span></span><br><span class="line"><span class="comment">	 * 根据userid查询用户</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@Test</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testSelectUsersById</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		Users users = <span class="keyword">this</span>.usersDao.selectUsersById(<span class="number">1</span>);</span><br><span class="line">		System.out.println(users);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 删除用户</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@Test</span></span><br><span class="line">	<span class="meta">@Transactional</span></span><br><span class="line">	<span class="meta">@Rollback</span>(<span class="keyword">false</span>)</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testDelete</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		Users users=<span class="keyword">new</span> Users();</span><br><span class="line">		users.setUserid(<span class="number">1</span>);</span><br><span class="line">		<span class="keyword">this</span>.usersDao.deleteUsers(users);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>HQL查询</strong></p>
<p>HQL：<code>Hibernate Query Language</code></p>
<p>HQL的语法：就是将原来的sql语句中表和字段换成对象与属性的名称就可以了。</p>
<p>业务代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> List&lt;Users&gt; <span class="title">selectUserByName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//getCurrentSession：当前session必须要有事务边界，且只能处理唯一的一个事务。当事务提交或者回滚后session自动失效</span></span><br><span class="line">    <span class="comment">//openSession：每次都会打开一个新的session。假如每次使用多次，则获得不同的session对象。使用完毕后我们需要手动clase方法关闭session</span></span><br><span class="line">    Session session=<span class="keyword">this</span>.hibernateTemplate.getSessionFactory().getCurrentSession();</span><br><span class="line">    Query query = session.createQuery(<span class="string">"from Users where usernames=:abc"</span>);</span><br><span class="line">    Query queryTemp = query.setString(<span class="string">"abc"</span>,name);</span><br><span class="line">    <span class="keyword">return</span> queryTemp.list();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>测试代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/***</span></span><br><span class="line"><span class="comment">* HQL测试</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="meta">@Transactional</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testSelectUsersByName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    List&lt;Users&gt; list = <span class="keyword">this</span>.usersDao.selectUserByName(<span class="string">"李四"</span>);</span><br><span class="line">    <span class="keyword">for</span> (Users users : list) &#123;</span><br><span class="line">        System.out.println(users);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>SQL查询</strong></p>
<p>业务代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> List&lt;Users&gt; <span class="title">selectUserByNameUseSQL</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">    Session session=<span class="keyword">this</span>.hibernateTemplate.getSessionFactory().getCurrentSession();</span><br><span class="line">    Query query=session.createSQLQuery(<span class="string">"select * from t_user where usernames=?"</span>)</span><br><span class="line">                        .addEntity(Users.class)</span><br><span class="line">                        .setString(<span class="number">0</span>, name);</span><br><span class="line">    <span class="keyword">return</span> query.list();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>测试代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/***</span></span><br><span class="line"><span class="comment">* SQL测试</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="meta">@Transactional</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testSelectUsersByNameUseSQL</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    List&lt;Users&gt; list = <span class="keyword">this</span>.usersDao.selectUserByNameUseSQL(<span class="string">"李四"</span>);</span><br><span class="line">    <span class="keyword">for</span> (Users users : list) &#123;</span><br><span class="line">        System.out.println(users);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>QBC查询</strong></p>
<p>QBC：Query By Criteria</p>
<p>业务代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> List&lt;Users&gt; <span class="title">selectUserByNameUseCriteria</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">    Session session=<span class="keyword">this</span>.hibernateTemplate.getSessionFactory().getCurrentSession();</span><br><span class="line">    <span class="comment">//select * from t_user where username = ?</span></span><br><span class="line">    <span class="comment">//session.createCriteria(Users.class)相当于select * from t_users</span></span><br><span class="line">    Criteria c = session.createCriteria(Users.class);</span><br><span class="line">    c.add(Restrictions.eq(<span class="string">"usernames"</span>,name));</span><br><span class="line">    <span class="keyword">return</span> c.list();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>测试代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/***</span></span><br><span class="line"><span class="comment">* QBC测试</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="meta">@Transactional</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testSelectUsersByNameUseCriteria</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    List&lt;Users&gt; list = <span class="keyword">this</span>.usersDao.selectUserByNameUseCriteria(<span class="string">"李四"</span>);</span><br><span class="line">    <span class="keyword">for</span> (Users users : list) &#123;</span><br><span class="line">        System.out.println(users);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="SpringData第二章-Spring整合Hibernate-JPA"><a href="#SpringData第二章-Spring整合Hibernate-JPA" class="headerlink" title="SpringData第二章 Spring整合Hibernate JPA"></a>SpringData第二章 Spring整合Hibernate JPA</h2><p>JPA：由sun公司提供了一对对持久层操作的标准（接口+文档）<br>Hibernate: 是Gravin King开发的一套持久层操作全自动的ORM框架<br>Hibernate JPA：是在Hibernate3.2版本中提供了对于JPA标准的实现。提供了一套按照JPA标准来实现持久层开发的API.</p>
<p><strong>Spring整合Hibernate JPA</strong></p>
<ol>
<li><p>创建项目</p>
</li>
<li><p>导入jar包</p>
<ul>
<li>Hibernate</li>
<li>Hibernate C3P0</li>
<li>spring-ioc、spring-aop、spring-jdbc、spring-orm、spring-test</li>
<li>commons-logging-1.1.1</li>
<li>mysql驱动包</li>
<li>单元测试：junit4</li>
<li>Hibernate JPA相关的jar包</li>
</ul>
</li>
</ol>
<p><img src="https://i.loli.net/2019/12/28/uvY6kPX5Wh3risV.png" alt="1577500768_1_.png"><br><img src="https://i.loli.net/2019/12/28/7vAEgPrCejct3QG.png" alt="1577523613_1_.png"></p>
<ol start="3">
<li>Spring整合hibernate jpa配置文件，applicationContext.xml</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">		<span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">		<span class="attr">xmlns:aop</span>=<span class="string">"http://www.springframework.org/schema/aop"</span></span></span><br><span class="line"><span class="tag">		<span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag">		 <span class="attr">xmlns:tx</span>=<span class="string">"http://www.springframework.org/schema/tx"</span></span></span><br><span class="line"><span class="tag">		<span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">		http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">		http://www.springframework.org/schema/aop</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/aop/spring-aop.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/tx</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/tx/spring-tx.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/context/spring-context.xsd"</span>&gt;</span></span><br><span class="line">     	</span><br><span class="line">     	<span class="comment">&lt;!-- 配置读取properties文件的工具类 --&gt;</span></span><br><span class="line">     	<span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">"classpath:jdbc.properties"</span>/&gt;</span></span><br><span class="line">     	<span class="comment">&lt;!-- 配置C3P0数据库连接池 --&gt;</span></span><br><span class="line">     	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"dataSource"</span> <span class="attr">class</span>=<span class="string">"com.mchange.v2.c3p0.ComboPooledDataSource"</span>&gt;</span></span><br><span class="line">     		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"jdbcUrl"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.url&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">     		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driverClass"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.driver&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">     		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"user"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.username&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">     		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.password&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">     	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">     	<span class="comment">&lt;!-- Spring整合Hibernate JPA 配置EntityManagerFactory --&gt;</span></span><br><span class="line">     	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"entityManagerFactory"</span> <span class="attr">class</span>=<span class="string">"org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean"</span>&gt;</span></span><br><span class="line">     		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">     		<span class="comment">&lt;!-- 决定使用哪个JPA标准 --&gt;</span></span><br><span class="line">     		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"jpaVedorAdapter"</span> &gt;</span></span><br><span class="line">     			<span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter"</span>&gt;</span></span><br><span class="line">     				<span class="comment">&lt;!-- hibernate相关属性的注入 --&gt;</span></span><br><span class="line">     				<span class="comment">&lt;!-- 配置数据库类型 --&gt;</span></span><br><span class="line">     				<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"database"</span> <span class="attr">value</span>=<span class="string">"MYSQL"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">     				<span class="comment">&lt;!-- 正向工程 自动创建表 --&gt;</span></span><br><span class="line">     				<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"generateDbl"</span> <span class="attr">value</span>=<span class="string">"true"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">     				<span class="comment">&lt;!-- 显示执行的SQL --&gt;</span></span><br><span class="line">     				<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"showSql"</span> <span class="attr">value</span>=<span class="string">"true"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">     			<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">     		<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">     		<span class="comment">&lt;!-- 扫描实体包 --&gt;</span></span><br><span class="line">     		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"packagesToScan"</span>&gt;</span></span><br><span class="line">     			<span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">     				<span class="tag">&lt;<span class="name">value</span>&gt;</span>com.gdaib.pojo<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">     			<span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">     		<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">     	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">     	</span><br><span class="line">     	</span><br><span class="line">     	<span class="comment">&lt;!-- 配置Hibernate的事务管理器 --&gt;</span></span><br><span class="line">     	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"transactionManager"</span> <span class="attr">class</span>=<span class="string">"org.springframework.orm.jpa.JpaTransactionManager"</span>&gt;</span></span><br><span class="line">     		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"entityManagerFactory"</span> <span class="attr">ref</span>=<span class="string">"entityManagerFactory"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">     	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">     	<span class="comment">&lt;!-- 配置开启注解事务处理 --&gt;</span></span><br><span class="line">     	<span class="tag">&lt;<span class="name">tx:annotation-driven</span>  <span class="attr">transaction-manager</span>=<span class="string">"transactionManager"</span>/&gt;</span></span><br><span class="line">     	<span class="comment">&lt;!-- 配置Spring IOC的注解扫描--&gt;</span></span><br><span class="line">     	<span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.gdaib"</span>&gt;</span><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>hibernate-jpa实现CRUD操作</strong></p>
<p>接口实现类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.gdaib.dao.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.persistence.EntityManager;</span><br><span class="line"><span class="keyword">import</span> javax.persistence.PersistenceContext;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Repository;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.gdaib.dao.UsersDao;</span><br><span class="line"><span class="keyword">import</span> com.gdaib.pojo.Users;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UsersDaoImpl</span> <span class="keyword">implements</span> <span class="title">UsersDao</span></span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//@PersistenceContext(name="entityManagerFactory")：从工厂中取出一个对象，赋值给EntityManager</span></span><br><span class="line">	<span class="meta">@PersistenceContext</span>(name=<span class="string">"entityManagerFactory"</span>)</span><br><span class="line">	<span class="keyword">private</span> EntityManager entityManager;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">insertUsers</span><span class="params">(Users users)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">this</span>.entityManager.persist(users);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updateUsers</span><span class="params">(Users users)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.entityManager.merge(users);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteUsers</span><span class="params">(Users users)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		Users u = <span class="keyword">this</span>.selectUsersById(users.getUserid());</span><br><span class="line">		<span class="keyword">this</span>.entityManager.remove(u);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> Users <span class="title">selectUsersById</span><span class="params">(Integer userid)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">this</span>.entityManager.find(Users.class, userid);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>测试代码与之前雷同</p>
<p><strong>hibernate-jpa中的HQL语句</strong></p>
<p>Hibernate JPA中的HQL语句</p>
<p>接口实现类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> List&lt;Users&gt; <span class="title">selectUserByName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.entityManager.createQuery(<span class="string">"from Users where usernames =:abc"</span>)</span><br><span class="line">        .setParameter(<span class="string">"abc"</span>,name)</span><br><span class="line">        .getResultList(); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>测试代码与上面雷同</li>
</ul>
<p><strong>hibernate-jpa中的SQL语句</strong></p>
<p>Hibernate JPA中的SQL语句</p>
<p>接口实现类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> List&lt;Users&gt; <span class="title">selectUserByNameUseSQL</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">    <span class="comment">//在hibernate jpa中如果通过?方法来绑定参数，那么它的查数是从1开始，而hibernate是从0开始</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.entityManager.createNativeQuery(<span class="string">"select * from t_users where usernames = ? "</span>, Users.class)</span><br><span class="line">            .setParameter(<span class="number">1</span>, name)</span><br><span class="line">            .getResultList();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>测试代码与上面雷同</li>
</ul>
<p><strong>hibernate-jpa中的Criteria语句</strong></p>
<p>Hibernate JPA中的QBC语句</p>
<ul>
<li>接口实现类</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> List&lt;Users&gt; <span class="title">selectUserByNameUseCriteria</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">    <span class="comment">//CriteriaBuilder对象：创建一个CriteriaQuery，创建查询条件</span></span><br><span class="line">    CriteriaBuilder builder=<span class="keyword">this</span>.entityManager.getCriteriaBuilder();</span><br><span class="line">    <span class="comment">//CriteriaQuery对象：执行查询的criteria对象</span></span><br><span class="line">    <span class="comment">//下面代码相当于select * from t_users</span></span><br><span class="line">    CriteriaQuery&lt;Users&gt; query = builder.createQuery(Users.class);</span><br><span class="line">    <span class="comment">//获取要查询的实体类对象</span></span><br><span class="line">    Root&lt;Users&gt; root=query.from(Users.class);</span><br><span class="line">    <span class="comment">//封装查询条件</span></span><br><span class="line">    Predicate cate = builder.equal(root.get(<span class="string">"usernames"</span>), name);</span><br><span class="line">    query.where(cate);<span class="comment">//加查询条件 where usernames=name;</span></span><br><span class="line">    <span class="comment">//执行查询</span></span><br><span class="line">    TypedQuery&lt;Users&gt; typeQuery=<span class="keyword">this</span>.entityManager.createQuery(query);</span><br><span class="line">    <span class="keyword">return</span> typeQuery.getResultList();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="SpringData-第三章-Spring-Data-JPA（重点）"><a href="#SpringData-第三章-Spring-Data-JPA（重点）" class="headerlink" title="SpringData 第三章 Spring Data JPA（重点）"></a>SpringData 第三章 Spring Data JPA（重点）</h2><p>Spring Data JPA：Spring Data JPA是Spring Data项目下的一个模块。提供了一套基于JPA标准操作数据库的简化方案。底层默认的是依赖Hibernate JPA来实现的。</p>
<p>Spring Data JPA的技术特点： 我们只需要定义接口并继承Spring Data JPA中所提供的的接口就可以了，不需要编写接口实现类。</p>
<p><strong>创建Spring Data JPA项目</strong></p>
<ol>
<li><p>创建项目</p>
</li>
<li><p>导入jar包</p>
<ul>
<li>Hibernate</li>
<li>Hibernate C3P0</li>
<li>spring-ioc、spring-aop、spring-jdbc、spring-orm、spring-test</li>
<li>commons-logging-1.1.1</li>
<li>mysql驱动包</li>
<li>单元测试：junit4</li>
<li>Hibernate JPA相关的jar包</li>
<li>spring-data-jpa两个jar包</li>
<li>slf4j三个jar包</li>
</ul>
</li>
</ol>
<p><img src="https://i.loli.net/2019/12/28/uvY6kPX5Wh3risV.png" alt="1577500768_1_.png"><br><img src="https://i.loli.net/2019/12/28/7vAEgPrCejct3QG.png" alt="1577523613_1_.png"><br><img src="https://i.loli.net/2019/12/28/xo5apukLfyw6iQ9.png" alt="1577537711_1_.png"></p>
<ol start="3">
<li>修改配置文件 applicationContext.xml</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">		<span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">		<span class="attr">xmlns:aop</span>=<span class="string">"http://www.springframework.org/schema/aop"</span></span></span><br><span class="line"><span class="tag">		<span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag">		<span class="attr">xmlns:tx</span>=<span class="string">"http://www.springframework.org/schema/tx"</span></span></span><br><span class="line"><span class="tag">		<span class="attr">xmlns:jpa</span>=<span class="string">"http://www.springframework.org/schema/data/jpa"</span></span></span><br><span class="line"><span class="tag">		<span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">		http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">		http://www.springframework.org/schema/aop</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/aop/spring-aop.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/tx</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/tx/spring-tx.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/data/jpa </span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/data/jpa/spring-jpa.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/context/spring-context.xsd"</span>&gt;</span></span><br><span class="line">     	</span><br><span class="line">     	<span class="comment">&lt;!-- 配置读取properties文件的工具类 --&gt;</span></span><br><span class="line">     	<span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">"classpath:jdbc.properties"</span>/&gt;</span></span><br><span class="line">     	<span class="comment">&lt;!-- 配置C3P0数据库连接池 --&gt;</span></span><br><span class="line">     	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"dataSource"</span> <span class="attr">class</span>=<span class="string">"com.mchange.v2.c3p0.ComboPooledDataSource"</span>&gt;</span></span><br><span class="line">     		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"jdbcUrl"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.url&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">     		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driverClass"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.driver&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">     		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"user"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.username&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">     		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.password&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">     	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">     	<span class="comment">&lt;!-- Spring整合Hibernate JPA 配置EntityManagerFactory --&gt;</span></span><br><span class="line">     	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"entityManagerFactory"</span> <span class="attr">class</span>=<span class="string">"org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean"</span>&gt;</span></span><br><span class="line">     		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">     		<span class="comment">&lt;!-- 决定使用哪个JPA标准 --&gt;</span></span><br><span class="line">     		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"jpaVendorAdapter"</span> &gt;</span></span><br><span class="line">     			<span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter"</span>&gt;</span></span><br><span class="line">     				<span class="comment">&lt;!-- hibernate相关属性的注入 --&gt;</span></span><br><span class="line">     				</span><br><span class="line">     				<span class="comment">&lt;!-- 配置数据库类型 --&gt;</span></span><br><span class="line">     				<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"database"</span> <span class="attr">value</span>=<span class="string">"MYSQL"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">     				<span class="comment">&lt;!-- 正向工程 自动创建表 --&gt;</span></span><br><span class="line">     				<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"generateDdl"</span> <span class="attr">value</span>=<span class="string">"true"</span> /&gt;</span></span><br><span class="line">     				<span class="comment">&lt;!-- 显示执行的SQL --&gt;</span></span><br><span class="line">     				<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"showSql"</span> <span class="attr">value</span>=<span class="string">"true"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">     			<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">     		<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">     		<span class="comment">&lt;!-- 扫描实体包 --&gt;</span></span><br><span class="line">     		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"packagesToScan"</span>&gt;</span></span><br><span class="line">     			<span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">     				<span class="tag">&lt;<span class="name">value</span>&gt;</span>com.gdaib.pojo<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">     			<span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">     		<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">     	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">     	</span><br><span class="line">     	<span class="comment">&lt;!-- 配置Hibernate的事务管理器 --&gt;</span></span><br><span class="line">     	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"transactionManager"</span> <span class="attr">class</span>=<span class="string">"org.springframework.orm.jpa.JpaTransactionManager"</span>&gt;</span></span><br><span class="line">     		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"entityManagerFactory"</span> <span class="attr">ref</span>=<span class="string">"entityManagerFactory"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">     	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">     	<span class="comment">&lt;!-- 配置开启注解事务处理 --&gt;</span></span><br><span class="line">     	<span class="tag">&lt;<span class="name">tx:annotation-driven</span>  <span class="attr">transaction-manager</span>=<span class="string">"transactionManager"</span>/&gt;</span></span><br><span class="line">     	<span class="comment">&lt;!-- 配置Spring IOC的注解扫描--&gt;</span></span><br><span class="line">     	<span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.gdaib"</span>&gt;</span><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line">     	<span class="comment">&lt;!-- Spring Data JPA的配置 --&gt;</span></span><br><span class="line">     	<span class="comment">&lt;!-- base-package：扫描dao接口所在的包 --&gt;</span></span><br><span class="line">     	<span class="tag">&lt;<span class="name">jpa:repositories</span> <span class="attr">base-package</span>=<span class="string">"com.gdaib.dao"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="4">
<li>编写DAO接口</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.gdaib.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.data.jpa.repository.JpaRepository;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.gdaib.pojo.Users;</span><br><span class="line"><span class="comment">//第一个参数要操作的实体类型，第二个参数为主键的数据类型</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UsersDao</span> <span class="keyword">extends</span> <span class="title">JpaRepository</span>&lt;<span class="title">Users</span>, <span class="title">Integer</span>&gt;</span>&#123;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="5">
<li>编写测试类</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> UsersDao usersDao;</span><br><span class="line"><span class="comment">/***</span></span><br><span class="line"><span class="comment">	* 测试添加用户</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="meta">@Transactional</span> <span class="comment">//在测试类，对于事务提交默认的是回滚，在业务逻辑类中不会，此时应该再加一个注解</span></span><br><span class="line"><span class="meta">@Rollback</span>(<span class="keyword">false</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">textInsertUsers</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	Users users=<span class="keyword">new</span> Users();</span><br><span class="line">	users.setUserage(<span class="number">29</span>);</span><br><span class="line">	users.setUsernames(<span class="string">"possible"</span>);</span><br><span class="line">	<span class="keyword">this</span>.usersDao.save(users);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Spring Data JPA的接口继承结构</strong></p>
<p><img src="https://i.loli.net/2019/12/29/49coWOSUs8DlbyM.png" alt="1577609676_1_.png"></p>
<p><strong>Spring Data JPA的运行原理</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> EntityManager entityManager;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="comment">//org.springframework.data.jpa.repository.support.SimpleJpaRepository@320494b6</span></span><br><span class="line">	<span class="comment">//System.out.println(this.usersDao);</span></span><br><span class="line">	<span class="comment">//class com.sun.proxy.$Proxy30(代理对象) 是基于jdk动态代理实现的</span></span><br><span class="line">	<span class="comment">//System.out.println(this.usersDao.getClass());</span></span><br><span class="line">	JpaRepositoryFactory factory=<span class="keyword">new</span> JpaRepositoryFactory(entityManager);</span><br><span class="line">	<span class="comment">//factory.getRepository(UsersDao.class)可以帮助我们为接口生成实现类，而这个实现类是SimpleJpaRepository的代理对象</span></span><br><span class="line">	<span class="comment">//要求：该接口必须要继承Repository接口</span></span><br><span class="line">	UsersDao ud = factory.getRepository(UsersDao.class);</span><br><span class="line">	System.out.println(ud);</span><br><span class="line">	System.out.println(ud.getClass());</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Repository接口</strong></p>
<p>Repository接口是Spring Data JPA中为我们提供的所有接口的顶层接口.</p>
<p>Repository提供了两种查询方式的支持<br>    1. 基于方法名称命名规则查询<br>    2. 基于@Query查询</p>
<p><strong>方法名称命名规则查询</strong></p>
<p>规则： findBy(关键字)+属性名称（属性名称的首字母大写）+查询条件(首字母大写)</p>
<p><img src="https://i.loli.net/2019/12/30/PMv5oOeBGY7zhy8.png" alt="1577708111_1_.png"></p>
<p>创建接口UsersDao.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.gdaib.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.data.repository.Repository;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.gdaib.pojo.Users;</span><br><span class="line"><span class="comment">/***</span></span><br><span class="line"><span class="comment"> * Repository接口讲解</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 1huangzewei</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">//第一个参数要操作的实体类型，第二个参数为主键的数据类型</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UsersDao</span> <span class="keyword">extends</span> <span class="title">Repository</span>&lt;<span class="title">Users</span>,<span class="title">Integer</span>&gt;</span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function">List&lt;Users&gt; <span class="title">findByUsernamesIs</span><span class="params">(String string)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="function">List&lt;Users&gt; <span class="title">findByUsernamesLike</span><span class="params">(String string)</span></span>;</span><br><span class="line">	</span><br><span class="line">	<span class="function">List&lt;Users&gt; <span class="title">findByUsernamesAndUserageGreaterThanEqual</span><span class="params">(String name,Integer age)</span></span>;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>创建测试类：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.gdaib.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> org.junit.runner.RunWith;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.context.ContextConfiguration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.context.junit4.SpringJUnit4ClassRunner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.gdaib.dao.UsersDao;</span><br><span class="line"><span class="keyword">import</span> com.gdaib.pojo.Users;</span><br><span class="line"></span><br><span class="line"><span class="comment">/***</span></span><br><span class="line"><span class="comment"> * Repository接口测试</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 1huangzewei</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RunWith</span>(SpringJUnit4ClassRunner.class)</span><br><span class="line"><span class="meta">@ContextConfiguration</span>(<span class="string">"classpath:applicationContext.xml"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RepositoryTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Autowired</span></span><br><span class="line">	<span class="keyword">private</span> UsersDao usersDao;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/***</span></span><br><span class="line"><span class="comment">	 * 需求，使用用户名作为查询条件</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@Test</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">/***</span></span><br><span class="line"><span class="comment">		 * 判断相等的条件，有三种表示方式</span></span><br><span class="line"><span class="comment">		 * 1、什么都不写，默认就是做相等判断</span></span><br><span class="line"><span class="comment">		 * 2. Is</span></span><br><span class="line"><span class="comment">		 * 3. Equal</span></span><br><span class="line"><span class="comment">		 */</span></span><br><span class="line">		List&lt;Users&gt; list = <span class="keyword">this</span>.usersDao.findByUsernamesIs(<span class="string">"李四"</span>);</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">for</span> (Users users : list) &#123;</span><br><span class="line">			System.out.println(users);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/***</span></span><br><span class="line"><span class="comment">	 * 需求：根据用户姓名做like查询</span></span><br><span class="line"><span class="comment">	 * Like：条件关键字</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@Test</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		List&lt;Users&gt; list = <span class="keyword">this</span>.usersDao.findByUsernamesLike(<span class="string">"王"</span>);</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">for</span> (Users users : list) &#123;</span><br><span class="line">			System.out.println(users);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/***</span></span><br><span class="line"><span class="comment">	 * 需求：查询名称为王五并且他的年龄大于等于22</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@Test</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test3</span><span class="params">()</span></span>&#123;</span><br><span class="line">		List&lt;Users&gt; list = <span class="keyword">this</span>.usersDao.findByUsernamesAndUserageGreaterThanEqual(<span class="string">"王五"</span>,<span class="number">22</span>);</span><br><span class="line">		<span class="keyword">for</span> (Users users : list) &#123;</span><br><span class="line">			System.out.println(list);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>基于@Query注解的查询</strong></p>
<p>通过JPQL查询</p>
<ul>
<li>JPQL:通过Hibernate的HQL演变过来。它和HQL语法极其相似 </li>
</ul>
<p>通过SQL语句查询</p>

        
    </section>
</article>


    <article class="article" itemscope itemprop="blogPost">
    
    <header class="article-header">
        
        <h1 itemprop="name">
            <a href="/CPWS.github.io/2019/12/12/hello-world/">Hello World</a>
        </h1>
        
        <div class="article-meta clearfix">
            <a class="article-date" href="https://CPWS.github.io/index.html">
    
    <i class="icon-calendar"></i>
    
    <time datetime="2019-12-12T14:00:13.979Z" itemprop="datePublished">2019-12-12</time>
</a>

            

        </div>
    </header>
    
    <section class="article-body markdown-body">
        
        <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p>
<h2 id="Hello-Hexo"><a href="#Hello-Hexo" class="headerlink" title="Hello Hexo"></a>Hello Hexo</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>

        
    </section>
</article>


    <article class="article" itemscope itemprop="blogPost">
    
    <header class="article-header">
        
        <h1 itemprop="name">
            <a href="/CPWS.github.io/2019/12/12/四级选词填空/">四级选词填空</a>
        </h1>
        
        <div class="article-meta clearfix">
            <a class="article-date" href="https://CPWS.github.io/index.html">
    
    <i class="icon-calendar"></i>
    
    <time datetime="2019-12-12T11:07:31.000Z" itemprop="datePublished">2019-12-12</time>
</a>

            
<div class="article-tag-list">
    <i class="icon-tag"></i>
    <a class="article-tag-link" href="/CPWS.github.io/tags/四级选词填空/">四级选词填空</a>
</div>


        </div>
    </header>
    
    <section class="article-body markdown-body">
        
        <h3 id="常考词汇"><a href="#常考词汇" class="headerlink" title="常考词汇"></a>常考词汇</h3><p>especially<br>adv. 特别，格外，尤其，主要；这个空的前面一般是逗号。<br>average<br>adj. 一般的；通常的；平均的； 常考结构： the average…of<br>challenges<br>n 挑战<br>v 向…挑战，怀疑，要求；挑战，反对<br>consequently<br>adv 结果，必然地，因此<br>total<br>n 总数，合计，全体<br>常考搭配：in total<br>potential<br>adv 有潜力的，潜在的，可能的<br>常考搭配： the potential for sth.某事发生的潜在性；可能性<br>maintain<br>v 保持，维持，维修，保养<br>常用搭配：（maintain friendly relations）与某人保持友好关系<br>naturally<br>adv 自然地，天生地<br>characters<br>n 品质，特征，特点<br>limited<br>adj 有限制的，少的，有限的<br>excess<br>n 过火，过头，无节制<br>excessive<br>adj 过分的，过度的，极度的<br>determine<br>v 确定，决定<br>including<br>v 包含，包括<br>dependent<br>adj 依赖的，从属的<br>critically<br>adj 严重地，批判性地；危急地，苛求地<br>commitment<br>n 托付，交托，委托<br>chances<br>n 机会，可能性，意外<br>tend<br>v 倾向，趋向，照管，照料<br>performance<br>n 演出，表演，成绩，履行，执行<br>enhance<br>v 提高，增加，加强<br>associated<br>adj 伙伴的，合伙的，共事的，副的<br>ranging<br>v 范围从…到…<br>develop<br>v 发展，发扬，发达，发展，发育，生产<br>impact<br>v/n 影响<br>常用搭配：impact on …<br>contributing<br>动名词 捐赠，捐助，贡献<br>recession<br>n 衰退，不景气<br>involved<br>adj 有关的，牵扯在内的；涉及到<br>dramatically<br>adv 戏剧性地，引人注目地<br>declining<br>decline v 拒绝；下降；减少；衰退<br>significant<br>adj 有意义的，重要的，重大的 </p>

        
    </section>
</article>


    <article class="article" itemscope itemprop="blogPost">
    
    <header class="article-header">
        
        <h1 itemprop="name">
            <a href="/CPWS.github.io/2019/12/12/四级翻译/">四级翻译</a>
        </h1>
        
        <div class="article-meta clearfix">
            <a class="article-date" href="https://CPWS.github.io/index.html">
    
    <i class="icon-calendar"></i>
    
    <time datetime="2019-12-12T08:12:53.000Z" itemprop="datePublished">2019-12-12</time>
</a>

            
<div class="article-tag-list">
    <i class="icon-tag"></i>
    <a class="article-tag-link" href="/CPWS.github.io/tags/四级翻译/">四级翻译</a>
</div>


        </div>
    </header>
    
    <section class="article-body markdown-body">
        
        <h3 id="主题一：秧歌"><a href="#主题一：秧歌" class="headerlink" title="主题一：秧歌"></a>主题一：秧歌</h3><p>秧歌(the Yangko dance)是几百年前农民在稻田里劳作时创作的一种传统的中国民间舞蹈。扭秧歌时，舞者跟随音乐节奏(rhythm)扭动身体，步伐夸张，将古老的故事以一种新的形式呈现给观众。热闹的场面、丰富的舞蹈语言、兴高采烈的手势和生动的表演形式使得秧歌深受中国人民的喜爱。每逢重大节日，人们都会自发地举办秧歌表演。在场的所有人都聚精会神地观看演出，欣赏和感受着舞者的感情，全然忘记了自己生活中的烦恼。</p>
<p>秧歌(the Yangko dance)是几百年前农民在稻田里劳作时创作的一种传统的中国民间舞蹈。<br><em>The YangKo dance is a traditional Chinese folk dance created by farmers when they worked in the<br>rice field hundreds of years ago.</em></p>
<p>舞者跟随音乐节奏(rhythm)扭动身体，步伐夸张，将古老的故事以一种新的形式呈现给观众。<br><em>During the dance,the dancer sway their bodies to music rhythm and walk at an exaggerated pace to present old stoies to the audience in a new style.</em></p>
<p>热闹的场面、丰富的舞蹈语言、兴高采烈的手势和生动的表演形式使得秧歌深受中国人民的喜爱。<br><em>Thanks to its alive scene,abundant dance language,happiness gestures and vivid performing style,it is always favored by the Chinese.</em></p>
<p>每逢重大节日，人们都会自发地举办秧歌表演。<br><em>People will organize YangKo dance performances spontaneously  whenever there is a grant festival.</em></p>
<p>在场的所有人都聚精会神地观看演出，欣赏和感受着舞者的感情，全然忘记了自己生活中的烦恼。<br><em>All the people present are contrating on the performances ,appreciating and sharing the feelings of the dancers, and forgetting the troubles in their own life.</em></p>
<p>笔记:<br>民间舞蹈 folk dance<br>稻田 Rice Field<br>夸张 exaggerated<br>观众 audience<br>手势 gesture<br>自觉地 spontaneously</p>
<h3 id="主题二：春节"><a href="#主题二：春节" class="headerlink" title="主题二：春节"></a>主题二：春节</h3><p>春节是中国最重要的传统节日。每逢春节，中国人都会回家与家人团聚。近年来，由于越来越多的中国人离开家乡到外地学习或工作，春节前后就会出现春运高峰(Spring Festival travel rush)。每年此时，大量乘客涌入火车站、汽车站和机场，公共交通承受着巨大的压力。为时40天的春运堪称世界上最大规模的年度迁徙(migration)。为了确保每位乘客旅途顺利，运输部门(transportation authorities)就得提供更为优质的服务。</p>
<p>春节是中国最重要的传统节日。每逢春节，中国人都会回家与家人团聚。<br><em>Spring Festival is the most important traditional Chinese holiday during which the Chinese people return home to reunite wuth their family members.</em></p>
<p>近年来，由于越来越多的中国人离开家乡到外地学习或工作，春节前后就会出现春运高峰(Spring Festival travel rush)。<br><em>In recent year,as more and more people left their hometown to study or seek work elsewhere,Spring Festival travel rush has appeared around Spring Festival.</em></p>
<p>每年此时，大量乘客涌入火车站、汽车站和机场，公共交通承受着巨大的压力。<br><em>During this period every year,a large number of passengers rush to railway station,bus stations as well as airports hench public transportation is under great pressure .</em></p>
<p>为时40天的春运堪称世界上最大规模的年度迁徙(migration)。为了确保每位乘客旅途顺利，运输部门(transportation authorities)就得提供更为优质的服务。<br>Faced with the 40-day Spring Festival travel rush known as the biggest annual human migration in the world,transportation authorities have to prove their high quantity server to ensure a smooth journey for every passenger. </p>
<p>笔记:<br>团聚 reunite</p>

        
    </section>
</article>


    <article class="article" itemscope itemprop="blogPost">
    
    <header class="article-header">
        
        <h1 itemprop="name">
            <a href="/CPWS.github.io/2019/12/11/英语四级作文/">英语四级作文</a>
        </h1>
        
        <div class="article-meta clearfix">
            <a class="article-date" href="https://CPWS.github.io/index.html">
    
    <i class="icon-calendar"></i>
    
    <time datetime="2019-12-11T06:54:39.000Z" itemprop="datePublished">2019-12-11</time>
</a>

            
<div class="article-tag-list">
    <i class="icon-tag"></i>
    <a class="article-tag-link" href="/CPWS.github.io/tags/英语四级作文/">英语四级作文</a>
</div>


        </div>
    </header>
    
    <section class="article-body markdown-body">
        
        <h4 id="作文1：-the-importance-of-reading-ability-and-how-to-develop-it"><a href="#作文1：-the-importance-of-reading-ability-and-how-to-develop-it" class="headerlink" title="作文1： the importance of reading ability and how to develop it ."></a>作文1： <code>the importance of reading ability and how to develop it .</code></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">    As the most frequently used way to get access to the original material,reading has </span><br><span class="line">always been considered one of the most important parts of language learning.This explains </span><br><span class="line">why reading skills should be highly emphasized.</span><br><span class="line">    Then how to improve our reading skills?First of all,scan the materia before we begin.Whatever</span><br><span class="line">the purpose of our reading is,take a few minutes to look the piece over to check and how the work </span><br><span class="line">is structured and presented.Secondly,try not reach for the dictionary when we come to a word we</span><br><span class="line">dont&apos;t know,Instead,try to guess the meaning of the word based on the context.Last but not lease,</span><br><span class="line">write a few sentences to summarize what we&apos;ve read since it is a way of checking that we</span><br><span class="line">understand what we&apos;ve reading.</span><br><span class="line">    Above all,reading has important benefitsand can help us learn language faster and more</span><br><span class="line">completely,which encourages each language learner to develop their reading skill as suggested.</span><br></pre></td></tr></table></figure>

<ul>
<li>短语积累:<ul>
<li><code>get access to</code>：获得，接近，可以使用 </li>
<li><code>emphasized</code>：重视</li>
</ul>
</li>
</ul>
<hr>
<h4 id="作文2：自立"><a href="#作文2：自立" class="headerlink" title="作文2：自立"></a>作文2：自立</h4><ul>
<li>Directions:For this part, you are allowed 30 minutes to write a short essay. You should start your essay with a brief description of the picture and then express your views on self-reliance. You should write at least 120 words but no more than 180words.</li>
</ul>
<p><img src="https://i.loli.net/2019/12/11/ZOCxmeApLdTH21U.jpg" alt="v2-3dd6527beb20ca21f05db29a5d63cb67_hd.jpg"></p>
<p>“It’s not my fault. Bad grades wouldn’t matter if I had been born rich.”</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">    As is vividly depicted in the picture,a boy is complaining to his parents that if he had been </span><br><span class="line">born with a sliver spoon in his mouth,bad grades wouldn&apos;t matter. The picture reflects a serious </span><br><span class="line">social problem that nowadays some children are more dependent on their parents.They lack </span><br><span class="line">self-reliance.</span><br><span class="line">    It is widely acknowledged that self-reliance is indispensable to everyone.self-reliance plays </span><br><span class="line">an important role in the cultivation of creativity.Relying on others meaning repetition，imitation</span><br><span class="line"> and few efforts,which may not lead to innovation，an element greatly needed in this era of </span><br><span class="line"> competition.For another，what is offered by others is not limitless.If children do not depend on</span><br><span class="line"> themselves,one day when nobody offers them anything anymore,they will fail with reget.</span><br><span class="line">    In view of the seriousness of the problem,it is high time for children to relize the</span><br><span class="line">importance of self-reliance.As for adults,they should encourage their children to confront </span><br><span class="line">challenge by themselves;As for children,they should keep &quot;No pain,no gain&quot; in mind and strive for </span><br><span class="line">their dreams independently.</span><br></pre></td></tr></table></figure>

<ul>
<li>生词积累<ul>
<li>vividly：生动地，强烈地</li>
<li>depict：描述，描绘</li>
<li>indispensable:不可或缺的，绝对必要的</li>
<li>cultivation：培养、耕种</li>
<li>repetition：重复</li>
<li>innovation:创新，革新，新方法</li>
<li>strive：努力，奋斗</li>
</ul>
</li>
<li>短语积累<ul>
<li>As is vividly depicted in the picture：如图所示</li>
<li>sliver spoon：银汤匙</li>
<li>in the era of competiotion：竞争时代</li>
</ul>
</li>
</ul>
<hr>
<h4 id="作文3：对抗雾霾"><a href="#作文3：对抗雾霾" class="headerlink" title="作文3：对抗雾霾"></a>作文3：对抗雾霾</h4><ul>
<li>Directions： For this part, you are allowed 30 minutes to write a short essay on the following question. You should write at least 120 words but no more than 180 words.</li>
<li>As a college student, you are very concerned about air quality; what do you think is the effective way to fight smog?</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">On Fighting Smog</span><br><span class="line">    Recently,smog has become a problem we have to face.There is a growing concern over smog which </span><br><span class="line">is believed to threaten people&apos;s health.It&apos;s high time that we took some methods to protect </span><br><span class="line">ourselves. </span><br><span class="line">    People&apos;s view on how to fight smog vary form person to person.Generally speaking,there are </span><br><span class="line">three effective ways.First of all ,try to reduce the time of outdoor activities,especially when </span><br><span class="line">the air quanity is not good enough.Secondly,make goood use of protective things such as mouth </span><br><span class="line">muffle so that harmful substances would be kept out.Most importantly,propect our environment and</span><br><span class="line">cut off the source of smog.Only in this way can we really achieve a long-term success.</span><br><span class="line">    From what has memtioned above,we can come to the conclusion that in order to keep away from </span><br><span class="line">smog,we can hide ourselves in a safe area;however,it is much more necessary for us to face the </span><br><span class="line">root of the problem bravely and fight against it.</span><br></pre></td></tr></table></figure>

<ul>
<li>生词积累<ul>
<li>substances：物质</li>
</ul>
</li>
<li>短语积累<ul>
<li>it is high time：是…的时候了</li>
<li>mouth muffle：口罩</li>
<li>vary form person to person：因人而异</li>
<li>generally speaking：一般而言</li>
<li>From what has been mentioned above:从上面所提到的</li>
</ul>
</li>
</ul>
<hr>
<h4 id="作文4：赞美"><a href="#作文4：赞美" class="headerlink" title="作文4：赞美"></a>作文4：赞美</h4><ul>
<li>Directions： For this part, you are allowed 30 minutes to write a short essay entitled The Importance of Compliments by commenting on Mark Twain’s remark “I can live for two months on a good compliment.” You should write at least 120 words but no more than 180 words.</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">The Importance of Compliments.</span><br><span class="line">    Just as the words Mark Twain even remarked,&quot;I can live for two months on a good compliment.&quot;</span><br><span class="line">What he said implies that a compliment is a necessity in our daliy life.</span><br><span class="line">    As far as I am concerned,compliments are (essential) very important to our life for the </span><br><span class="line">following three reasons.Firstly,compliments from others boost our confidence and explore our </span><br><span class="line">potential.Here is a story to illstrate this point.A child was often scorned by others because he </span><br><span class="line">was slow in study.However,his mother never give him up and always paid him compliments.Little by </span><br><span class="line">little，he built up confidence and finally entered a famous university.Secondly,compliments in our</span><br><span class="line">daily life bring harmony and happiness to us.What&apos;s more,the significance of compliments has also </span><br><span class="line">been proved by psychological studies,which support that a compliments is to the soul what water is</span><br><span class="line">to the body.</span><br><span class="line">    In summary,good compliments can help us win other&apos;s trust and improve our life. So be </span><br><span class="line">generous to give your whole-hearted compliments to the people around you.</span><br></pre></td></tr></table></figure>

<ul>
<li>生词积累<ul>
<li>implies：意味着</li>
<li>boost：促进，增加 </li>
<li>potential 潜在的</li>
<li>scorned：鄙视的</li>
<li>harmony：协调，和睦</li>
<li>significance:意义，重要性</li>
<li>trust：信任，信赖</li>
</ul>
</li>
<li>短语积累<ul>
<li>Little by little:逐渐，渐渐</li>
<li>a compliments is to the soul what water is to the body.赞美之于灵魂，犹如水之于身体。</li>
</ul>
</li>
</ul>
<hr>
<h4 id="作文5-应聘国际会议志愿者"><a href="#作文5-应聘国际会议志愿者" class="headerlink" title="作文5 应聘国际会议志愿者"></a>作文5 应聘国际会议志愿者</h4><ul>
<li>Directions: For this part, you are allowed 30 minutes to write an application letter. You should write at least 120 words but no more than 180 words and base your composition on the outline given below in Chinese.</li>
<li>假设你是张丽,学校要承办一个国际会议,正在招聘志愿者。你比较感兴趣,想要参加,请根据以下提示写一封申请信。<ol>
<li>应聘的优势</li>
<li>如果被选为志愿者，你将会如何做</li>
</ol>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Dear Sir and Madam,</span><br><span class="line"></span><br><span class="line">It&apos;s my great honor to have the chance to run for the volunteer for the International conference</span><br><span class="line">to be hosted by our university. I&apos;m ZhangLi, a sophomore majoring in English.I am sure that I can</span><br><span class="line">be qualified for being a volunteer.</span><br><span class="line"></span><br><span class="line">First of all,I specialize in English and my fluent oral English will help me a lot.Besides,I have </span><br><span class="line">served as volunteer for two grant sports games.Consequently,I have accumulated sufficient </span><br><span class="line">experience.More importantly,I am an energetic person full of passion and enthusiasm for </span><br><span class="line">volunteer work. If I were selected,I would go to great length to participate in the training</span><br><span class="line">and make myself more qualified .Moreover,I would place more importance on team spirit and </span><br><span class="line">cooperate with others.To sum up,I would make every efforts to finish the mission assigned to me.</span><br><span class="line"></span><br><span class="line">Please trust me,and trust your choice.Thank you.</span><br><span class="line">                                                                                    Yours,</span><br><span class="line">                                                                                    ZhangLi</span><br></pre></td></tr></table></figure>

<ul>
<li>生词积累<ul>
<li>grant:授予，允许</li>
<li>accumulate：积累</li>
<li>sufficient：充足的，充分的</li>
<li>passon：充足，热情</li>
<li>spirit:精神</li>
</ul>
</li>
<li>短语积累<ul>
<li>I would make every efforts to finish the mission assigned to me：我会努力去完成所分配给我的任务。</li>
</ul>
</li>
</ul>
<hr>
<h4 id="作文6：大学生考证热"><a href="#作文6：大学生考证热" class="headerlink" title="作文6：大学生考证热"></a>作文6：大学生考证热</h4><ul>
<li>For this part, you are allowed 30 minutes to write a short essay entitled Certificate Craze on Campus following the outline given below. You should write at least 120 words but no more than 180 words.<ol>
<li>当今大学生需要通过各种资格认证考试,以获得相应的证书</li>
<li>参加这些考试并获得证书的必要性</li>
<li>我的观点</li>
</ol>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Certificate Craze on Campus</span><br><span class="line">Nowadays each college student much have a pile of various certificates upon graduation,such as </span><br><span class="line">National Computer Rank Examination Certificates and Accounting Qualification Certificate.Many </span><br><span class="line">people believe that it is necessary to get these certificates though we need to spend much time </span><br><span class="line">on the examinations.</span><br><span class="line"></span><br><span class="line">First of all,the certificates are the proof of our capabilities to some extent.Besides,with </span><br><span class="line">these certificates,it it much easier for graduates to be regarded as qualified applications </span><br><span class="line">in job hunting and attract the attention of various employers.Most importantly,college student</span><br><span class="line">can acquire extensive acknowledge in the process of preparing for the examinations.</span><br><span class="line"></span><br><span class="line">For my part,the certificates are just a means to measure college student&apos; abilities while the</span><br><span class="line">acknowledge acquired is truly beneficial and powerful.</span><br></pre></td></tr></table></figure>

<ul>
<li>生词积累<ul>
<li>certificate：文凭，证书，合格证书</li>
<li>craze：狂热</li>
</ul>
</li>
<li>短语积累：    <ul>
<li>acquire extensive knowledge:获得广泛的知识</li>
</ul>
</li>
</ul>
<hr>
<h4 id="作文7：5G背景介绍"><a href="#作文7：5G背景介绍" class="headerlink" title="作文7：5G背景介绍"></a>作文7：5G背景介绍</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">China is expected to launch a commercial operation of 5G</span><br></pre></td></tr></table></figure>
        
    </section>
</article>


    <article class="article" itemscope itemprop="blogPost">
    
    <header class="article-header">
        
        <h1 itemprop="name">
            <a href="/CPWS.github.io/2019/12/02/专插本c语言/">专插本c语言</a>
        </h1>
        
        <div class="article-meta clearfix">
            <a class="article-date" href="https://CPWS.github.io/index.html">
    
    <i class="icon-calendar"></i>
    
    <time datetime="2019-12-02T04:30:19.000Z" itemprop="datePublished">2019-12-02</time>
</a>

            
<div class="article-tag-list">
    <i class="icon-tag"></i>
    <a class="article-tag-link" href="/CPWS.github.io/tags/专插本c语言/">专插本c语言</a>
</div>


        </div>
    </header>
    
    <section class="article-body markdown-body">
        
        <h2 id="最简单的C语言程序"><a href="#最简单的C语言程序" class="headerlink" title="最简单的C语言程序"></a>最简单的C语言程序</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"世界，你好\n"</span>);	</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>main</code>是主函数的函数名，表示这是一个主函数。</li>
<li>每一个C源程序都必须有且只能有一个主函数（main函数）。</li>
<li>函数调用语句<code>printf()</code>函数的功能是把要输出的内容送到显示器去显示。</li>
<li><code>printf()</code>函数是一个由系统定义的标准函数，可以在程序中直接调用。</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;math.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">double</span> x,s;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"input number:\n"</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">"%lf"</span>,&amp;x);</span><br><span class="line">	s=<span class="built_in">sin</span>(x);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"sin of %lf is %lf\n"</span>,x,s); </span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>include</code>称为文件包含命令</li>
<li>扩展名为<code>.h</code>的文件称为头文件</li>
<li>定义两个实数变量，以被后面程序使用显示提示信息。</li>
<li>从键盘中获得一个实数x</li>
<li>求x的正弦，并把它赋值给s</li>
<li>显示程序运算结果</li>
<li>main函数结束。</li>
</ul>
<ul>
<li>例题</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">max</span><span class="params">(<span class="keyword">int</span> a,<span class="keyword">int</span> b)</span></span>; <span class="comment">//函数说明 </span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;     <span class="comment">//主函数 </span></span><br><span class="line">	<span class="keyword">int</span> x,y,z;  <span class="comment">//变量说明 </span></span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">max</span><span class="params">(<span class="keyword">int</span> a,<span class="keyword">int</span> b)</span></span>; <span class="comment">//函数说明</span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"input two numbers:\n"</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;x,&amp;y); <span class="comment">// 输入x,y值</span></span><br><span class="line">	z=max(x,y); <span class="comment">//调用max函数 </span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"max num = %d"</span>,z); <span class="comment">//输出 </span></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">max</span><span class="params">(<span class="keyword">int</span> a,<span class="keyword">int</span> b)</span></span>&#123; <span class="comment">//定义max函数</span></span><br><span class="line"> </span><br><span class="line">	<span class="keyword">if</span>(a&gt;b)<span class="keyword">return</span> a; <span class="comment">//把结果返回主调函数 </span></span><br><span class="line">	<span class="keyword">else</span> <span class="keyword">return</span> b;	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="数据类型、运算符和表达式"><a href="#数据类型、运算符和表达式" class="headerlink" title="数据类型、运算符和表达式"></a>数据类型、运算符和表达式</h2><h3 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h3><ul>
<li>基本类型：整型、字符型、实型（浮点型：（单精度，双精度）），枚举类型。</li>
<li>指针类型</li>
<li>构造类型：数组类型，结构体类型，共用体类型。</li>
<li>空类型</li>
</ul>
<ol>
<li><p>基本数据类型：基本数据类型最主要的特点是。其值不可以再分解为其他类型。也就是说，基本数据类型就是自我说明的。</p>
</li>
<li><p>构造数据类型：构造数据类型是根据已定义的一个或多个数据类型用构造方法来定义的。也就是说，一个构造类型的值可以分解成若干个“成员”或“元素”。每个“成员”都是一个基本数据类型或又是一个构造类型。在c语言中，构造类型有以下几种。</p>
<blockquote>
<ul>
<li>数组类型</li>
<li>结构体类型</li>
<li>共用体（联合）类型</li>
</ul>
</blockquote>
</li>
<li><p>指针类型：指针是一种特殊的，同时又是具有重要作用数据类型。其值用来表示某个变量在内存存储器中的地址。虽然指针变量的取值类似于整形量，但，这两个类型完全不同的量，因此不能混为一谈。</p>
</li>
<li><p>空类型：在调用函数值时，通常应向调用者返回一个函数值。这个返回的函数值是具有一定的数据类型的，应在函数定义及函数说明中给以说明，例如在例题中给出的max函数定义中，函数头为：<code>int max(int a,int b);</code>其中int类型说明符表达该函数的返回值整形量。但是，也有一类函数，调用后并不需要向调用者返回函数值，这种函数可以定义为“空类型”。其类型说明符为<code>void</code>。</p>
</li>
</ol>
<hr>
<h3 id="常量和变量"><a href="#常量和变量" class="headerlink" title="常量和变量"></a>常量和变量</h3><ul>
<li>对于基本数据类型，按照其值是否可改变又分为常量和变量两种。</li>
<li>在程序运行中，其值不发生改变的量称为常量，其值是可以改变的量称为变量。</li>
<li>它们可以与数据类型结合起来分类。例如：可以分为整型常量，整型变量，浮点常量，浮点变量，字符常量，字符变量，枚举常量，枚举变量。在程序中，常量可以不经说明而直接引用的，而变量则必须先定义后使用。</li>
<li>整形量包括整型常量和整型变量。</li>
</ul>
<hr>
<ul>
<li>在程序执行过程中，其值不可以发生改变的量称之为常量。</li>
<li>符号常量：用标识符表示一个常量。在C语言中，可以用一个标识符来表示一个常量，称之为符号常量。</li>
<li>符号常量在使用之前必须先定义，其一般形式为：<code>#define 符号量 常量</code></li>
<li>其中<code>#define</code>是一条预处理命令（预处理命令都以“#”开头），称为宏定义命令，其功能是把该标识符定义为其后的常量值。一经定义，以后再程序中所有出现该标识符的地方均带之以常量值。</li>
<li>习惯上符号常量的标识符用大写字母，变量标识符用小写字母，以示区分。</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> PRICE 30;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> num,total;</span><br><span class="line">	num=<span class="number">10</span>;</span><br><span class="line">	total=num*PRICE;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"total=%d\n"</span>,total);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>用标识符表示一个常量，称为符号常量。</li>
<li>符号常量与变量不同的是，它的值在程序运行作用域内不会发生改变，也不能在被赋值。</li>
<li>使用符号常量的好处<ul>
<li>含义清楚；</li>
<li>能做到“一改全改”；</li>
</ul>
</li>
</ul>
<ul>
<li>变量：其值可以改变的量称为变量。一个变量应该有一个名字，在内存中占据一定的存储单元。变量定义必须放在变量使用之前。一般放在函数体的口头部分。要区分变量名和变量值两个概念。</li>
</ul>
<hr>
<h3 id="整型数据"><a href="#整型数据" class="headerlink" title="整型数据"></a>整型数据</h3><ul>
<li><p>整型常量的表示方式（<code>在程序中是根据前缀来区分各种进制数的。</code>）</p>
<blockquote>
<ul>
<li>整型常量就是整常数。在C语言中，使用的整常量有八进制、十六进制和十进制三种。</li>
<li>十进制正常数：十进制正常数没有前缀。其数码为0~9。（以下是合法的十进制常数：237,-568,65535,1627）。</li>
<li>八进制整常数：八进制正常数必须以0开头，即以0作为八进制数的前缀。数码取值为0~7。八进制数通常是无符号数。（以下是合法的八进制数：015（十进制数13），0101（十进制数65），0177777(十进制数65535)）</li>
<li>十六进制整常数：十六进制整常数的前缀为<code>0X或0x</code>。其数码取值为0<del>9，A</del>F或a~f。以下是合法的十六进制整常数（0X2A（十进制数42），0XA0（十进制数160），0XFFFF（十进制数为65535））</li>
<li>整型常数的后缀：在16位字长的机器上，其本整型的长度也为16位，因此表示的数的范围也是有限的。十进制的无符号整常数的范围的0<del>65535，有符号为-32768</del>+32767。八进制的无符号的数的表示范围为0<del>0177777.十六进制的无符号的数的表示范围0x0</del>0xffff或0x0~0XFFFF。如果使用的数超过了上述范围，就必须使用长整型数来表示。长整型数是用后缀“L”或“l”来表示的。</li>
</ul>
</blockquote>
</li>
<li><p>整型变量</p>
<blockquote>
<ul>
<li><code>int k=3</code>;</li>
<li>整型变量在内存中是以二进制的方式存储。</li>
</ul>
</blockquote>
</li>
<li><p>补充：内存中的二进制存储(常识：一个字节BYTE=8位bit)</p>
</li>
<li><p>数值是以补码表示的</p>
<blockquote>
<ul>
<li>正数的补码与原码相同；</li>
<li>负数的补码：将该数的绝对值的二进制形式按位取反再加1。</li>
</ul>
</blockquote>
</li>
<li><p>整型变量的分类（注意:这里占多少字节与系统何编辑器规定有关！可以在编辑器中查看）</p>
<blockquote>
<ul>
<li>基本型：类型说明符为int，在内存中占4个字节。</li>
<li>短整量：类型说明符为short或 short int。所占节点和取值范围与基本类型相同。</li>
<li>长整型：类型说明符为long或 long int。在内存中占4个字节。</li>
<li>无符号型：类型说明符为：unsigned。</li>
</ul>
</blockquote>
</li>
<li><p>整型变量的定义</p>
<blockquote>
<ul>
<li>形式：<code>类型说明符 变量名标识符，变量名标识符...;</code></li>
<li>例如：<code>int a,b,c;(a,b,c为整型变量)</code>、<code>long x,y;(x,y为长整型变量)</code>、<code>unsigned p,q;（p,q为无符号整型变量）</code></li>
<li>在书写变量定义时，应注意如下几点：<blockquote>
<ul>
<li>允许在一个类型说明符后，定义多个相同类型的变量。各变量名之间用“,”隔开。类型说明符与变量名之间至少用一个空格隔开。</li>
<li>最后一个变量名之后必须以“;”结尾。</li>
<li>变量定义必须放在变量使用之前。一般放在函数体的开头部分。</li>
</ul>
</blockquote>
</li>
</ul>
</blockquote>
</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> a,b,c,d;</span><br><span class="line">	<span class="keyword">unsigned</span> u;</span><br><span class="line">	a=<span class="number">12</span>;</span><br><span class="line">	b=<span class="number">-24</span>;</span><br><span class="line">	u=<span class="number">10</span>;</span><br><span class="line">	c=a+u;d=b+u;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"a+u=%d，b+u=%d\n"</span>,c,d);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>整型数据的溢出</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="comment">//整型数据的溢出 </span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">short</span> <span class="keyword">int</span> a,b;</span><br><span class="line">	a=<span class="number">32767</span>;</span><br><span class="line">	b=a+<span class="number">1</span>;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%d,%d\n"</span>,a,b);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//不同数据类型之间的运算</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">long</span> x,y;</span><br><span class="line">	<span class="keyword">int</span> a,b,c,d;</span><br><span class="line">	x=<span class="number">5</span>;</span><br><span class="line">	y=<span class="number">6</span>;</span><br><span class="line">	a=<span class="number">7</span>;</span><br><span class="line">	b=<span class="number">8</span>;</span><br><span class="line">	c=x+a;</span><br><span class="line">	d=y+b;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"c=x+a=%d,d=y+b=%d\n"</span>,c,d);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="实型数据"><a href="#实型数据" class="headerlink" title="实型数据"></a>实型数据</h3><ul>
<li><p>实型常量的表示方法</p>
</li>
<li><p>实型也称为浮点型。实型常量也称为实数或者浮点数。在c语言中，实数只采用十进制。它有二中形式：十进制小数形式，指数形式。</p>
</li>
<li><p>十进制数形式：由数码0~9和小数点组成</p>
<blockquote>
<ul>
<li>例如0.02,5.0,5.789,0.13,5.0,300.,-267.8230等均为合法的实数。注意：必须有小说点.</li>
</ul>
</blockquote>
</li>
<li><p>指数形式：由十进制数，加阶码标志<code>e</code>和<code>E</code>以及阶码（只能是整数，可以带符号）组成。</p>
<blockquote>
<ul>
<li>aEm (a为十进制数，n为十进制整数)</li>
</ul>
</blockquote>
</li>
<li><p>标准C允许浮点数使用后缀。后缀为“F”或者“f”即表示该数为浮点数。如356f和356.是等价的。</p>
</li>
<li><p>实型数据在内存中的存放形式</p>
<blockquote>
<ul>
<li>实型数据一般占4个字节（32位）内存空间。按指数形式存储。实数3.14159在内存中的存放形式如下：</li>
</ul>
</blockquote>
</li>
</ul>
<table>
<thead>
<tr>
<th>符号</th>
<th>小数部分</th>
<th>指数部分</th>
</tr>
</thead>
<tbody><tr>
<td>+</td>
<td>.314159</td>
<td>1</td>
</tr>
</tbody></table>
<blockquote>
<ul>
<li>小数部分占的位（bit）愈多，数的有效数字就愈多，精度俞高</li>
<li>指数部分占的位数愈多，则能表示的数值范围愈大。 </li>
</ul>
</blockquote>
<ul>
<li><p>实型变量的分类</p>
<blockquote>
<ul>
<li>单精度（float）和双精度（double），长双精度（long double）三类。</li>
<li>单精度值显示7位有效数字。数值范围：3.4E-38~3.4E+38</li>
<li>双精度显示16位有效数字。数字范围：1.7E-308~1.7E+308</li>
</ul>
</blockquote>
</li>
<li><p>实型数据的舍入误差</p>
<blockquote>
<ul>
<li>由于实型变量是由有限的存储单元组成的，因此能提供的有效数字总是有限的。</li>
</ul>
</blockquote>
</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">float</span> a,b;</span><br><span class="line">	a=<span class="number">123456.789e5</span>;</span><br><span class="line">	b=a+<span class="number">20</span>;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%lf\n"</span>,a);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%lf\n"</span>,b);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>练习：<blockquote>
<ul>
<li>1.0/3*3等于多少？</li>
<li>3/2呢？</li>
<li>1/3*3呢？</li>
</ul>
</blockquote>
</li>
<li>编程（1）（2）（3）</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%f\n"</span>,<span class="number">1.0</span>/<span class="number">3</span>*<span class="number">3</span>); <span class="comment">//3.00000</span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%f\n"</span>,<span class="number">1</span>/<span class="number">3</span>*<span class="number">3</span>); <span class="comment">//0.0000</span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%f\n"</span>,<span class="number">3</span>/<span class="number">2</span>);<span class="comment">//0.00000</span></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="字符型数据"><a href="#字符型数据" class="headerlink" title="字符型数据"></a>字符型数据</h3><ul>
<li>字符型数据包括字符常量和字符变量</li>
<li>字符常量<blockquote>
<ul>
<li>字符常量是用单引号括起来的一个字符。</li>
<li>例如’a’,’b’,’=’,’+’,’?’都是合法的字符常量。</li>
<li>在C语言中，字符常量有以下特点:<blockquote>
<ul>
<li>字符常量只能用单引号括起来，不能用双引号或其他括号。</li>
<li>字符常量只能是单个字符，不能是字符串。</li>
<li>字符可以是字符集中任意字符。但是数字被定义为字符型之后就不能参与数值运算。如’5’和5是不同的。’5’是字符常量，不能参与运算。</li>
</ul>
</blockquote>
</li>
</ul>
</blockquote>
</li>
<li>字符变量<blockquote>
<ul>
<li>字符变量：字符变量用来存储字符常量，即单个字符。</li>
<li>字符变量的类型说明符是char。字符变量类型定义格式和书写规则都与整形变量相同。例如 char a,b;</li>
<li>转义字符：转义字符是一种特殊的字符常量。转义字符是以反射线“\”开头，后跟一个或多个字符。转义字符具有特定的含义，不同于字符原有的意义，古称“转义”字符。例如：在前面各例题printf函数的格式中用到“\n”就是一个转义字符，其意义就是“回车换行”。转义字符主要用来表示那些用一般字符不便于表示的控制代码。</li>
</ul>
</blockquote>
</li>
<li>字符型数据常用的转义字符及其含义</li>
</ul>
<table>
<thead>
<tr>
<th>转义字符</th>
<th>转义字符的意义</th>
<th>ASCII代码</th>
</tr>
</thead>
<tbody><tr>
<td>\n</td>
<td>回车换行</td>
<td>10</td>
</tr>
<tr>
<td>\t</td>
<td>横向调到下一制表位置</td>
<td>9</td>
</tr>
<tr>
<td>\b</td>
<td>退格</td>
<td>8</td>
</tr>
<tr>
<td>\r</td>
<td>回车</td>
<td>13</td>
</tr>
<tr>
<td>\f</td>
<td>走纸换页</td>
<td>12</td>
</tr>
<tr>
<td>|    反斜线符””</td>
<td>92</td>
<td></td>
</tr>
<tr>
<td>&#39;</td>
<td>单引号符</td>
<td>39</td>
</tr>
<tr>
<td>&quot;</td>
<td>双引号</td>
<td>34</td>
</tr>
<tr>
<td>\a</td>
<td>鸣铃</td>
<td>7</td>
</tr>
<tr>
<td>\ddd</td>
<td>1~3位八进制数所代表的字符</td>
<td></td>
</tr>
<tr>
<td>\xhh</td>
<td>1~2位十六进制数所代表的字符</td>
<td></td>
</tr>
</tbody></table>
<ul>
<li>练习</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> a,b,c;</span><br><span class="line">	a=<span class="number">5</span>;b=<span class="number">6</span>;c=<span class="number">7</span>;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">" b c\ted\rf\n"</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"hijk\tL\bM\n"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>字符数据在内存中的存储形式及使用方法</p>
<blockquote>
<ul>
<li>每个字符变量被分配一个字节的内存空间，因此只能存放一个字符。字符值是以<code>ASCII</code>码的形式存放在变量的内存单元之中的。</li>
<li>如x的十进制<code>ASCII</code>码值是120，y的十进制数<code>ASCII</code>码是121。对字符变量a,b赋值’x’，’7’值： a=’x’;b=’7’;</li>
<li>实际上是在a,b两个单元内存中存放120和55的二进制代码</li>
<li>‘A’的ASCII值：65；’a’的ASCII值：97；’0’的ASCII值48；</li>
</ul>
</blockquote>
</li>
<li><p>练习：向字符变量赋以整数</p>
</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//-128~127</span></span><br><span class="line"><span class="comment">//197</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123; <span class="comment">//字符变量  ASCII值</span></span><br><span class="line">	SetConsoleOutputCP(<span class="number">437</span>);</span><br><span class="line">	<span class="keyword">char</span> a,b;</span><br><span class="line">	a=<span class="number">197</span>;</span><br><span class="line">	b=<span class="number">198</span>;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%d\n"</span>,<span class="keyword">sizeof</span>(<span class="keyword">char</span>));</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%c,%c\n"</span>,a,b);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%d,%d\n"</span>,a,b); </span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>练习2：小写字符换大写字母</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">char</span> a,b;</span><br><span class="line">	a=<span class="string">'a'</span>;</span><br><span class="line">	b=<span class="string">'b'</span>;</span><br><span class="line">	a=a<span class="number">-32</span>;</span><br><span class="line">	b=b<span class="number">-32</span>;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"a=%c,b=%c\na=%d,b=%d"</span>,a,b,a,b);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>练习3：比较char a=33与int b=33;</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">char</span> a;<span class="keyword">int</span> b;</span><br><span class="line">	a=<span class="number">33</span>;</span><br><span class="line">	b=<span class="number">33</span>;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"a=%d,b=%d"</span>,a,b);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="字符串常量"><a href="#字符串常量" class="headerlink" title="字符串常量"></a>字符串常量</h3><ul>
<li>字符串常量是由一对双引号括起来的字符序列。例如：”CHINA”、”C Program”等都是合法的字符串。</li>
<li>字符串常量和字符常量是不同的量。他们之间的主要区别如下：(补充：char占八位而已！)<blockquote>
<ul>
<li>字符常量由单引号括起来，字符串常量由双引号括起来的。</li>
<li>字符常量只能是单个字符，字符串常量则可以包含一个或多个字符。</li>
<li>可以把一个字符常量赋值给字符串常量，但不能把一个字符串常量赋值给一个字符常量。例如：<code>可以char a=&#39;a&#39; 不能char a=&quot;a&quot;</code></li>
<li>字符常量占一个字节的内存空间。字符串常量占的内存字节数等于字符串中字节数加1。增加的一个字节中存放字符<code>\0</code>(ASCII为0)。这是字符串结束的标志。</li>
</ul>
</blockquote>
</li>
</ul>
<h3 id="各类数值型数据之间的混合运算"><a href="#各类数值型数据之间的混合运算" class="headerlink" title="各类数值型数据之间的混合运算"></a>各类数值型数据之间的混合运算</h3><ul>
<li><p>变量的数据类型是可以转换的。转换的方式有两种，一种是自动转换，一种是强制转换。自动转换发生在不同数据类型的量混合运算时，有编译系统自动完成。自动转换遵循以下规则：</p>
<blockquote>
<ul>
<li>若参与运算的类型不同，则先转换成同一类型，然后进行运算。</li>
<li>转换按数据长度增加的方向进行，以保证精度不降低。如int型和long型运算时，先把int量转换成long型后再进行计算。</li>
<li>所有的浮点运算都是以双精度进行的，即使仅含有float单精度量运算的表达式，也要转换成double型，再做运算。</li>
<li>char型和short型参与运算时，必须转换成int型。</li>
<li>在赋值运算时，赋值号两边量的数据类型不同时，赋值号右边量的类型将转换成左边量的类型。如果右边量的数据类型长度比左边长时，将丢失一部分数据，这样会降低精度，丢失的部分按四舍五入的方式向前舍入。</li>
<li>类型自动转换规格  <code>double&lt;---long&lt;----unsigned&lt;---int &lt;----short char</code></li>
</ul>
</blockquote>
</li>
<li><p>练习1</p>
</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">float</span> PI=<span class="number">3.14159</span>;</span><br><span class="line">	<span class="keyword">double</span> s;<span class="keyword">int</span> r=<span class="number">5</span>;</span><br><span class="line">	s=r*r*PI;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"s=%lf\n"</span>,s);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>练习2 实现四舍五入</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">float</span> a=<span class="number">4.49</span>;</span><br><span class="line">	<span class="keyword">int</span> c= (<span class="keyword">int</span>)(a+<span class="number">0.5</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%d"</span>,c);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>强制类型转换</p>
<blockquote>
<ul>
<li>强制类型转换是通过类型转换运算来实现的。</li>
<li>其一般形式类：<code>（类型说明符）(表达式)</code>：其功能是把表达式的运算结果强制转换成类型说明符所表示的类型。</li>
<li>例如 <code>(float) a</code>：把a转换为实型；<code>(int)(x+y)</code>：把x+y结果转换为整型.</li>
<li>在使用强制转换时应注意以下问题： <blockquote>
<ol>
<li>类型说明符和表达式都必须加括号（单个变量可以不加括号）。</li>
<li>无论是强制转换或是自动转换，都是为了本次的运算的需要而对变量的数据长度进行的临时性转换，而不改变数据说明时对该变量的定义的类型。 </li>
</ol>
</blockquote>
</li>
</ul>
</blockquote>
</li>
<li><p>练习1</p>
</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">float</span> f=<span class="number">5.75</span>;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"(int)f=%d,f=%f"</span>,(<span class="keyword">int</span>)f,f);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="算术运算符和算数表达式"><a href="#算术运算符和算数表达式" class="headerlink" title="算术运算符和算数表达式"></a>算术运算符和算数表达式</h3><ul>
<li>加法运算符”+”：加法运算符为双目运算符，即应有两个量参与加法运算。如a+b,a+8等。具有结合性。</li>
<li>减法运算符”-“：减法运算符为双目运算符。但“-”也可以做负值运算符，此时是单目运算符。如-x，-5等具有左结合性。</li>
<li>乘法运算符”*”：双目运算，具有左结合性。</li>
<li>除法运算符”/“：双目运算具有左结合性。参与运算量均为整型时，结果也是整型，舍去小数。如果运算中有一个是实型，则结果为double型。</li>
<li>求余数”%”：双目运算符，具有左结合性。</li>
<li>练习1</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%f"</span>,<span class="number">3.0</span>/<span class="number">4</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>练习2</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"stdio.h"</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"\n\n%d,%d\n"</span>,<span class="number">20</span>/<span class="number">7</span>,<span class="number">-20</span>/<span class="number">7</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%f,%f\n"</span>,<span class="number">20.0</span>/<span class="number">7</span>,<span class="number">-20.0</span>/<span class="number">7</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>练习3</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%d\n"</span>,<span class="number">100</span>%<span class="number">3</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>运算符的优先级：C语言中，运算符的运算优先级共分为15级。1级最高，15级最低。在表达式中，优先级较高的优先于优先级较低的进行运算。而在一个运算量两侧的运算符优先级相同时，则按运算符的结合性所规定的结合方向处理。</li>
<li>运算符的结合性:C语言中各运算符的结合性分为两种，即左结合性（自左至右）和右结合性（自右至左）。</li>
</ul>
<h2 id><a href="#" class="headerlink" title></a><img src="https://i.loli.net/2019/12/03/ORnwkt2uKjQYSls.png" alt="1575355235_1_.png"></h2><h3 id="自增、自减运算符"><a href="#自增、自减运算符" class="headerlink" title="自增、自减运算符"></a>自增、自减运算符</h3><ul>
<li><p>自增1，自增1运算符：自增1运算符记为<code>&quot;++&quot;</code>，其功能是使变量的值自增1；</p>
</li>
<li><p>自减1，自减1运算符：自减1运算符记为<code>&quot;--&quot;</code>，其功能是使变量的值自减1；</p>
</li>
<li><p>自增1，自减1运算符均为单目运算符，都具有结合性。可以有一下几种形式：</p>
<blockquote>
<ul>
<li>++i：i自增1后再参与其他运算。</li>
<li>–i：i自减1后再参与其他运算。</li>
<li>i++：i参与运算后，在自增1.</li>
<li>i–：i参与运算后，在自减1.</li>
</ul>
</blockquote>
</li>
<li><p>i++，i–要仔细分析。</p>
</li>
<li><p>练习1</p>
</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> i=<span class="number">8</span>;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%d\n"</span>,++i);<span class="comment">//9</span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%d\n"</span>,--i);<span class="comment">//8</span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%d\n"</span>,i++);<span class="comment">//8</span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%d\n"</span>,i--);<span class="comment">//9</span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%d\n"</span>,-i++);<span class="comment">//-8</span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%d\n"</span>,-i--);<span class="comment">//-9</span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%d\n"</span>,i);<span class="comment">//8</span></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>练习2</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> i=<span class="number">5</span>,j=<span class="number">5</span>,p,q;</span><br><span class="line">	p=(i++)+(i++)+(i++);</span><br><span class="line">	q=(++j)+(++j)+(++j);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%d,%d,%d,%d"</span>,p,q,i,j); </span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="赋值运算符与赋值表达式"><a href="#赋值运算符与赋值表达式" class="headerlink" title="赋值运算符与赋值表达式"></a>赋值运算符与赋值表达式</h3><ul>
<li><p>简单赋值运算符和表达式：简单赋值运算符记为”=”。由”=”连接的式子称为赋值表达式。其一般形式为：变量=表达式</p>
</li>
<li><p>例如： x=a+b; w=sin(a)+sin(b)；</p>
</li>
<li><p>赋值运算符的功能是计算表达式的值再赋值左边的变量。</p>
</li>
<li><p>赋值运算符具有右结合性。</p>
</li>
<li><p>类型转换</p>
</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;windows.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	SetConsoleOutputCP(<span class="number">437</span>);</span><br><span class="line">	<span class="keyword">int</span> a,b=<span class="number">232</span>;</span><br><span class="line">	<span class="keyword">float</span> x,y=<span class="number">8.88</span>;</span><br><span class="line">	<span class="keyword">char</span> c1=<span class="string">'k'</span>,c2;</span><br><span class="line">	a=y;<span class="comment">//8</span></span><br><span class="line">	x=b;<span class="comment">//232.0000</span></span><br><span class="line">	a=c1;<span class="comment">//107</span></span><br><span class="line">	c2=b;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%d,%f,%d,%c"</span>,a,x,a,c2);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="复合的赋值运算符"><a href="#复合的赋值运算符" class="headerlink" title="复合的赋值运算符"></a>复合的赋值运算符</h3><ul>
<li>在赋值符<code>=</code>之前加上其他二目运算符即可构成复合赋值符。如+=、-=</li>
<li>复合赋值符能提高编译效率并产生质量较高的目标代码。</li>
</ul>
<hr>
<h3 id="逗号运算符和逗号表达式"><a href="#逗号运算符和逗号表达式" class="headerlink" title="逗号运算符和逗号表达式"></a>逗号运算符和逗号表达式</h3><ul>
<li>在C语言中逗号”,”也是一种运算符，称为逗号运算符。其功能是把两个表达式连接起来组成一个表达式，称为逗号表达式。</li>
<li>其一般形式为：<code>表达式1，表达式2</code></li>
<li>其求值过程是分别求两个表达式的值，并以表达式2的值作为整个逗号表达式的值。</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;windows.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> a=<span class="number">2</span>,b=<span class="number">4</span>,c=<span class="number">6</span>,x,y;</span><br><span class="line">	y=((x=a+b),(b+c));</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"y=%d,x=%d"</span>,y,x);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>对于逗号表达式还要说明两点<blockquote>
<ul>
<li>逗号表达式一般形式中的表达式1和表达式2也可以又是逗号表达式。如<code>(表达式1,(表达式3,表达式2))</code>形成了嵌套情形。因此可以把逗号表达式扩展为以下形式：<code>y=(表达式1,表达式2);</code>，整个逗号表达式的值等于等于表达式n的值。</li>
<li>程序中使用逗号表达式，通常是要分别求逗号表达式内各表达式的值，并不一定要求整个逗号表达式的值。</li>
</ul>
</blockquote>
</li>
</ul>
<h2 id="顺序程序设计"><a href="#顺序程序设计" class="headerlink" title="顺序程序设计"></a>顺序程序设计</h2><ul>
<li><p>从程序的流程来看，程序可以分为三种基本结构：顺序结构、分支结构、循环结构。</p>
<h2 id="C基本语句介绍"><a href="#C基本语句介绍" class="headerlink" title="C基本语句介绍"></a>C基本语句介绍</h2></li>
<li><p>C程序的执行部分是由语句组成的。程序的功能也是由执行语句实现的。</p>
</li>
<li><p>C语句可以分为以下5类：</p>
<ul>
<li>表达式语句</li>
<li>函数调用语句</li>
<li>控制语句</li>
<li>复合语句</li>
<li>空语句</li>
</ul>
</li>
<li><p>表达式语句：表达式语句有表达式+分号组成； <code>x=2;</code></p>
</li>
<li><p>函数调用语句：由函数名和实际参数，加上”;”组成；其一般形式：函数名(实际参数表);<code>printf(&quot;hello world&quot;);</code></p>
</li>
<li><p>复合语句:<code>{x=y+x;x=2;y=2;}</code></p>
</li>
<li><p>控制语句:循环语句(while、do..while,for)</p>
</li>
<li><p>空语句：<code>while(1){...}</code></p>
</li>
<li><p>赋值语句：赋值表达式+分号组成</p>
</li>
<li><p>数据输入输出的概念以及C语言中的实现</p>
<blockquote>
<ul>
<li>所谓输入输出是以计算机为主体而言的。</li>
<li>本章所介绍的是向标准输出设备显示器输出数据的语句。</li>
<li>在C语言中，所有的数据输入/输出都是由库函数完成的。因此都是函数语句。</li>
<li>在使用C语言函数库时，要用到预编译命令<code>#include</code>，将有关“头文件”包含到源文件中。使用标准输入输出库函数时需要用到”stdio.h”文件，因此源文件开头应有以下预编译命令：<code>#include &quot;stdio.h&quot;或#include &lt;stdio.h&gt;</code>，stdio是标准input或output意思。</li>
<li>考虑到printf和scanf函数使用频繁，系统允许在使用这两个函数时不加<code>#include&lt;stdio.h&gt;或#include &quot;stdio.h&quot;</code></li>
</ul>
</blockquote>
<h3 id="putchar函数-字符输出函数"><a href="#putchar函数-字符输出函数" class="headerlink" title="putchar函数(字符输出函数)"></a>putchar函数(字符输出函数)</h3></li>
<li><p>putchar是字符输出函数，其功能是在显示器上输出单个字符。</p>
</li>
<li><p>其一般形式为 putchar(字符变量)</p>
</li>
<li><p>例如：putchar(‘a’);puthchar(x);</p>
</li>
<li><p>对于控制字符则执行控制功能，不在屏幕上显示。 </p>
</li>
<li><p>使用本函数之前必须要用文件包含命令<code>#include &quot;stdio.h&quot;或#include &lt;stdio.h&gt;</code></p>
</li>
<li><p>练习1：输出单个字符</p>
</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">char</span> a=<span class="string">'B'</span>,b=<span class="string">'o'</span>,c=<span class="string">'k'</span>;</span><br><span class="line">	<span class="built_in">putchar</span>(a);<span class="built_in">putchar</span>(b);<span class="built_in">putchar</span>(b);<span class="built_in">putchar</span>(c);<span class="built_in">putchar</span>(<span class="string">'\t'</span>);</span><br><span class="line">	<span class="built_in">putchar</span>(a);<span class="built_in">putchar</span>(b);</span><br><span class="line">	<span class="built_in">putchar</span>(<span class="string">'\n'</span>);</span><br><span class="line">	<span class="built_in">putchar</span>(b);<span class="built_in">putchar</span>(c);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="getChar函数-键盘输入函数"><a href="#getChar函数-键盘输入函数" class="headerlink" title="getChar函数(键盘输入函数)"></a>getChar函数(键盘输入函数)</h3><ul>
<li>getchar函数的功能是从键盘上输入一个字符。</li>
<li>其一般形式是：getchar();</li>
<li>通常把输入的字符赋予一个字符变量，构成赋值语句。如<code>char c;c=getchar();</code>;</li>
<li>练习1：从键盘输入一个字符并输出。</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">char</span> c;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"input a character\n"</span>);</span><br><span class="line">	c=getchar();</span><br><span class="line">	<span class="built_in">putchar</span>(c);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="printf函数（输出格式函数）"><a href="#printf函数（输出格式函数）" class="headerlink" title="printf函数（输出格式函数）"></a>printf函数（输出格式函数）</h3><ul>
<li>printf函数称为格式输出函数，其关键字最末一个字母f即可“格式（format）之意”。其功能是按照用户指定的格式，把指定的数据显示到显示器屏幕上。</li>
<li>printf函数调用的一般形式<blockquote>
<ul>
<li>printf函数一个标准库函数，它的函数原型在头文件”stdio.h”。但作为一个特例，允许使用printf函数而不需要导入”stdio.h”文件</li>
<li>一般形式为：printf(“格式控制字符串”,输出表列);</li>
<li>格式字符串：%d表示按十进制整型输出。%ld按十进制长整型输出。%c表示按字符型输出。</li>
<li>非格式字符串按原样输出。</li>
</ul>
</blockquote>
</li>
</ul>
<p><img src="https://i.loli.net/2019/12/03/LsflcXKponN9geW.png" alt="1575378060_1_.png"></p>
<ul>
<li>练习</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> a=<span class="number">88</span>,b=<span class="number">89</span>;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%d %d\n"</span>,a,b);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%d,%d\n"</span>,a,b);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%c,%c\n"</span>,a,b);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"a=%d,b=%d\n"</span>,a,b);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>练习</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> a=<span class="number">15</span>;</span><br><span class="line">	<span class="keyword">float</span> b=<span class="number">123.1234567</span>;</span><br><span class="line">	<span class="keyword">double</span> c=<span class="number">12345678.1234567</span>;</span><br><span class="line">	<span class="keyword">char</span> d=<span class="string">'p'</span>;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"a=%d,%5d,%o,%x\n"</span>,a,a,a,a);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"b=%f,%lf,%5.4lf,%e\n"</span>,b,b,b,b);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"c=%lf,%f,%8.4lf\n"</span>,c,c,c);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"d=%c,%8c\n"</span>,d,d);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="scanf函数（格式输入函数）"><a href="#scanf函数（格式输入函数）" class="headerlink" title="scanf函数（格式输入函数）"></a>scanf函数（格式输入函数）</h3><ul>
<li>scanf函数称为格式输入函数，即按用户指定的格式从键盘上把数据输入到指定的变量中。</li>
<li>练习1 输入三角形的三边长，求三角形面积。</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;math.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">float</span> a,b,c,s,area;<span class="comment">//a,b,c为三边长，s为周长，area为面积</span></span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">"%f,%f,%f"</span>,&amp;a,&amp;b,&amp;c);</span><br><span class="line">	s=<span class="number">1.0</span>/<span class="number">2</span>*(a+b+c);</span><br><span class="line">	area=<span class="built_in">sqrt</span>(s*(s-a)*(s-b)*(s-c)); </span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"a=%7.2f,b=%7.2f,c=%7.2f,s=%7.2f\n"</span>,a,b,c,s);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"area=%7.2f\n"</span>,area);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>练习2：求一元二次方程的根</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;math.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">float</span> a,b,c,disc,x1,x2,p,q;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"input number a,b,c!\n"</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">"a=%f,b=%f,c=%f"</span>,&amp;a,&amp;b,&amp;c); </span><br><span class="line">	disc=b*b<span class="number">-4</span>*a*c;</span><br><span class="line">	p=-b/(<span class="number">2</span>*a);</span><br><span class="line">	q=<span class="built_in">sqrt</span>(disc)/(<span class="number">2</span>*a);</span><br><span class="line">	x1=p+q;</span><br><span class="line">	x2=p-q;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"\nx1=%5.2f,x2=%5.2f"</span>,x1,x2);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="分支结构程序"><a href="#分支结构程序" class="headerlink" title="分支结构程序"></a>分支结构程序</h2><h3 id="关系运算符和表达式"><a href="#关系运算符和表达式" class="headerlink" title="关系运算符和表达式"></a>关系运算符和表达式</h3><ul>
<li>关系运算符：在程序中经常需要比较两个两的大小关系，以决定程序下一步的工作。比较两个两的运算符称为关系运算符。</li>
<li><code>C</code>语言运算符的优先级<blockquote>
<ul>
<li><code>()</code>（小括号）、<code>[]</code>（数组下标）、<code>.</code>（结构成员）、<code>-&gt;</code>（指针型结构成员）</li>
<li><code>!</code>（逻辑非）、<code>.</code>（位取反）、<code>-</code>（负号）、<code>++</code>（加1）、<code>--</code>（减1）、<code>&amp;</code>（变量地址）</li>
<li><code>*</code>（指针所指内容）、<code>type</code>（函数说明）、<code>sizeof</code>（长度计算）</li>
<li><code>*</code>（乘）、<code>/</code>（除）、<code>%</code>（取模）</li>
<li><code>+</code>（加）、<code>-</code>（减）</li>
<li><code>&lt;&lt;</code>（左移）、<code>&gt;&gt;</code>（右移）</li>
<li><code>&lt;</code>（小于）、<code>&gt;</code>（大于）、<code>&lt;=</code>（小于等于）、<code>&gt;=</code>（大于等于）</li>
<li><code>==</code>（等于）、<code>!=</code>（不等于）</li>
<li><code>&amp;</code>（位与）</li>
<li>…</li>
</ul>
</blockquote>
</li>
<li>优先级从下到上逐渐变高。</li>
<li>在C语言中有以下关系运算符</li>
</ul>
<table>
<thead>
<tr>
<th>符号</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>&lt;</td>
<td>小于</td>
</tr>
<tr>
<td>&lt;=</td>
<td>小于或等于</td>
</tr>
<tr>
<td>&gt;</td>
<td>大于</td>
</tr>
<tr>
<td>&gt;=</td>
<td>大于或等于</td>
</tr>
<tr>
<td>==</td>
<td>等于</td>
</tr>
<tr>
<td>!=</td>
<td>不等于</td>
</tr>
</tbody></table>
<ul>
<li><p>关系运算符都是双目运算符，结合性均为左结合。关系运算符的优先级低于算数运算符的优先级，高于赋值运算符。</p>
</li>
<li><p>在六个关系运算符中，前四个<code>&lt;</code>、<code>&lt;=</code>、<code>&gt;</code>、<code>&gt;=</code>的优先级相同，高于<code>==</code>和<code>!=</code>，<code>==</code>和<code>!=</code>优先级相同。</p>
</li>
<li><p>关系运算符的一般形式为：表达式 关系运算符 表达式</p>
</li>
<li><p>例如： a+b&gt;c-d; x.3/2;都是合法的关系运算符表达式。</p>
</li>
<li><p>关系运算符也可以出现嵌套的情况；例如 x&gt;(y&gt;z)；a!=(m==n)等都是合法的关系运算符表达式.</p>
</li>
<li><p>关系表达式的值是真还是假，用“1”和“0”表示。</p>
</li>
<li><p>如5&gt;3的值为真是1；（a=1）&gt; （a=3）的值为假，是0；</p>
</li>
<li><p>练习1</p>
</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"stdio.h"</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">char</span> c=<span class="string">'k'</span>;</span><br><span class="line">	<span class="keyword">int</span> i=<span class="number">1</span>,j=<span class="number">2</span>,k=<span class="number">3</span>;</span><br><span class="line">	<span class="keyword">float</span> x=<span class="number">3e+5</span>,y=<span class="number">0.85</span>;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%d,%d\n"</span>,<span class="string">'a'</span>+<span class="number">5</span>&lt;c,-i<span class="number">-2</span>*j &gt;= k+<span class="number">1</span>);<span class="comment">//1 0</span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%d,%d\n"</span>,<span class="number">1</span>&lt;j&lt;<span class="number">5</span>,x<span class="number">-5.25</span>&lt;=x+y);<span class="comment">//1  1</span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%d,%d"</span>,i+j+k==<span class="number">-2</span>*j,k==j==i+<span class="number">5</span>);<span class="comment">// 0 0</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="逻辑运算符和表达式"><a href="#逻辑运算符和表达式" class="headerlink" title="逻辑运算符和表达式"></a>逻辑运算符和表达式</h3><ul>
<li><p>C语言提供了三种逻辑运算符：<code>&amp;&amp;</code>：与运算符；<code>||</code>：或运算符；<code>!</code>非运算符。</p>
</li>
<li><p>与运算符<code>&amp;&amp;</code>和或运算符<code>||</code>均为双目运算符，具有左结合性。非运算符<code>!</code>为单目运算符，具有右结合性。</p>
</li>
<li><p>逻辑运算符和其他运算符的的优先级关系如下：</p>
<blockquote>
<ul>
<li><code>!</code>—-&gt;<code>&amp;&amp;</code> —-&gt; <code>||</code></li>
</ul>
</blockquote>
</li>
<li><p>与运算符：同时为真即真，有假即假</p>
</li>
<li><p>或运算符：有真即真，全假为假</p>
</li>
<li><p>非运算符：与原来的相反。</p>
</li>
<li><p>逻辑表达式</p>
<blockquote>
<ul>
<li>一般形式： 表达式 逻辑运算符 表达式</li>
<li>其中的表达式可以又是逻辑表达式 ，从而组成了嵌套的情形。</li>
<li>例如（a&amp;&amp;v）&amp;&amp;c 具有左结合性。 </li>
</ul>
</blockquote>
</li>
<li><p>练习1：</p>
</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"stdio.h"</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">char</span> c=<span class="string">'k'</span>;</span><br><span class="line">	<span class="keyword">int</span> i=<span class="number">1</span>,j=<span class="number">2</span>,k=<span class="number">3</span>;</span><br><span class="line">	<span class="keyword">float</span> x=<span class="number">3e+5</span>,y=<span class="number">0.85</span>;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%d,%d\n"</span>,!x*!y,!!!x);<span class="comment">//0 0</span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%d,%d\n"</span>,x||i&amp;&amp;j<span class="number">-3</span>,i&lt;j&amp;&amp;x&lt;y);<span class="comment">//1 0</span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%d,%d\n"</span>,i==<span class="number">5</span>&amp;&amp;c&amp;&amp;(j=<span class="number">8</span>),x+y||x+j+k);<span class="comment">//0 1</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="if语句"><a href="#if语句" class="headerlink" title="if语句"></a>if语句</h3><ul>
<li>用<code>if</code>语句可以构成分支结构。它根据给定的条件进行判断，以决定执行某个分支程序段。用C语言的if语句有三种基本形式。</li>
<li>第一种形式为基本形式：<blockquote>
<ul>
<li><code>if(表达式) 语句</code></li>
<li>其语义是：如果表达式的值为真，则执行其后的语句，否则不执行该语句。其过程为下图：</li>
</ul>
</blockquote>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">startID=&gt;start: 开始框</span><br><span class="line">inputoutputID=&gt;inputoutput: 输入输出框</span><br><span class="line">operationID=&gt;operation: 语句</span><br><span class="line">conditionID=&gt;condition: 表达式</span><br><span class="line">yes=&gt;operation: 语句</span><br><span class="line"></span><br><span class="line">endID=&gt;end: 结束框</span><br><span class="line"></span><br><span class="line">startID-&gt;inputoutputID</span><br><span class="line">inputoutputID-&gt;operationID</span><br><span class="line">operationID-&gt;conditionID</span><br><span class="line">conditionID(yes,bottom)-&gt;yes-&gt;endID</span><br><span class="line">conditionID(no)-&gt;endID</span><br></pre></td></tr></table></figure>

<ul>
<li>练习1：输入两个数，并输出最大的值</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"stdio.h"</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> a,b,max;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"\ninput two number:\n"</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">"%d,%d"</span>,&amp;a,&amp;b);</span><br><span class="line">	max=a;</span><br><span class="line">	<span class="keyword">if</span>(max&lt;b)max=b;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"max=%d"</span>,max);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>第二种形式为基本形式：<blockquote>
<ul>
<li>第二种形式：if-else</li>
<li>if(表达式) 语句1;else 语句2;</li>
<li>其过程为下图：</li>
</ul>
</blockquote>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">startID=&gt;start: 开始框</span><br><span class="line">inputoutputID=&gt;inputoutput: 输入输出框</span><br><span class="line">operationID=&gt;operation: 语句</span><br><span class="line">conditionID=&gt;condition: 表达式</span><br><span class="line">true=&gt;operation: 语句1</span><br><span class="line">error=&gt;operation: 语句2</span><br><span class="line">endID=&gt;end: 结束框</span><br><span class="line"></span><br><span class="line">startID-&gt;inputoutputID-&gt;operationID-&gt;conditionID</span><br><span class="line">conditionID(yes)-&gt;true-&gt;endID</span><br><span class="line">conditionID(no,right)-&gt;error-&gt;endID</span><br></pre></td></tr></table></figure>

<ul>
<li>练习2：输入两个数，并输出最大的值</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"stdio.h"</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> a,b,max;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"\ninput two number:\n"</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">"%d,%d"</span>,&amp;a,&amp;b);</span><br><span class="line">	<span class="keyword">if</span>(a&gt;b)&#123;</span><br><span class="line">		max=a;</span><br><span class="line">	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">		max=b;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"max=%d"</span>,max);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>第三种形式为<code>if-else-if</code>形式<blockquote>
<ul>
<li>当出现多个分支时选择当前形式比较合适。</li>
<li>其一般形式： <code>if(表达式1) 语句1;else if(表达式2) 语句2;else 语句3;</code></li>
<li>流程图如下：</li>
</ul>
</blockquote>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">startID=&gt;start: 开始框</span><br><span class="line">inputoutputID=&gt;inputoutput: 输入输出框</span><br><span class="line">operationID=&gt;operation: 语句</span><br><span class="line">conditionID=&gt;condition: 表达式</span><br><span class="line">true1=&gt;operation: 语句1</span><br><span class="line">true2=&gt;operation: 语句2</span><br><span class="line">true3=&gt;operation: 语句3</span><br><span class="line">error=&gt;condition: 表达式</span><br><span class="line">error2=&gt;condition: 表达式</span><br><span class="line">endID=&gt;end: 结束框</span><br><span class="line"></span><br><span class="line">startID-&gt;inputoutputID-&gt;operationID-&gt;conditionID</span><br><span class="line">conditionID(yes)-&gt;true1-&gt;endID</span><br><span class="line">conditionID(no,right)-&gt;error</span><br><span class="line">error(yes)-&gt;true2-&gt;endID</span><br><span class="line">error(no,right)-&gt;error2</span><br><span class="line">error2(yes)-&gt;true3-&gt;endID</span><br></pre></td></tr></table></figure>

<ul>
<li>练习1</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"stdio.h"</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">char</span> c;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"input a character: "</span>);</span><br><span class="line">	c=getchar();</span><br><span class="line">	<span class="keyword">if</span>(c&lt;<span class="number">32</span>)<span class="built_in">printf</span>(<span class="string">"this is a control character\n"</span>);</span><br><span class="line">	<span class="keyword">else</span> <span class="keyword">if</span>(c&gt;=<span class="string">'0'</span>&amp;&amp;c&lt;=<span class="string">'9'</span>)<span class="built_in">printf</span>(<span class="string">"this is a digit\n"</span>);</span><br><span class="line">	<span class="keyword">else</span> <span class="keyword">if</span>(c&gt;=<span class="string">'A'</span>&amp;&amp;c&lt;=<span class="string">'Z'</span>)<span class="built_in">printf</span>(<span class="string">"this is a capital letter"</span>);</span><br><span class="line">	<span class="keyword">else</span> <span class="keyword">if</span>(c&gt;=<span class="string">'a'</span>&amp;&amp;c&lt;=<span class="string">'z'</span>)<span class="built_in">printf</span>(<span class="string">"this is a small letter\n"</span>);</span><br><span class="line">	<span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">"thi is an other character\n"</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>在使用if语句中还应该注意以下问题：</p>
<blockquote>
<ul>
<li>在三种形式的if语句中，在if关键字之后均为表达式。该表达式通常是逻辑表达式或关系表达式，但也可以是其他表达式，如赋值表达式等，甚至可以是一个变量。</li>
<li>例如： if(a=5)语句;  if(b) 语句; 都是允许的。</li>
<li>如果if后面有多个语句，需要用<code>{}</code>括起来。</li>
</ul>
</blockquote>
</li>
<li><p>补充例题1</p>
</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="comment">/***</span></span><br><span class="line"><span class="comment">* 输入一个分数score </span></span><br><span class="line"><span class="comment">* score&lt;60 输出D </span></span><br><span class="line"><span class="comment">* ...</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> score;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"please input a score:\n"</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;score);</span><br><span class="line">	<span class="keyword">if</span>(score&lt;<span class="number">60</span>)&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"E"</span>);</span><br><span class="line">	&#125;<span class="keyword">else</span> <span class="keyword">if</span>(score&lt;=<span class="number">75</span>)&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"D"</span>);</span><br><span class="line">	&#125;<span class="keyword">else</span> <span class="keyword">if</span>(score&lt;=<span class="number">80</span>)&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"C"</span>);</span><br><span class="line">	&#125;<span class="keyword">else</span> <span class="keyword">if</span>(score&lt;=<span class="number">90</span>)&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"B"</span>);</span><br><span class="line">	&#125;<span class="keyword">else</span> <span class="keyword">if</span>(score&lt;=<span class="number">100</span>)&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"A"</span>);</span><br><span class="line">	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"输入有误"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>补充例题2</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* 输入三个数，要求按小到大输出 </span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> a,b,c,t;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"please input three numbers:\n"</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>,&amp;a,&amp;b,&amp;c);</span><br><span class="line">	<span class="keyword">if</span>(a&gt;b)&#123;</span><br><span class="line">		t=a;</span><br><span class="line">		a=b;</span><br><span class="line">		b=t;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span>(a&gt;c)&#123;</span><br><span class="line">		t=a;</span><br><span class="line">		a=c;</span><br><span class="line">		c=a;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span>(b&gt;c)&#123;</span><br><span class="line">		t=b;</span><br><span class="line">		b=c;</span><br><span class="line">		c=t;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"从小到大输出三个数：%d,%d,%d"</span>,a,b,c);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>if语句的嵌套</p>
<blockquote>
<ul>
<li>当if语句中的执行语句又是if语句时，则构成了if语句的嵌套。</li>
<li>其一般形式为</li>
</ul>
</blockquote>
</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">if</span>(<span class="number">1</span>)&#123;</span><br><span class="line">	<span class="keyword">if</span>(<span class="number">2</span>) prntf(<span class="string">"2"</span>);</span><br><span class="line">	<span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">"3"</span>);</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(<span class="number">2</span>) prntf(<span class="string">"2"</span>);</span><br><span class="line">	<span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">"3"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<ul>
<li>在嵌套内的if语句可能又是if-else型，这将会出现多个if和多个else重叠的情况，这是需要特别注意if和else的配对问题。</li>
<li>else与它最近的if配对。</li>
<li>例题</li>
</ul>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> a,b;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"please input A,B："</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;a,&amp;b);</span><br><span class="line">	<span class="keyword">if</span>(a!=b)&#123;</span><br><span class="line">		<span class="keyword">if</span>(a&gt;b)&#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">"A&gt;B\n"</span>);</span><br><span class="line">		&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">"A&lt;B\n"</span>);	</span><br><span class="line">		&#125; </span><br><span class="line">	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"A=B\n"</span>);</span><br><span class="line">	&#125; </span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="条件运算符"><a href="#条件运算符" class="headerlink" title="条件运算符"></a>条件运算符</h3><ul>
<li><p>条件运算符为<code>?和:</code>，他是一个三目运算符，即有三个参与运算的量。</p>
</li>
<li><p>由条件运算符组成条件表达式的一般形式为：<code>表达式1?表达式2：:表达式3</code>；</p>
</li>
<li><p>其求值规则是：如果表达式的值为真，则执行表达式2的值，否知执行表达式3的值。</p>
</li>
<li><p>条件表达式通常运用于赋值语句之中。</p>
</li>
<li><p>使用条件运算符时，还应注意一下几点：</p>
<blockquote>
<ul>
<li>条件运算符的优先级低于关系运算符和算数运算符，但高于赋值运算符。</li>
<li>条件运算符?和:是一对运算符，不能拆开单独使用</li>
<li>条件运算符的结合方向是自右向左。</li>
</ul>
</blockquote>
</li>
<li><p>练习1</p>
</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> max,a,b;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"\n input two numbers： "</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">"%d,%d"</span>,&amp;a,&amp;b);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"max=%d"</span>,a&gt;b?a:b);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>练习2</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="comment">/***</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">*输入一个字符，判断是否是大写字符，如果是，将大写字符转换成</span></span><br><span class="line"><span class="comment">* 小写字母；如果不是，不转换。然后输出 </span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">**/</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">char</span> ch;</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">"%c"</span>,&amp;ch);</span><br><span class="line">	ch=(ch&gt;=<span class="string">'A'</span> &amp;&amp; ch&lt;=<span class="string">'Z'</span>)?ch+<span class="number">32</span>:ch;</span><br><span class="line">	<span class="built_in">putchar</span>(ch); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Switch语句"><a href="#Switch语句" class="headerlink" title="Switch语句"></a>Switch语句</h3><ul>
<li>C语言还提供了另一种用于多分支选择的<code>switch</code>语句。其一般形式为</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">switch</span>(表达式)&#123;</span><br><span class="line">	<span class="keyword">case</span> 常量表达式<span class="number">1</span>: 语句<span class="number">1</span>;</span><br><span class="line">	<span class="keyword">case</span> 常量表达式<span class="number">2</span>: 语句<span class="number">2</span>;</span><br><span class="line">	...</span><br><span class="line">	<span class="keyword">case</span> 常量表达式n: 语句n;</span><br><span class="line">	<span class="keyword">default</span> 语句n+<span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>其语义是：计算表达式的值。并逐个与其后面的常量表达式的值相比较，当表达式的值与某个常量表达式的值相等时，即执行其后的语句，然后不再进行判断，继续执行后面所有case语句。如表达式的值与所有case的值不相等时，则执行default后面的语句。</p>
</li>
<li><p>练习1 </p>
</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> a;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"input integer numbers: "</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;a);</span><br><span class="line">	<span class="keyword">switch</span>(a)&#123;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">1</span>:<span class="built_in">printf</span>(<span class="string">"Monday\n"</span>);</span><br><span class="line">		<span class="keyword">case</span> <span class="number">2</span>:<span class="built_in">printf</span>(<span class="string">"Tuesay\n"</span>);</span><br><span class="line">		<span class="keyword">case</span> <span class="number">3</span>:<span class="built_in">printf</span>(<span class="string">"Wednesday\n"</span>);</span><br><span class="line">		<span class="keyword">case</span> <span class="number">4</span>:<span class="built_in">printf</span>(<span class="string">"Thursdau\n"</span>);</span><br><span class="line">		<span class="keyword">case</span> <span class="number">5</span>:<span class="built_in">printf</span>(<span class="string">"Friday\n"</span>);</span><br><span class="line">		<span class="keyword">case</span> <span class="number">6</span>:<span class="built_in">printf</span>(<span class="string">"Saturday\n"</span>);</span><br><span class="line">		<span class="keyword">case</span> <span class="number">7</span>:<span class="built_in">printf</span>(<span class="string">"Sunday\n"</span>);</span><br><span class="line">		<span class="keyword">default</span>: <span class="built_in">printf</span>(<span class="string">"error!\n"</span>); </span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>存在一个问题，就是输入3之后，后面的语句也跟着输出。</li>
<li>练习2：对上述问题进行改进</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> a;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"input integer numbers: "</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;a);</span><br><span class="line">	<span class="keyword">switch</span>(a)&#123;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">1</span>:<span class="built_in">printf</span>(<span class="string">"Monday\n"</span>);<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">2</span>:<span class="built_in">printf</span>(<span class="string">"Tuesay\n"</span>);<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">3</span>:<span class="built_in">printf</span>(<span class="string">"Wednesday\n"</span>);<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">4</span>:<span class="built_in">printf</span>(<span class="string">"Thursdau\n"</span>);<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">5</span>:<span class="built_in">printf</span>(<span class="string">"Friday\n"</span>);<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">6</span>:<span class="built_in">printf</span>(<span class="string">"Saturday\n"</span>);<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">7</span>:<span class="built_in">printf</span>(<span class="string">"Sunday\n"</span>);<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">default</span>: <span class="built_in">printf</span>(<span class="string">"error!\n"</span>); </span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>在使用<code>swicth</code>时还应该注意以下几点：<blockquote>
<ul>
<li>在case后的各常量表达式的值不能相同，否则会出现错误；</li>
<li>在case后，允许有多个语句，可以不同<code>{}</code>括起来；</li>
<li>各case和default子句的先后顺序可以变动，而不会影响程序结果；</li>
<li>defaule语句可以省略不同； </li>
</ul>
</blockquote>
</li>
<li>练习1</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//输入三个整数，输出最大数和最小数 </span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> a,b,c,min,max;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"input three numbers: "</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>,&amp;a,&amp;b,&amp;c);</span><br><span class="line">	<span class="keyword">if</span>(a&gt;b)&#123;</span><br><span class="line">		max=a;</span><br><span class="line">		min=b;</span><br><span class="line">	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">		max=b;</span><br><span class="line">		min=a;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span>(max&lt;c)&#123;</span><br><span class="line">		max=c;</span><br><span class="line">	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">		<span class="keyword">if</span>(min&gt;c)&#123;</span><br><span class="line">			min=c;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125; </span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"max=%d,min=%d\n"</span>,max,min);</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>练习2</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="comment">//模拟计算器</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">float</span> a,b;</span><br><span class="line">	<span class="keyword">char</span> c;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"input expression:a+(+,-,*,/)b\n"</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">"%f%c%f"</span>,&amp;a,&amp;c,&amp;b);</span><br><span class="line">	<span class="keyword">switch</span>(c)&#123;</span><br><span class="line">		<span class="keyword">case</span> <span class="string">'+'</span>:<span class="built_in">printf</span>(<span class="string">"%f%c%f=%f\n"</span>,a,c,b,a+b);<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="string">'-'</span>:<span class="built_in">printf</span>(<span class="string">"%f%c%f=%f\n"</span>,a,c,b,a-b);<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="string">'*'</span>:<span class="built_in">printf</span>(<span class="string">"%f%c%f=%f\n"</span>,a,c,b,a*b);<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="string">'/'</span>:<span class="built_in">printf</span>(<span class="string">"%f%c%f=%f\n"</span>,a,c,b,a/b);<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">default</span>: <span class="built_in">printf</span>(<span class="string">"input error\n"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>练习3</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="comment">//输入一个年份，判断是平年还是闰年</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">int</span> year;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"input year: \n"</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;year);</span><br><span class="line">	<span class="keyword">if</span>(year%<span class="number">4</span>==<span class="number">0</span> &amp;&amp; year%<span class="number">100</span>!=<span class="number">0</span> || year%<span class="number">400</span>==<span class="number">0</span>)&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"闰年"</span>);</span><br><span class="line">	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"平年"</span>); </span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>练习4：公司对运输公司计算运费</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123; </span><br><span class="line">	<span class="keyword">int</span> s,c;<span class="comment">//s-&gt;距离 ;c 表达式常量 </span></span><br><span class="line">	<span class="keyword">double</span> d,p,w,f;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"input s:\n"</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">"%d,%lf,%lf"</span>,&amp;s,&amp;p,&amp;w);</span><br><span class="line">	<span class="keyword">if</span>(s&gt;=<span class="number">3000</span>)&#123;</span><br><span class="line">		c=<span class="number">12</span>;</span><br><span class="line">	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">		c=s/<span class="number">250</span>;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%d\n"</span>,c);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">switch</span>(c)&#123;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">0</span>:d=<span class="number">0</span>;<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">1</span>:d=<span class="number">2</span>;<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">		<span class="keyword">case</span> <span class="number">3</span>:d=<span class="number">5</span>;<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">		<span class="keyword">case</span> <span class="number">5</span>:</span><br><span class="line">		<span class="keyword">case</span> <span class="number">6</span>:</span><br><span class="line">		<span class="keyword">case</span> <span class="number">7</span>:d=<span class="number">8</span>;<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">8</span>:</span><br><span class="line">		<span class="keyword">case</span> <span class="number">9</span>:</span><br><span class="line">		<span class="keyword">case</span> <span class="number">10</span>:</span><br><span class="line">		<span class="keyword">case</span> <span class="number">11</span>:d=<span class="number">10</span>;<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">12</span>:d=<span class="number">15</span>;<span class="keyword">break</span>;	</span><br><span class="line">	&#125; </span><br><span class="line">	f=p*w*s*(<span class="number">1</span>-d/<span class="number">100</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%15.4lf"</span>,f);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>练习5 :一个整数，它加上一百后是一个完全平方数，再加上168后又是一个整数，请问该数字是什么</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;math.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MAXSize 100000</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">long</span> <span class="keyword">int</span> i,x,y;</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">-100</span>;i&lt;MAXSize;i++)&#123;</span><br><span class="line">		x=<span class="built_in">sqrt</span>(i+<span class="number">100</span>);</span><br><span class="line">		y=<span class="built_in">sqrt</span>(i+<span class="number">268</span>);	</span><br><span class="line">		<span class="keyword">if</span>((x*x==i+<span class="number">100</span>) &amp;&amp;(y*y==i+<span class="number">268</span>))&#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">"%ld\t"</span>,i);</span><br><span class="line">		&#125;	</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>练习6：输入某年某月某日，判断是第几天<blockquote>
<p>解法1</p>
</blockquote>
</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> year,month,day;<span class="comment">//年月日</span></span><br><span class="line">	<span class="keyword">int</span> sum=<span class="number">0</span>,i,j;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"请分别输入年，月，日：\n"</span>); </span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">"%d,%d,%d"</span>,&amp;year,&amp;month,&amp;day); </span><br><span class="line">	<span class="keyword">if</span>(month==<span class="number">1</span>)&#123;</span><br><span class="line">		sum=sum+day;</span><br><span class="line">	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">		<span class="keyword">for</span>(j=<span class="number">1</span>;j&lt;month;j++)&#123;</span><br><span class="line">			<span class="keyword">switch</span>(j)&#123;</span><br><span class="line">				<span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">				<span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">				<span class="keyword">case</span> <span class="number">5</span>:</span><br><span class="line">				<span class="keyword">case</span> <span class="number">7</span>:</span><br><span class="line">				<span class="keyword">case</span> <span class="number">8</span>:</span><br><span class="line">				<span class="keyword">case</span> <span class="number">10</span>:</span><br><span class="line">				<span class="keyword">case</span> <span class="number">12</span>:i=<span class="number">1</span>;<span class="keyword">break</span>;</span><br><span class="line">				<span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">				<span class="keyword">case</span> <span class="number">6</span>:</span><br><span class="line">				<span class="keyword">case</span> <span class="number">9</span>:</span><br><span class="line">				<span class="keyword">case</span> <span class="number">11</span>:i=<span class="number">0</span>;<span class="keyword">break</span>;</span><br><span class="line">				<span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">					<span class="keyword">if</span>((year%<span class="number">4</span>==<span class="number">0</span>&amp;&amp;year%<span class="number">100</span>!=<span class="number">0</span>)||(year%<span class="number">400</span>==<span class="number">0</span>))&#123;</span><br><span class="line">						i=<span class="number">-1</span>;</span><br><span class="line">					&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">						i=<span class="number">-2</span>;</span><br><span class="line">					&#125; </span><br><span class="line">					<span class="keyword">break</span>;</span><br><span class="line">				<span class="keyword">default</span>: <span class="built_in">printf</span>(<span class="string">"input error"</span>);</span><br><span class="line">			&#125;</span><br><span class="line">			sum = sum + <span class="number">30</span>+i;</span><br><span class="line">		&#125;</span><br><span class="line">		sum =sum+day;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%d年%d月%d日是本年第%d天"</span>,year,month,day,sum);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>解法2</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> year,month,day;<span class="comment">//年月日</span></span><br><span class="line">	<span class="keyword">int</span> sum=<span class="number">0</span>,i,j;</span><br><span class="line">	<span class="keyword">int</span> data[<span class="number">12</span>]=&#123;<span class="number">31</span>,<span class="number">28</span>,<span class="number">31</span>,<span class="number">30</span>,<span class="number">31</span>,<span class="number">30</span>,<span class="number">31</span>,<span class="number">31</span>,<span class="number">30</span>,<span class="number">31</span>,<span class="number">30</span>,<span class="number">31</span>&#125;;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"请分别输入年，月，日：\n"</span>); </span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">"%d,%d,%d"</span>,&amp;year,&amp;month,&amp;day); </span><br><span class="line">	<span class="keyword">if</span>((year%<span class="number">4</span>==<span class="number">0</span> &amp;&amp; year%<span class="number">100</span>!=<span class="number">0</span>)|| (year%<span class="number">400</span>==<span class="number">0</span>))&#123;</span><br><span class="line">		data[<span class="number">1</span>]=data[i]+<span class="number">1</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;month;i++)&#123;</span><br><span class="line">		sum += data[i];</span><br><span class="line">	&#125;</span><br><span class="line">	sum+=day;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%d年%d月%d日是本年第%d天"</span>,year,month,day,sum);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="循环控制结构程序"><a href="#循环控制结构程序" class="headerlink" title="循环控制结构程序"></a>循环控制结构程序</h2><ul>
<li><p>什么事循环？</p>
</li>
<li><p>为什么要使用循环？</p>
<blockquote>
<p>循环结构是程序中一种很重要的结构。其特点是：在给定条件成立时，反复执行某程序段，直到条件不成为止。给定的条件称为循环条件，反复执行的程序段称为循环体。C语言中提供了多种循环语句，可以组成各种不同形式的循环结构。</p>
</blockquote>
</li>
<li><p>用goto语句和if语句构成循环体。</p>
</li>
<li><p>用while语句</p>
</li>
<li><p>用do-while语句</p>
</li>
<li><p>用fo语句</p>
<h3 id="goto语句以及goto语句构成循环"><a href="#goto语句以及goto语句构成循环" class="headerlink" title="goto语句以及goto语句构成循环"></a>goto语句以及goto语句构成循环</h3></li>
<li><p>goto语句是一种无条件转移语句，与<code>BASIC</code>中的<code>goto</code>语句相似。</p>
</li>
<li><p>goto语句的使用格式为：</p>
<blockquote>
<p>goto 语句标号;</p>
</blockquote>
</li>
<li><p>其中标号是一个有效的标识符，这个标号符加上一个“:”一起出现在函数内某处，执行goto语句后，程序将跳转到该标号处并执行其后的语句，另外标号必须与goto语句同处于一个函数中，但可以不再同一个循环层中。通常goto语句与if语句连用，当满足某一个条件时，程序将跳转到该标号处运行。</p>
</li>
<li><p>但是注意：goto语句通常不用，主要是因为它将使程序层次不清，但在多层嵌套退出时，用goto语句则比较合理。</p>
</li>
<li><p>练习1 用goto和if语句构成循环体，计算1+2+…100的值</p>
</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="comment">//计算1+2+...+100 </span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> i,sum=<span class="number">0</span>;</span><br><span class="line">	i=<span class="number">1</span>;</span><br><span class="line">	loop:<span class="keyword">if</span>(i&lt;=<span class="number">100</span>)&#123;</span><br><span class="line">		sum=sum+i;</span><br><span class="line">		i++;</span><br><span class="line">		<span class="keyword">goto</span> loop;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%d\n"</span>,sum);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="while语句"><a href="#while语句" class="headerlink" title="while语句"></a>while语句</h3><ul>
<li>while语句的一般形式为：<blockquote>
<p><code>while(表达式) 语句;</code></p>
</blockquote>
</li>
<li>其中表达式是循环条件，语句是循环体。</li>
<li>while语句的语义是：计算表达式的值，当值为真（非0）时，执行循环体语句。其执行过程如下图所示：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">st=&gt;start: Start</span><br><span class="line">op=&gt;operation: Your Operation</span><br><span class="line">cond=&gt;condition: 表达式</span><br><span class="line">e=&gt;end</span><br><span class="line"></span><br><span class="line">st-&gt;cond</span><br><span class="line">cond(yes,bottom)-&gt;op-&gt;e</span><br><span class="line">cond(no)-&gt;e</span><br></pre></td></tr></table></figure>

<ul>
<li>注意：如果表达式的值一开始就是0，则语句一次也不会被执行。</li>
<li>练习1 计算1+2+3+…100的值</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> sum=<span class="number">0</span>,i=<span class="number">1</span>;</span><br><span class="line">	<span class="keyword">while</span>(i&lt;=<span class="number">100</span>)&#123;</span><br><span class="line">		sum+=i;</span><br><span class="line">		i++;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%d"</span>,sum);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>练习2：传说中的死循环</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> sum=<span class="number">0</span>,i=<span class="number">1</span>;</span><br><span class="line">	<span class="keyword">while</span>(i&lt;=<span class="number">100</span>)<span class="comment">//&#123;</span></span><br><span class="line">		sum+=i;</span><br><span class="line">		i++;</span><br><span class="line">	<span class="comment">//&#125;</span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%d"</span>,sum);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>练习3 统计从键盘输入一行字符的个数</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> n=<span class="number">0</span>;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"input a string:\n"</span>);</span><br><span class="line">	<span class="keyword">while</span>(getchar()!=<span class="string">'\n'</span>)&#123;</span><br><span class="line">		n++;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%d\n"</span>,n);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>使用while表达式应注意如下几点：<blockquote>
<ul>
<li>while语句中的表达式一般是关系表达式或逻辑表达式，只要表达式的值为真即可继续循环。案例如下：</li>
</ul>
</blockquote>
</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> n,a=<span class="number">0</span>;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"\ninput n: "</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n);</span><br><span class="line">	<span class="keyword">while</span>(n--)&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%d\n"</span>,a++*<span class="number">2</span>);</span><br><span class="line">		<span class="comment">// n = 2 /0/1</span></span><br><span class="line">		<span class="comment">//n=1 /2/2</span></span><br><span class="line">		<span class="comment">//n=0</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<ul>
<li>循环体如果包括有一个以上的语句，则必须用<code>{}</code>括起来，组成复合语句。</li>
</ul>
</blockquote>
<h3 id="do-while语句"><a href="#do-while语句" class="headerlink" title="do-while语句"></a>do-while语句</h3><ul>
<li>do-while语句的一般形式：</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">do</span></span><br><span class="line">	语句</span><br><span class="line"><span class="keyword">while</span>(表达式);</span><br></pre></td></tr></table></figure>

<ul>
<li>这个循环与whiile循环的不同在于：它先执行循环中的语句，然后再进行判断表达式的值是否为真，如果为真则继续执行循环，如果为假，则终止循环。因此，do-while循环至少要执行一次循环语句。</li>
<li>do-while的执行流程如下</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">st=&gt;start: start</span><br><span class="line">op=&gt;operation: 循环体语句</span><br><span class="line">cond=&gt;condition: 表达式</span><br><span class="line">e=&gt;end</span><br><span class="line"></span><br><span class="line">st-&gt;op-&gt;cond</span><br><span class="line">cond(yes)-&gt;op</span><br><span class="line">cond(no,bottom)-&gt;e</span><br></pre></td></tr></table></figure>

<ul>
<li>练习： 计算1到100之间之和;</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> i=<span class="number">1</span>,sum=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">do</span>&#123;</span><br><span class="line">		sum+=i;</span><br><span class="line">		i++;</span><br><span class="line">	&#125;<span class="keyword">while</span>(i&lt;=<span class="number">100</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%d\n"</span>,sum);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="for语句"><a href="#for语句" class="headerlink" title="for语句"></a>for语句</h3><ul>
<li>在C语言中，for语句使用最灵活，它完全可以取代while语句。</li>
<li>其一般形式：</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(b表达式<span class="number">1</span>;表达式<span class="number">2</span>;表达式<span class="number">3</span>)&#123;&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>它的执行过程如下：<blockquote>
<ul>
<li>先求解表达式1；</li>
<li>再求解表达式2，若其值为真（非0），则执行<code>for</code>语句中指定的内嵌语句，然后再执行表达式3，如果表达式3能够满足表达式2的，则继续执行循环体，直到条件不满足结束循环为止。如果不满足结束循环。</li>
</ul>
</blockquote>
</li>
<li>for语句最简单的应用形式也是最简单的理解形式如下：<blockquote>
<ul>
<li><code>for(循环变量赋初值;循环条件;循环变量增量) 语句;</code></li>
</ul>
</blockquote>
</li>
<li>循环变量赋初值总是一个赋值语句，他用来给循环控制变量赋初值；循环条件是一个关系表达式，它决定什么时候跳出循环体；循环增量。定义循环控制变量每次循环后按什么方式变化。这三个部分之间用<code>;</code>分开。</li>
<li>练习1 计算1-100之间的和</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> i,sum=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=<span class="number">100</span>;i++)&#123;</span><br><span class="line">		sum+=i;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%d\n"</span>,sum);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>表达式1，表达式2，表达式均可以省略</li>
<li>练习2</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">char</span> ch;</span><br><span class="line">	<span class="keyword">for</span>(;(ch=getchar())!=<span class="string">'\n'</span>;)</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%c\n"</span>,ch);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="循环的嵌套"><a href="#循环的嵌套" class="headerlink" title="循环的嵌套"></a>循环的嵌套</h3><ul>
<li>练习1</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> i,k,j;</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">2</span>;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">for</span>(j=<span class="number">0</span>;j&lt;<span class="number">2</span>;j++)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">for</span>(k=<span class="number">0</span>;k&lt;<span class="number">2</span>;k++)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="built_in">printf</span>(<span class="string">"%d %d %d\n"</span>,i,j,k);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>练习2</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="comment">/**********</span></span><br><span class="line"><span class="comment">输出如下图案： </span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">**</span></span><br><span class="line"><span class="comment">***</span></span><br><span class="line"><span class="comment">****</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">**********/</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> i,j,n;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"input n: \n"</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n);</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">		<span class="keyword">for</span>(j=<span class="number">1</span>;j&lt;=i;j++)&#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">"*"</span>);</span><br><span class="line">		&#125; </span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">	&#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="四种循环的比较"><a href="#四种循环的比较" class="headerlink" title="四种循环的比较"></a>四种循环的比较</h3><ul>
<li><p>四种循环中都可以用来处理同一问题，一般情况下它们可以相互替换。但一般不提倡用goto型循环。</p>
</li>
<li><p>在while循环和do-while循环中，只在while后面的括号内指定循环条件，因此为了使循环正常结束，应在循环体中包含使循环趋于结束的语句。（如i++，或i=i+1等）。</p>
</li>
<li><p>for循环可以在表达式3中包含使循环体趋于结束的操作，甚至可以将循环体中的操作全部放到表达式3中，因此for语句的功能更强，凡是能用while循环完成的，用for循环都能实现。</p>
</li>
<li><p>用while语句和do-while循环时，循环变量初始化的操作应该在while和do-while语句之前完成而for语句可以在表达式1中实现循环变量的初始化。</p>
</li>
<li><p>while循环、do-while循环和for循环，可以使用break跳出循环，用continue语句结束本次循环。而用goto语句和if语句构成的循环，不能用Break和continue语句进行控制。</p>
</li>
<li><p>练习：有1,2,3,4四个数字，能组成多少个互不相同且无重复的三位数；</p>
</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> i,j,k;</span><br><span class="line">	<span class="keyword">int</span> sum;</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=<span class="number">4</span>;i++)&#123;</span><br><span class="line">		<span class="keyword">for</span>(j=<span class="number">1</span>;j&lt;=<span class="number">4</span>;j++)&#123;</span><br><span class="line">			<span class="keyword">for</span>(k=<span class="number">1</span>;k&lt;=<span class="number">4</span>;k++)&#123;</span><br><span class="line">				<span class="keyword">if</span>(i!=j&amp;&amp;i!=k&amp;&amp;j!=k)&#123;</span><br><span class="line">					sum=i*<span class="number">100</span>+j*<span class="number">10</span>+k;</span><br><span class="line">					<span class="built_in">printf</span>(<span class="string">"%d\n"</span>,sum);</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="break和continue语句"><a href="#break和continue语句" class="headerlink" title="break和continue语句"></a>break和continue语句</h3><ul>
<li>break语句可以用来从循环体内跳出循环体，即提前结束循环，接着执行下面的语句。</li>
<li>一般形式为：<code>break;</code></li>
<li>break语句不能用于循环语句和switch语句之外的任何其他语句中。</li>
<li>注意：<blockquote>
<ul>
<li>break语句对if-else的条件语句不起作用。</li>
<li>在多层循环中，一个break语句只向外跳一层。</li>
</ul>
</blockquote>
</li>
<li>练习1</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> r;</span><br><span class="line">	<span class="keyword">float</span> pi=<span class="number">3.14159</span>,area;</span><br><span class="line">	<span class="keyword">for</span>(r=<span class="number">1</span>;r&lt;<span class="number">10</span>;r++)&#123;</span><br><span class="line">		area=r*r*pi;</span><br><span class="line">		<span class="keyword">if</span>(area&gt;<span class="number">100</span>)&#123;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"r=%d,area=%f\n"</span>,r,area);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>练习2</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"conio.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> ch;</span><br><span class="line">	<span class="keyword">while</span>(<span class="number">1</span>)&#123;</span><br><span class="line">		<span class="keyword">while</span>(ch=getch())&#123; <span class="comment">//ch：从控制台读取一个字符，但不显示在屏幕上。</span></span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">"%d\n"</span>,ch);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>练习3</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"conio.h"</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> i=<span class="number">0</span>;<span class="keyword">char</span> c;</span><br><span class="line">	<span class="keyword">while</span>(<span class="number">1</span>)&#123;</span><br><span class="line">		c=<span class="string">'\0'</span>;</span><br><span class="line">		<span class="keyword">while</span>(c!=<span class="number">13</span>&amp;&amp;c!=<span class="number">27</span>)&#123;</span><br><span class="line">			c=getch();</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">"%c\n"</span>,c);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span>(c==<span class="number">27</span>)&#123;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		i++;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"The No. is %d"</span>,i);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"The end"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>continue语句<blockquote>
<ul>
<li>作为结束本次循环，即跳过循环体中下面尚未执行的语句，接着进行下一次是否执行循环的判断。</li>
<li>一般形式：<code>continue;</code></li>
</ul>
</blockquote>
</li>
<li>continue语句与break语句的区别：<blockquote>
<ul>
<li>continue是结束当前循环，进行下一步是否循环的判断。</li>
<li>break则是直接结束当前循环。</li>
</ul>
</blockquote>
</li>
<li>练习4</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"conio.h"</span></span></span><br><span class="line"><span class="comment">/*********************************************************</span></span><br><span class="line"><span class="comment">案例实现：当按下键盘就输出该值，如果按esc则跳出则结束输入，</span></span><br><span class="line"><span class="comment">如果按下enter健则不显示...................................</span></span><br><span class="line"><span class="comment">**********************************************************/</span> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">char</span> ch;</span><br><span class="line">	<span class="keyword">for</span>(;;)&#123;</span><br><span class="line">		ch=getch();</span><br><span class="line">		<span class="keyword">if</span>(ch==<span class="number">27</span>)&#123;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span>(ch==<span class="number">13</span>)&#123;</span><br><span class="line">			<span class="keyword">continue</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		putch(ch);<span class="comment">//输出按下的键盘值 </span></span><br><span class="line">	&#125;</span><br><span class="line">	getch();</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>练习5 把100-200之间不能被3整除的数全部输出</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"conio.h"</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> i=<span class="number">100</span>;</span><br><span class="line">	<span class="keyword">for</span>(i;i&lt;=<span class="number">200</span>;i++)&#123;</span><br><span class="line">		<span class="keyword">if</span>(i%<span class="number">3</span>==<span class="number">0</span>)&#123;</span><br><span class="line">			<span class="keyword">continue</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%d\n"</span>,i);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="循环的相关练习"><a href="#循环的相关练习" class="headerlink" title="循环的相关练习"></a>循环的相关练习</h3><ul>
<li>练习1 求π的近似值</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//求解方式1</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"stdio.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"math.h"</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> s=<span class="number">1</span>;</span><br><span class="line">	<span class="keyword">float</span> n=<span class="number">1.0</span>,t=<span class="number">1</span>,pi=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">while</span>(<span class="built_in">fabs</span>(t)&gt;<span class="number">1e-6</span>)&#123;</span><br><span class="line">		pi=pi+t;</span><br><span class="line">		n=n+<span class="number">2</span>;</span><br><span class="line">		s=-s;</span><br><span class="line">		t=<span class="number">1.0</span>*s/n;</span><br><span class="line">	&#125;</span><br><span class="line">	pi=pi*<span class="number">4</span>;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%f"</span>,pi);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//求解方式2</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"stdio.h"</span></span></span><br><span class="line"><span class="comment">//求π的近似值</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> i;</span><br><span class="line">	<span class="keyword">float</span> sum=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">1</span>;<span class="number">1.0</span>/(<span class="number">2</span>*i<span class="number">-1</span>)&gt;<span class="number">1e-6</span>;i++)&#123;</span><br><span class="line">	</span><br><span class="line">		<span class="keyword">if</span>(i%<span class="number">2</span>!=<span class="number">0</span>)&#123;</span><br><span class="line">			sum=sum+<span class="number">1.0</span>/(<span class="number">2</span>*i<span class="number">-1</span>);</span><br><span class="line">	</span><br><span class="line">		&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			sum=sum<span class="number">-1.0</span>/(<span class="number">2</span>*i<span class="number">-1</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%f"</span>,sum*<span class="number">4</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>练习2 </li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//解法1</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">long</span> <span class="keyword">int</span> f1,f2;</span><br><span class="line">	<span class="keyword">int</span> i;</span><br><span class="line">	f1=<span class="number">1</span>;f2=<span class="number">1</span>;</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;=<span class="number">20</span>;i++)&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%12ld%12ld"</span>,f1,f2);</span><br><span class="line">		<span class="keyword">if</span>(i%<span class="number">2</span>==<span class="number">0</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		f1=f1+f2;</span><br><span class="line">		f2=f1+f2;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//解法2</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Fn</span><span class="params">(<span class="keyword">int</span> n)</span></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(n==<span class="number">1</span>||n==<span class="number">2</span>)&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> Fn(n<span class="number">-1</span>)+Fn(n<span class="number">-2</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> i;</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=<span class="number">40</span>;i++)&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%d\t"</span>,Fn(i));</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>练习3<br>//解法1</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="comment">/************************************************</span></span><br><span class="line"><span class="comment">       输入一个数字m，判断m是否为素数</span></span><br><span class="line"><span class="comment">************************************************/</span> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> m,i,j=<span class="number">1</span>;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"input m="</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;m);</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">2</span>;i&lt;m;i++)&#123;</span><br><span class="line">		<span class="keyword">if</span>(m%i==<span class="number">0</span>)&#123;</span><br><span class="line">			j=<span class="number">0</span>;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span>(j)&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%d是一个素数\n"</span>,m);</span><br><span class="line">	&#125; <span class="keyword">else</span>&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%d不是一个素数\n"</span>,m);</span><br><span class="line">	&#125;</span><br><span class="line">&#125; </span><br><span class="line"><span class="comment">//解法2</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;math.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> m,i,k;</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;m);</span><br><span class="line">	k=<span class="built_in">sqrt</span>(m);</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">2</span>;i&lt;=k;i++)&#123;</span><br><span class="line">		<span class="keyword">if</span>(m%i==<span class="number">0</span>)&#123;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125; </span><br><span class="line">	<span class="keyword">if</span>(i&gt;k)&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%d是一个素数\n"</span>,m);</span><br><span class="line">	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%d不是一个素数\n"</span>,m);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>练习4 输出1-100之间的素数</p>
</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;math.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> i,j;</span><br><span class="line">	<span class="keyword">for</span>(j=<span class="number">2</span>;j&lt;=<span class="number">100</span>;j++)&#123;</span><br><span class="line">		<span class="keyword">for</span>(i=<span class="number">2</span>;i&lt;<span class="built_in">sqrt</span>(j);i++)&#123;</span><br><span class="line">			<span class="keyword">if</span>(j%i==<span class="number">0</span>)&#123;</span><br><span class="line">				<span class="keyword">break</span>; </span><br><span class="line">			&#125; </span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span>(i&gt;<span class="built_in">sqrt</span>(j))&#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">"%d\n"</span>,j);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>练习5 译密码</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;math.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> i;</span><br><span class="line">	<span class="keyword">char</span> ch;</span><br><span class="line">	<span class="keyword">char</span> chs;</span><br><span class="line">	<span class="keyword">while</span>((ch=getchar())!=<span class="string">'\0'</span>)&#123;</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">if</span>(ch&gt;=<span class="string">'a'</span> &amp;&amp; ch&lt;=<span class="string">'z'</span> || ch&gt;=<span class="string">'A'</span> &amp;&amp; ch&lt;=<span class="string">'Z'</span> )&#123;</span><br><span class="line">			<span class="keyword">switch</span>(ch)&#123;</span><br><span class="line">				<span class="keyword">case</span> <span class="string">'x'</span>: chs=<span class="string">'a'</span>;<span class="keyword">break</span>;</span><br><span class="line">				<span class="keyword">case</span> <span class="string">'y'</span>: chs=<span class="string">'b'</span>;<span class="keyword">break</span>;</span><br><span class="line">				<span class="keyword">case</span> <span class="string">'z'</span>: chs=<span class="string">'c'</span>;<span class="keyword">break</span>;</span><br><span class="line">				<span class="keyword">case</span> <span class="string">'X'</span>: chs=<span class="string">'A'</span>;<span class="keyword">break</span>;</span><br><span class="line">				<span class="keyword">case</span> <span class="string">'Y'</span>: chs=<span class="string">'B'</span>;<span class="keyword">break</span>;</span><br><span class="line">				<span class="keyword">case</span> <span class="string">'Z'</span>: chs=<span class="string">'C'</span>;<span class="keyword">break</span>;</span><br><span class="line">				<span class="keyword">default</span>:chs=ch+<span class="number">4</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			chs=ch;</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">	</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%c"</span>,chs);</span><br><span class="line">	&#125;	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>练习6</p>
</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;math.h&gt;</span></span></span><br><span class="line"><span class="meta"># <span class="meta-keyword">define</span> N 7</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    *  </span></span><br><span class="line"><span class="comment">   ***</span></span><br><span class="line"><span class="comment">  *****</span></span><br><span class="line"><span class="comment"> *******</span></span><br><span class="line"><span class="comment">  *****</span></span><br><span class="line"><span class="comment">   ***   </span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> i,j;</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=N/<span class="number">2</span>+<span class="number">1</span>;i++)&#123;</span><br><span class="line">		<span class="keyword">for</span>(j=<span class="number">1</span>;j&lt;=<span class="number">4</span>-i;j++)&#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">" "</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">for</span>(j=<span class="number">1</span>;j&lt;=(<span class="number">2</span>*i<span class="number">-1</span>);j++)&#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">"*"</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=<span class="number">3</span>;i++)&#123;</span><br><span class="line">		<span class="keyword">for</span>(j=<span class="number">1</span>;j&lt;=i;j++)&#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">" "</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">for</span>(j=<span class="number">1</span>;j&lt;=N-(<span class="number">2</span>*i);j++)&#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">"*"</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h2><ul>
<li>有如下几组数据，它们分别该如何存储呢？<blockquote>
<ul>
<li>学生的学习成绩;</li>
<li>银行的账单</li>
<li>一行文字</li>
</ul>
</blockquote>
</li>
<li>这些数据的特点是：<blockquote>
<ul>
<li>具有相同的数据类型</li>
<li>使用过程中需要保留原始数据。</li>
</ul>
</blockquote>
</li>
<li>C语言中为这些数据，提供了一种构造数据类型，数组。 </li>
<li>在程序设计中，为了方便处理，把具有相同类型的若干变量按有序的形式组织起来。这些按序排列的同类数据元素的集合称为数组。</li>
<li>在C语言中，数组是属于构造数据类型。</li>
<li>数组：具有相同类型的数据组成的序列，是有序集合。</li>
<li>数组中的每一个数据称为：数组元素、下标变量。</li>
<li>数组元素：由其所在的位置序号（数组元素的下标）来区分。</li>
<li>用数组名与下标可以用统一的方式来处理数组中的所有元素，从而方便的实现处理一批具有相同性质数据的问题。</li>
<li>注意：数组元素有序不是指元素大小有序。<h3 id="一维数组的定义和引用"><a href="#一维数组的定义和引用" class="headerlink" title="一维数组的定义和引用"></a>一维数组的定义和引用</h3></li>
<li>在C语言中使用数组必须先进行定义。</li>
<li>一维数组的定义方式： <code>类型说明符 数组名[常量表达式]</code></li>
<li>例如：int a[10];</li>
<li>它表示定义了一个整形数组，数组名为a，此数组有10个元素，10个元素都是整型变量。</li>
<li>需要注意的是：<blockquote>
<ul>
<li>类型说明符是任意一种基本数据类型或者构造数组类型。对于同一个数组，其所有元素的数据类型都是相同的。</li>
<li>数组名是用户定义的数组标识符。书写规则应符合标识符的书写规则。</li>
<li>方括号中的常量表达式表示数据元素的个数，也称为数组长度。</li>
<li>允许在通一个类型说明中，说明多个数组和多个变量。例如：<code>int a,b,c,k[200],j[10];</code></li>
<li>a[10]，表示数组a有10个元素，注意下标是从0开始，这10个元素是<code>a[0],a[1]...a[9]</code>。按上面定义，不存在数据元素<code>a[10]</code>；</li>
<li>c语言中不允许对数组的大小做动态定义，即数组的大小不依赖于程序运行过程中变量的值。例如下面定义数组是不允许的 </li>
</ul>
</blockquote>
</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n);</span><br><span class="line"><span class="keyword">int</span> a[n];</span><br></pre></td></tr></table></figure>

<ul>
<li><p>一维数组在内存中的存放</p>
</li>
<li><p>一维数组的引用：</p>
<blockquote>
<ul>
<li>数组元素是组成数组的基本单位。数据元素也是一种基本变量，其标识方法为数组名后跟一个下标。下标表示了元素在数组中的顺序号。</li>
<li>数组元素的一般形式为：<code>数组名[下标]</code>（下标可以是整型常量或整型表达式）</li>
<li>例如：a[0] = a[5]+a[7]+a[2*3]、a[i+j]、a[i++]都是合法的数组元素。</li>
</ul>
</blockquote>
</li>
<li><p>一维数组元素的引用的一些注意的事项：</p>
<blockquote>
<ul>
<li>数组元素通常也称为下标变量。必须先定义数组，才能使用下标变量。在C语言中只能逐个使用下标变量，而不能一次性使用整个数组。</li>
<li>定义数组时用到的<code>数组名[常量表达式]</code>和用用数组元素时使用到的<code>数组名[常量表达式]</code>有区别。</li>
</ul>
</blockquote>
</li>
<li><p>一维数组的初始化</p>
<blockquote>
<ul>
<li>给数组赋值的方法除了赋值语句之外，还可以采用初始化赋值和动态赋值的方法。</li>
<li>数组初始化赋值是指在数组定义时给数组元素赋予初值。</li>
<li>数组初始化是在编译阶段进行的。这样将减少运行时间，提高效率。</li>
<li>注意：之前用赋值语句或输入语句也可给数组元素指定初值，是在运行时完成的。</li>
<li>初始化赋值的一般形式为： <code>类型说明符 数组名[常量表达式]={值,值...,值}</code>; </li>
</ul>
</blockquote>
</li>
<li><p>练习1</p>
</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> i,a[<span class="number">5</span>]=&#123;<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>&#125;,b[<span class="number">5</span>];</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"\n array a is:"</span>);</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">5</span>;i++)<span class="built_in">printf</span>(<span class="string">"%6d"</span>,a[i]);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"\n array b is:"</span>);</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">5</span>;i++)<span class="built_in">printf</span>(<span class="string">"%6d"</span>,b[i]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>练习2 输入10个数，并把最大的数输出</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> i,max,a[<span class="number">10</span>];</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"input 10 numbers:\n"</span>);</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++) &#123;</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;a[i]);</span><br><span class="line">	&#125;</span><br><span class="line">	max=a[<span class="number">0</span>];</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;<span class="number">10</span>;i++)&#123;</span><br><span class="line">		<span class="keyword">if</span>(max&lt;a[i]) max=a[i];</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"max=%d"</span>,max);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>练习3： 利用数组来处理、求解<code>Fibonacci数列</code>;把前20个项的值存放在数组中</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> a[<span class="number">20</span>],i;</span><br><span class="line">	a[<span class="number">0</span>]=a[<span class="number">1</span>]=<span class="number">1</span>;</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">2</span>;i&lt;<span class="number">20</span>;i++)&#123;</span><br><span class="line">		a[i]=a[i<span class="number">-1</span>]+a[i<span class="number">-2</span>];</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">20</span>;i++)&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%d "</span>,a[i]);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>练习4：冒泡排序</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> a[<span class="number">10</span>]=&#123;<span class="number">12</span>,<span class="number">26</span>,<span class="number">32</span>,<span class="number">25</span>,<span class="number">11</span>,<span class="number">56</span>,<span class="number">96</span>,<span class="number">48</span>,<span class="number">36</span>,<span class="number">66</span>&#125;;</span><br><span class="line">	<span class="keyword">int</span> i,j,t;</span><br><span class="line">	<span class="keyword">for</span>(j=<span class="number">0</span>;j&lt;<span class="number">9</span>;j++)&#123;</span><br><span class="line">		<span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">9</span>-j;i++)&#123;</span><br><span class="line">			<span class="keyword">if</span>(a[i]&gt;a[i+<span class="number">1</span>])&#123;</span><br><span class="line">				t=a[i];</span><br><span class="line">				a[i]=a[i+<span class="number">1</span>];</span><br><span class="line">				a[i+<span class="number">1</span>]=t;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++)&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%d "</span>,a[i]);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="二维数组的定义和引用"><a href="#二维数组的定义和引用" class="headerlink" title="二维数组的定义和引用"></a>二维数组的定义和引用</h3><ul>
<li>二维数组的定义<blockquote>
<ul>
<li>二维数组定义的一般形式为：<code>类型说明符 数组名[常量表达式][常量表达式];</code></li>
<li>例如：定义a为3×4的数组，b为5×10的数组如下：<code>float a[3][4],a[5][10]</code></li>
<li>我们可以将二维数组看成是一种特殊的一维数组：它的元素又是一个一维数组。</li>
<li>二维数组在概念上二维的，但是，实际的硬盘存储器却是连续编址的，也就是说存储器单元是按一维线性排列的。</li>
<li>如何在一维存储器中存放二维数组，可有两种方式：一种是按行排。另一种是按列排列。</li>
</ul>
</blockquote>
</li>
<li>二维数组的引用和初始化<blockquote>
<ul>
<li>数据类型 <code>数组名[常量表达式1][常量表达式2] ={初始化数据}</code>;</li>
</ul>
</blockquote>
</li>
<li>我们有4种方法对二维数组初始化：<blockquote>
<ul>
<li>直接分行给二维数组赋初值</li>
<li>可以将所有数据写在一个花括号内，按数组排列的顺序对各元素赋初值</li>
<li>可以对部分元素赋初值</li>
<li>可以对各行中的某一元素赋初值。</li>
<li><code>a[][]</code>：第一维长度可以省略，第二维长度不可以省略。</li>
</ul>
</blockquote>
</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span>(0) </span></span><br><span class="line">	<span class="keyword">int</span> a[<span class="number">3</span>][<span class="number">4</span>]=&#123;&#123;<span class="number">1</span>&#125;,&#123;<span class="number">5</span>&#125;,&#123;<span class="number">9</span>&#125;&#125;;<span class="comment">//这样初始化的是每一行的第一个元素 </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line">	<span class="keyword">int</span> a[<span class="number">3</span>][<span class="number">4</span>]=&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;;	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>练习1 计算平均分</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> i,j,sum=<span class="number">0</span>,average,v[<span class="number">3</span>];</span><br><span class="line">	<span class="keyword">int</span> a[<span class="number">5</span>][<span class="number">3</span>]=&#123;&#123;<span class="number">80</span>,<span class="number">75</span>,<span class="number">92</span>&#125;,&#123;<span class="number">61</span>,<span class="number">65</span>,<span class="number">71</span>&#125;,&#123;<span class="number">59</span>,<span class="number">63</span>,<span class="number">70</span>&#125;,&#123;<span class="number">85</span>,<span class="number">87</span>,<span class="number">90</span>&#125;,&#123;<span class="number">76</span>,<span class="number">77</span>,<span class="number">85</span>&#125;&#125;;</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">3</span>;i++)&#123; <span class="comment">//表示科目</span></span><br><span class="line">		<span class="keyword">for</span>(j=<span class="number">0</span>;j&lt;<span class="number">5</span>;j++) <span class="comment">// 表示成绩 </span></span><br><span class="line">		&#123;	</span><br><span class="line">			sum = sum + a[j][i];</span><br><span class="line">		&#125;</span><br><span class="line">		v[i]=sum/<span class="number">5</span>;</span><br><span class="line">		sum=<span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	average = (v[<span class="number">0</span>]+v[<span class="number">1</span>]+v[<span class="number">2</span>])/<span class="number">3</span>;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"math:%d\nc language:%d\ndFoxpro:%d\n"</span>,v[<span class="number">0</span>],v[<span class="number">1</span>],v[<span class="number">2</span>]);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"total:%d\n"</span>,average);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>练习2：将数组的行和列对换</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> a[<span class="number">2</span>][<span class="number">3</span>] = &#123;&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;,&#123;<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>&#125;&#125;;</span><br><span class="line">	<span class="keyword">int</span> b[<span class="number">3</span>][<span class="number">2</span>];</span><br><span class="line">	<span class="keyword">int</span> i,j;       </span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"output array a:\n"</span>);</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">2</span>;i++)&#123;</span><br><span class="line">		<span class="keyword">for</span>(j=<span class="number">0</span>;j&lt;<span class="number">3</span>;j++)&#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">"%d\t"</span>,a[i][j]);</span><br><span class="line">			b[j][i]=a[i][j];</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"output array b:\n"</span>);</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">3</span>;i++)&#123;</span><br><span class="line">		<span class="keyword">for</span>(j=<span class="number">0</span>;j&lt;<span class="number">2</span>;j++)&#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">"%d\t"</span>,b[i][j]);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>练习3：输入一个二维数组，并输出其中最大的一个数，并把该数的行和列输出。</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> a[<span class="number">3</span>][<span class="number">3</span>];</span><br><span class="line">	<span class="keyword">int</span> i,j,column,row,max;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"input number:\n"</span>);</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">3</span>;i++)&#123;</span><br><span class="line">		<span class="keyword">for</span>(j=<span class="number">0</span>;j&lt;<span class="number">3</span>;j++)&#123;</span><br><span class="line">			<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;a[i][j]);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	max=a[<span class="number">0</span>][<span class="number">0</span>];</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">3</span>;i++)&#123;</span><br><span class="line">		<span class="keyword">for</span>(j=<span class="number">0</span>;j&lt;<span class="number">3</span>;j++)&#123;</span><br><span class="line">			<span class="keyword">if</span>(max&lt;a[i][j])&#123;</span><br><span class="line">				 max=a[i][j];</span><br><span class="line">				 column=j;</span><br><span class="line">				 row=i;</span><br><span class="line">			&#125;	</span><br><span class="line">		&#125;</span><br><span class="line">	</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"column=%d,row=%d,max=%d"</span>,column,row,max);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>练习4：输入3*3数组，只输出指定位置的数组</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> a[<span class="number">3</span>][<span class="number">3</span>];</span><br><span class="line">	<span class="keyword">int</span> i,j;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"input number:\n"</span>);</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">3</span>;i++)&#123;</span><br><span class="line">		<span class="keyword">for</span>(j=<span class="number">0</span>;j&lt;<span class="number">3</span>;j++)&#123;</span><br><span class="line">		<span class="comment">//	printf("a[%d][%d]=",i,j);</span></span><br><span class="line">			<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;a[i][j]);</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">3</span>;i++)&#123;</span><br><span class="line">		<span class="keyword">for</span>(j=<span class="number">0</span>;j&lt;<span class="number">3</span>;j++)&#123;</span><br><span class="line">			<span class="keyword">if</span>(j==<span class="number">1</span> || i==<span class="number">1</span>)&#123;</span><br><span class="line">				<span class="built_in">printf</span>(<span class="string">"%-6d"</span>,a[i][j]);	</span><br><span class="line">			&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">				<span class="built_in">printf</span>(<span class="string">"%-6c"</span>,<span class="string">' '</span>);</span><br><span class="line">			&#125;</span><br><span class="line">		</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="二分法"><a href="#二分法" class="headerlink" title="二分法"></a>二分法</h3><ul>
<li>利用数组进行数据查找 – 二分法</li>
<li>适用情况：在一批有序数据中查找某数。</li>
<li>原理：选定某个数，先与数组的中间数进行比较，如果大于中间数，去掉包括中间之前的数字，在剩下的数据中再次以同样的方法进行查找，直到找到该数为止。如果小于中间数，去掉包括中间数之后的所有的数字，在剩下的数据中再次以同样的方式进行查找，直到找到为止。如果该数与中间数相同，则找到该数。</li>
<li>练习1：</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> N 10</span></span><br><span class="line"><span class="comment">/***************************************************************</span></span><br><span class="line"><span class="comment">      	假设在数值a中的数据是按小到大排序排列的 </span></span><br><span class="line"><span class="comment">	       -12 0 6 16 23 56 80 100 110 115</span></span><br><span class="line"><span class="comment">   从键盘上输入一个数，判断该数是否在数组中 ，若在，输出序号 </span></span><br><span class="line"><span class="comment">***************************************************************/</span> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">static</span> <span class="keyword">int</span> a[N]=&#123;<span class="number">-12</span>,<span class="number">0</span>,<span class="number">6</span>,<span class="number">16</span>,<span class="number">23</span>,<span class="number">56</span>,<span class="number">80</span>,<span class="number">100</span>,<span class="number">110</span>,<span class="number">115</span>&#125;;</span><br><span class="line">	<span class="keyword">int</span> low,high,mid;<span class="comment">//low-&gt;最小数；high-&gt;最大数；mid-&gt;中间数； </span></span><br><span class="line">	<span class="keyword">int</span> n,found;<span class="comment">//n-&gt;要查找的数</span></span><br><span class="line">	low=<span class="number">0</span>;</span><br><span class="line">	high=N<span class="number">-1</span>;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"input n="</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n);</span><br><span class="line">	<span class="keyword">while</span>(low&lt;=high)&#123;</span><br><span class="line">		mid=(low+high)/<span class="number">2</span>;</span><br><span class="line">		<span class="keyword">if</span>(n == a[mid])&#123;</span><br><span class="line">			found=<span class="number">1</span>;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;<span class="keyword">else</span> <span class="keyword">if</span>(n&gt;a[mid])&#123;</span><br><span class="line">			low=mid+<span class="number">1</span>;</span><br><span class="line">		&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			high=mid<span class="number">-1</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	 <span class="keyword">if</span>(found==<span class="number">1</span>)&#123;</span><br><span class="line">	 	<span class="built_in">printf</span>(<span class="string">"The index of %d is %d"</span>,n,mid);</span><br><span class="line">	 &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">	 	<span class="built_in">printf</span>(<span class="string">"There is not %d"</span>,n);</span><br><span class="line">	 &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>改进版</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> N 10</span></span><br><span class="line"><span class="comment">/***************************************************************</span></span><br><span class="line"><span class="comment">      	假设在数值a中的数据是按小到大排序排列的 </span></span><br><span class="line"><span class="comment">	       -12 0 6 16 23 56 80 100 110 115</span></span><br><span class="line"><span class="comment">   从键盘上输入一个数，判断该数是否在数组中 ，若在，输出序号 </span></span><br><span class="line"><span class="comment">***************************************************************/</span> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="comment">//一个程序在编译运行的时候，普通变量是存放在栈区。 </span></span><br><span class="line">	<span class="comment">//这个static会使得变量存放在data</span></span><br><span class="line">	<span class="comment">//我们整个内存主要分为四大区：CODE、DATA、STACK、HEAP </span></span><br><span class="line">	<span class="keyword">static</span> <span class="keyword">int</span> a[N]=&#123;<span class="number">-12</span>,<span class="number">0</span>,<span class="number">6</span>,<span class="number">16</span>,<span class="number">23</span>,<span class="number">56</span>,<span class="number">80</span>,<span class="number">100</span>,<span class="number">110</span>,<span class="number">115</span>&#125;;</span><br><span class="line">	<span class="keyword">int</span> low,high,mid;<span class="comment">//low-&gt;最小数；high-&gt;最大数；mid-&gt;中间数； </span></span><br><span class="line">	<span class="keyword">int</span> n,found;<span class="comment">//n-&gt;要查找的数</span></span><br><span class="line">	low=<span class="number">0</span>;</span><br><span class="line">	high=N<span class="number">-1</span>;</span><br><span class="line">	<span class="meta">#<span class="meta-keyword">if</span>(0)</span></span><br><span class="line">	<span class="keyword">do</span>&#123;</span><br><span class="line">		<span class="comment">//printf("input n=");</span></span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n);</span><br><span class="line">	&#125;<span class="keyword">while</span>(n&lt;a[<span class="number">0</span>] || n&gt;a[N<span class="number">-1</span>]);</span><br><span class="line">	<span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line">	<span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n)!=<span class="number">1</span>)&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"非法输入!\n"</span>);</span><br><span class="line">		getchar();<span class="comment">//把缓存区的内容消耗掉</span></span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">while</span>(low&lt;=high)&#123;</span><br><span class="line">		mid=(low+high)/<span class="number">2</span>;</span><br><span class="line">		<span class="keyword">if</span>(n == a[mid])&#123;</span><br><span class="line">			found=<span class="number">1</span>;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;<span class="keyword">else</span> <span class="keyword">if</span>(n&gt;a[mid])&#123;</span><br><span class="line">			low=mid+<span class="number">1</span>;</span><br><span class="line">		&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			high=mid<span class="number">-1</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	 <span class="keyword">if</span>(found==<span class="number">1</span>)&#123;</span><br><span class="line">	 	<span class="built_in">printf</span>(<span class="string">"The index of %d is %d"</span>,n,mid);</span><br><span class="line">	 &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">	 	<span class="built_in">printf</span>(<span class="string">"There is not %d"</span>,n);</span><br><span class="line">	 &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="衍生：多维数组的定义"><a href="#衍生：多维数组的定义" class="headerlink" title="衍生：多维数组的定义"></a>衍生：多维数组的定义</h3><ul>
<li>有了二维数组的基础，那么多维数组是如何定义的。 </li>
<li>定义三维数组：<code>float a[1][1][1];</code></li>
<li>多维数组元素在内存中的排列顺序，第一维的下标变化最慢，最右边的下标变化最快。</li>
</ul>
<hr>
<h2 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h2><ul>
<li>一个较大程序可以分成若干个程序模块，每一个模块用来实现一个特定的功能。这个模块称之为函数。</li>
<li>在高级语言中用子程序实现模块的功能。子程序有函数来完成。</li>
<li>一个C程序可以由一个主函数和若干个其他的函数构成。</li>
<li>函数的调用关系</li>
</ul>
<p><img src="https://i.loli.net/2019/12/09/3Rhos1TxGywN7HB.png" alt="1575895174_1_.png"></p>
<ul>
<li>由主函数调用其他函数，其他函数也可以相互调用。同一个函数可以被一个或多个函数调用任意多次。</li>
<li>例子：</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">printstar</span><span class="params">()</span></span>;<span class="comment">//声明函数 </span></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">print_message</span><span class="params">()</span></span>;<span class="comment">//声明函数 </span></span><br><span class="line">	</span><br><span class="line">	printstar();<span class="comment">//调用函数</span></span><br><span class="line">	print_message();<span class="comment">//调用函数</span></span><br><span class="line">	printstar();<span class="comment">//调用函数</span></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">printstar</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"******************************\n"</span>);</span><br><span class="line">&#125; </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print_message</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"hello world!!!\n"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="函数定义的一般形式："><a href="#函数定义的一般形式：" class="headerlink" title="函数定义的一般形式："></a>函数定义的一般形式：</h3><ul>
<li>定义无参函数的一般形式为：</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">类型说明符 函数名()&#123;</span><br><span class="line">	声明部分</span><br><span class="line">	语句部分</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>类型说明符，指定函数的返回值，即调用函数后所带回的值。</p>
<ul>
<li>定义有参函数的一般形式：</li>
</ul>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">类型说明符 函数名(形式参数列表)&#123;</span><br><span class="line">	声明部分</span><br><span class="line">	语句部分</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>定义空函数的一般形式为</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">类型标识符 函数名()&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>函数默认的返回值类型为<code>int</code>；</p>
</blockquote>
<h3 id="形式参数和实际参数"><a href="#形式参数和实际参数" class="headerlink" title="形式参数和实际参数"></a>形式参数和实际参数</h3><ul>
<li><p>形式参数：在定义函数时括号内带有的参数；</p>
</li>
<li><p>实际参数：在主函数或或其他函数调用该函数时传递的参数。</p>
</li>
<li><p>在大多数情况下，主调函数和背调函数之间有数据传递关系。</p>
</li>
<li><p>return后面的括弧中的值作为函数带回的值（称为函数返回值）。</p>
</li>
<li><p>在不同的函数之间传递数据，可以使用的方法:</p>
<blockquote>
<ul>
<li>参数：通过形式参数和实际参数。</li>
<li>返回值：用return语句返回计算结果。</li>
<li>全局变量：外部变量。</li>
</ul>
</blockquote>
</li>
<li><p>案例实现：</p>
</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">max</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> a,b,c;</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">"%d,%d"</span>,&amp;a,&amp;b);</span><br><span class="line">	c=max(a,b);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%d"</span>,c);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125; </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">max</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> d;</span><br><span class="line">	d = x&gt;y?x:y;</span><br><span class="line">	<span class="keyword">return</span> d;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="函数的返回值"><a href="#函数的返回值" class="headerlink" title="函数的返回值"></a>函数的返回值</h3><ul>
<li>通常，希望通过函数调用时使主调函数能得到一个确定的值，这就是函数的返回值。</li>
<li>函数的返回值是通过函数中的return语句获得的。</li>
<li>return后面的值可以是一个表达式。</li>
<li>在C语言中，凡不加类型说明的函数，自动按整型处理。</li>
<li>练习1</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">float</span> <span class="title">max</span><span class="params">(<span class="keyword">float</span> x,<span class="keyword">float</span> y)</span></span>;</span><br><span class="line">	<span class="keyword">float</span> a,b,c;</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">"%f,%f"</span>,&amp;a,&amp;b);</span><br><span class="line">	c=max(a,b);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"max is %f\n"</span>,c);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">float</span> <span class="title">max</span><span class="params">(<span class="keyword">float</span> x,<span class="keyword">float</span> y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">float</span> z;</span><br><span class="line">	z=x&gt;y?x:y;</span><br><span class="line">	<span class="keyword">return</span> z;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="函数的调用"><a href="#函数的调用" class="headerlink" title="函数的调用"></a>函数的调用</h3><ul>
<li>函数调用的一般形式：<code>函数名(实参表列);</code></li>
<li>函数的调用方法<blockquote>
<ul>
<li>cdecl</li>
<li>stdcall</li>
<li>_fastcall </li>
</ul>
</blockquote>
</li>
</ul>
<h3 id="函数的嵌套调用"><a href="#函数的嵌套调用" class="headerlink" title="函数的嵌套调用"></a>函数的嵌套调用</h3><p>嵌套的定义就是在定义一个函数时，其函数体内又包含另一个函数的完整定义。</p>
<p>在C语言中，不能嵌套定义函数，但可以嵌套调用函数，也就是说，在调用一个函数的过程中，又调用另一个函数。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">a</span><span class="params">()</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">b</span><span class="params">()</span></span>;</span><br><span class="line">main()&#123;</span><br><span class="line">	a();</span><br><span class="line">&#125;</span><br><span class="line">a()&#123;</span><br><span class="line">	b();</span><br><span class="line">&#125;</span><br><span class="line">b()&#123;</span><br><span class="line">	<span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>上面函数的执行流程如下图所示：</p>
<p><img src="https://i.loli.net/2020/01/09/P1LFqJM652DXrwb.png" alt="嵌套执行流程.jpg"></p>
<p>例题：计算 S = 2²! + 3²! （在高等数学中4阶层的意思是：4!=4<em>3</em>2）</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">long</span> <span class="title">rank</span><span class="params">(<span class="keyword">long</span> i)</span></span>;<span class="comment">//计算阶层</span></span><br><span class="line"><span class="function"><span class="keyword">long</span> <span class="title">square</span><span class="params">(<span class="keyword">long</span> j)</span></span>;<span class="comment">//计算平方 </span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">long</span> k;</span><br><span class="line">	k=rank(<span class="number">2</span>)+rank(<span class="number">3</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"s=%ld"</span>,k);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">long</span> <span class="title">rank</span><span class="params">(<span class="keyword">long</span> i)</span></span>&#123;</span><br><span class="line">	<span class="keyword">long</span> s=<span class="number">1</span>,a,b;</span><br><span class="line">	a=square(i);</span><br><span class="line">	<span class="keyword">for</span>(b=<span class="number">1</span>;b&lt;=a;b++)&#123;</span><br><span class="line">		s = s * b;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> s;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">long</span> <span class="title">square</span><span class="params">(<span class="keyword">long</span> j)</span></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> j*j;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="函数的递归调用"><a href="#函数的递归调用" class="headerlink" title="函数的递归调用"></a>函数的递归调用</h3><p>在调用一个函数的过程中又出现直接的或间接的调用该函数的本身，称为函数的递归调用。C语言的特点之一就在允许函数的递归调用。</p>
<p>例如：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">f</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> y,z;</span><br><span class="line">	z=f(y);</span><br><span class="line">	<span class="keyword">return</span> (<span class="number">2</span>*z);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注意：递归必须要有一个推出的条件！</p>
<p>例题：用递归的方法求n!</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">long</span> <span class="title">rank</span><span class="params">(<span class="keyword">int</span> i)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"3!=%ld"</span>,rank(<span class="number">3</span>));</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">long</span> <span class="title">rank</span><span class="params">(<span class="keyword">int</span> i)</span></span>&#123;</span><br><span class="line">	<span class="keyword">long</span> temp_result;</span><br><span class="line">	<span class="keyword">if</span>(i&lt;<span class="number">0</span>)&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">" i&lt;0 ,input error\n"</span>);</span><br><span class="line">	&#125;<span class="keyword">else</span> <span class="keyword">if</span>( i==<span class="number">1</span> || i==<span class="number">0</span>)&#123; <span class="comment">//推出递归条件 </span></span><br><span class="line">		temp_result=<span class="number">1</span>;</span><br><span class="line">	&#125;<span class="keyword">else</span>&#123; <span class="comment">//循环体 </span></span><br><span class="line">		temp_result = i * rank(i<span class="number">-1</span>);</span><br><span class="line">		</span><br><span class="line">		<span class="comment">// i==3 temp_result=3*rank(2); rank(3)</span></span><br><span class="line">		<span class="comment">// i==2 temp_result=2*rank(1); = rank(2)=2;</span></span><br><span class="line">		<span class="comment">// i==1 temp_result=1; = rank(1)</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%ld\n"</span>,temp_result);</span><br><span class="line">	<span class="keyword">return</span> temp_result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>例题：汉诺塔</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="comment">//汉诺塔的递归程序</span></span><br><span class="line"><span class="comment">//n 代表多少个盘子，one,two,three代表多少个座  </span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">hanoi</span><span class="params">(<span class="keyword">int</span> n,<span class="keyword">char</span> one,<span class="keyword">char</span> two,<span class="keyword">char</span> three)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"n=%d,one=%c,two=%c,three=%c\n"</span>,n,one,two,three);</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">move</span><span class="params">(<span class="keyword">char</span> x,<span class="keyword">char</span> y)</span></span>;<span class="comment">// 对move函数的声明 </span></span><br><span class="line">	<span class="keyword">if</span>(n==<span class="number">1</span>)&#123;</span><br><span class="line">		move(one,three);</span><br><span class="line">		</span><br><span class="line">	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">		hanoi(n<span class="number">-1</span>,one,three,two);</span><br><span class="line">		</span><br><span class="line">		move(one,three);</span><br><span class="line">		hanoi(n<span class="number">-1</span>,two,one,three);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">move</span><span class="params">(<span class="keyword">char</span> x,<span class="keyword">char</span> y)</span></span>&#123; <span class="comment">//定义函数 </span></span><br><span class="line">	</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%c---&gt;%c\n"</span>,x,y);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	hanoi(<span class="number">3</span>,<span class="string">'A'</span>,<span class="string">'B'</span>,<span class="string">'C'</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">void Hanoi(int n,char A,char B,char C)&#123;</span></span><br><span class="line"><span class="comment">	if(n&gt;0)&#123;</span></span><br><span class="line"><span class="comment">		Hanoi(n-1,A,C,B);</span></span><br><span class="line"><span class="comment">		printf("%c ----&gt; %c\n",A,C);</span></span><br><span class="line"><span class="comment">		Hanoi(n-1,B,A,C); </span></span><br><span class="line"><span class="comment">	&#125;</span></span><br><span class="line"><span class="comment">&#125; </span></span><br><span class="line"><span class="comment">int main()&#123;</span></span><br><span class="line"><span class="comment">	char x='A',y='B',z='C';</span></span><br><span class="line"><span class="comment">	Hanoi(4,x,y,z);</span></span><br><span class="line"><span class="comment">	return 0;</span></span><br><span class="line"><span class="comment">&#125; */</span></span><br></pre></td></tr></table></figure>

<h3 id="数组作为函数参数"><a href="#数组作为函数参数" class="headerlink" title="数组作为函数参数"></a>数组作为函数参数</h3><p>数组可以作为函数的参数使用，进行数据传送。数组用作函数参数有两种形式。</p>
<p>一种是把数组元素（下标变量）作为实参使用；</p>
<p>另一种是把数组名作为函数的形参和实参使用。</p>
<p><strong>数组元素</strong></p>
<p>数组元素就是下表变量，它与普通变量并无区别。因此它作为函数实参使用与普通变量是完全相同的，在发生函数调用时，把作为实参的数组元素的值传送给形参，实现单向的值传送。</p>
<p>例题训练：判别一个整数数组中个元素的值，若大于0，则输出该值，若小于0则输出0的值。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">(<span class="keyword">int</span> j)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> a[<span class="number">10</span>]=&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">-1</span>,<span class="number">-2</span>,<span class="number">-3</span>,<span class="number">-4</span>,<span class="number">2</span>,<span class="number">3</span>&#125;;</span><br><span class="line">	<span class="keyword">int</span> i;</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++)&#123;</span><br><span class="line">		test(a[i]);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">(<span class="keyword">int</span> j)</span></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(j&gt;=<span class="number">0</span>)&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%d "</span>,j);</span><br><span class="line">	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"0 "</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>数组名</strong></p>
<p>用数组名作为函数参数与用数组元素作为实参有几点不同：</p>
<ol>
<li>数组元素作为参数传递时属于值传递，而用数组名作为函数参数传递时，则属于址传递。</li>
</ol>
<p>例子：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">(<span class="keyword">int</span> b[<span class="number">10</span>])</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> a[<span class="number">10</span>]=&#123;<span class="number">2</span>,<span class="number">4</span>,<span class="number">6</span>,<span class="number">8</span>,<span class="number">10</span>,<span class="number">12</span>,<span class="number">14</span>,<span class="number">16</span>,<span class="number">18</span>,<span class="number">20</span>&#125;;</span><br><span class="line">	test(a);</span><br><span class="line">	<span class="built_in">putchar</span>(<span class="string">'\n'</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">(<span class="keyword">int</span> b[<span class="number">10</span>])</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> i=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span>(i;i&lt;<span class="number">5</span>;i++)&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%d "</span>,b[i]);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>例子：有一个一维数组score，内存放10个学生成绩，求平均成绩（写一个average函数求平均成绩）</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">average</span><span class="params">(<span class="keyword">double</span> a[<span class="number">10</span>])</span></span>&#123;</span><br><span class="line">	<span class="keyword">double</span> s=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">int</span> i=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span>(i;i&lt;<span class="number">10</span>;i++)&#123;</span><br><span class="line">		s += a[i]; </span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> s/<span class="number">10</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">double</span> avg;</span><br><span class="line">	<span class="keyword">double</span> b[<span class="number">10</span>]=&#123;<span class="number">1.0</span>,<span class="number">2.0</span>,<span class="number">3.0</span>,<span class="number">4.0</span>,<span class="number">5.0</span>,<span class="number">6.0</span>,<span class="number">7.0</span>,<span class="number">8.0</span>,<span class="number">9.0</span>,<span class="number">10.0</span>&#125;;</span><br><span class="line">	avg=average(b);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"avg=%lf"</span>,avg);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="局部变量和全局变量"><a href="#局部变量和全局变量" class="headerlink" title="局部变量和全局变量"></a>局部变量和全局变量</h3><p><strong>局部变量</strong></p>
<p>在一个函数内部定义的变量是内部变量，他只在函数范围内有效，也就是说只有在本函数内才能使用他们，在此函数以外是不能使用这些变量的。这称为“局部变量”。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">float</span> <span class="title">f1</span><span class="params">(<span class="keyword">int</span> a)</span></span>&#123; <span class="comment">//函数f1</span></span><br><span class="line">	<span class="keyword">int</span> b,c; <span class="comment">//a,b,c有效</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">char</span> <span class="title">f2</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span>&#123; <span class="comment">// 函数f2</span></span><br><span class="line">	<span class="keyword">int</span> i,j;<span class="comment">//x,y,i,j有效</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">()</span></span>&#123; <span class="comment">//主函数</span></span><br><span class="line">	<span class="keyword">int</span> m,n; <span class="comment">//m,n有效</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>说明：</p>
<ol>
<li>主函数中定义的变量只能在主函数中有效。</li>
<li>不同函数体内可以定义相同名称的局部变量，各局部变量之间互不干扰。</li>
<li>形式参数也是局部比那辆。例如上面f1函数中的形式参数a，也只在f1函数中有效。</li>
<li>复合语句中定义的变量称为局部变量，该变量只能在该复合语句中使用。</li>
</ol>
<p><strong>全局变量</strong></p>
<p>在函数内定义的变量是局部变量，而在函数之外定义的变量成为外部变量，外部变量是全局变量（也称为全程变量）。</p>
<p>全局变量可以为本文件中其他函数所共用。它的有效范围为从定义变量的位置开始到本源文件结束。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> p=<span class="number">1</span>,q=<span class="number">5</span>; <span class="comment">//外部变量</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">f1</span><span class="params">(<span class="keyword">int</span> o)</span></span>&#123; <span class="comment">//o为局部变量</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">char</span> m=<span class="number">1</span>,n=<span class="number">1</span>;<span class="comment">//外部变量 在此位置以下函数都可以使用该变量</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">f2</span><span class="params">(<span class="keyword">char</span> e )</span></span>&#123;<span class="comment">//e为局部变量</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>实战演练：</p>
<p>题目1：输入正方体的长，宽，高。求体积以及三个面x<em>y,x</em>z,y*z的面积</p>
<p>源码分析：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="keyword">int</span> s1,s2,s3;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">vs</span><span class="params">(<span class="keyword">int</span> a,<span class="keyword">int</span> b,<span class="keyword">int</span> c)</span></span>&#123;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">int</span> v;</span><br><span class="line">	v=a*b*c;</span><br><span class="line">	s1=a*b;</span><br><span class="line">	s2=a*c;</span><br><span class="line">	s3=b*c;</span><br><span class="line">	<span class="keyword">return</span> v;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> l,w,h;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"请输入长方体的长宽高：\n"</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">"%d,%d,%d"</span>,&amp;l,&amp;w,&amp;h);</span><br><span class="line">	<span class="keyword">int</span> v=vs(l,w,h);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"\ns1=%d,s2=%d,s3=%d,v=%d\n"</span>,s1,s2,s3,v);	</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>题目2:有一个一维数组，内存放10个学生成绩，写一个函数，求出平均值、最高分和最低分。</p>
<p>程序源码：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="keyword">int</span> max,min;</span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">average</span><span class="params">(<span class="keyword">int</span> a[])</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> i,sum=<span class="number">0</span>;</span><br><span class="line">	min=a[<span class="number">0</span>],max=a[<span class="number">0</span>];</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;<span class="number">10</span>;i++)&#123;</span><br><span class="line">		<span class="keyword">if</span>( min &gt; a[i])&#123;</span><br><span class="line">			min = a[i];<span class="comment">//求最小值 </span></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span>( max &lt; a[i])&#123;</span><br><span class="line">			max = a[i];<span class="comment">//求最大值 </span></span><br><span class="line">		&#125; </span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++)&#123;</span><br><span class="line">		sum += a[i];</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> sum*<span class="number">1.0</span>/<span class="number">10</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> a[<span class="number">10</span>]=&#123;<span class="number">96</span>,<span class="number">54</span>,<span class="number">85</span>,<span class="number">68</span>,<span class="number">77</span>,<span class="number">86</span>,<span class="number">10</span>,<span class="number">11</span>,<span class="number">56</span>,<span class="number">85</span>&#125;;</span><br><span class="line">	<span class="keyword">double</span> avg;</span><br><span class="line">	avg=average(a);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"min=%d,max=%d,avg=%lf"</span>,min,max,avg);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="变量的存储类型"><a href="#变量的存储类型" class="headerlink" title="变量的存储类型"></a>变量的存储类型</h3><p><strong>动态存储方式</strong></p>
<p>动态存储方式是在程序运行期间根据需要进行动态的分配存储空间的方式。</p>
<p><strong>静态存储方式</strong></p>
<p>静态存储方式是指在程序运行开始时由系统分配固定的存储空间的方式。</p>
<p><strong>用户存储空间可以分为三部分</strong></p>
<ol>
<li>程序区</li>
<li>静态存储区</li>
<li>动态存储区</li>
</ol>
<p>在C语言中每一个变量和函数有两个属性：数据类型和数据的存储类别。<br>对数据型（如整形，字符型等）。存储类型是指在内存中存储的方式。<br>存储类型分为两大类：静态存储类和动态存储类。</p>
<p>具体包括四种：自动的(auto)、静态的(static)、寄存器的（register）、外部的（extern）。根据变量的存储类型，可以知道变量的作用域和生存期。</p>
<p><strong>auto变量</strong></p>
<p>函数中的局部变量，如不专门声明为static存储类别，都是动态的分配存储空间的栈，数据存储在动态存储区中。</p>
<p>函数中的形参和函数中定义的变量（包括在复合语句中定义的变量），都是此类，在调用该函数时系统会给他们分配存储空间，在函数调用结束时会自动释放这些存储空间。</p>
<p>因此这类局部变量称为自动变量。自动变量用关键字auto做存储类别的声明。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">f</span><span class="params">(<span class="keyword">int</span> a)</span></span>&#123;<span class="comment">//定义f函数,a为形参 </span></span><br><span class="line">	<span class="keyword">auto</span> <span class="keyword">int</span> b,c=<span class="number">2</span>;<span class="comment">//定义b,c为自动变量 </span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>关键字auto可以省略，auto不写则隐含定义为“自动存储类别”，属于动态存储方式。</p>
<p><strong>用static声明局部变量</strong></p>
<p>有时希望函数中的局部变量的值在函数调用结束后不消失而保留原值，即其占用的存储单元不释放，在下一次该函数调用时，该变量已有值，就是上一次函数调用结束时的值。</p>
<p>这时就应该指定该局部变量为“静态局部变量”，用关键字static进行声明。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">f</span><span class="params">(<span class="keyword">int</span> a)</span></span>&#123;</span><br><span class="line">	<span class="keyword">auto</span> <span class="keyword">int</span> b=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">static</span> <span class="keyword">int</span> c=<span class="number">3</span>;</span><br><span class="line">	</span><br><span class="line">	b=b+<span class="number">1</span>;<span class="comment">// b == 1 , 1 , 1</span></span><br><span class="line">	c=c+<span class="number">1</span>;<span class="comment">// c == 4 , 5 , 6</span></span><br><span class="line">	</span><br><span class="line">	<span class="keyword">return</span> a+b+c; <span class="comment">//7,8,9</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> a=<span class="number">2</span>,i;</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">3</span>;i++)&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%d\n"</span>,f(a));</span><br><span class="line">	&#125;	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>说明：</p>
<ol>
<li>静态局部变量属于静态存储类别，在静态存储区内分配存储单元。在程序整个运行期间都不释放。</li>
<li>对静态局部变量是在编译时赋初值的。</li>
<li>如在定义局部变量不赋初值时，静态局部变量会自动赋为0（对数值而言）或空字符串（对字符串而言）。</li>
<li>虽然静态局部变量在函数调用结束后仍然存在，但是其他函数是不能引用它的。</li>
</ol>
<p>实战演练：</p>
<p>题目1：输出1到5的阶乘值：</p>
<p>程序源码分析：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">fac</span><span class="params">(<span class="keyword">int</span> k)</span></span>&#123;</span><br><span class="line">	<span class="keyword">static</span> <span class="keyword">int</span> f = <span class="number">1</span>;</span><br><span class="line">	f = f * k;</span><br><span class="line">	<span class="keyword">return</span> f;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> i;</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=<span class="number">5</span>;i++)&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%d! = %d\n"</span>,i,fac(i));</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>register变量</strong></p>
<p>一般情况下，变量（包括静态存储方式和动态存储方式）的值是存放在内存中。</p>
<p>如果频繁使用到某个变量，这时可以考虑使用register存储类别，使用register存储类别，可以将变量存放到寄存器中，这样做可以提高执行效率。（原因：对寄存器的存取速度远高于对内存的存取速度。）</p>
<p>实战演练：</p>
<p>题目1：输出1到n的阶乘值：</p>
<p>程序源码分析：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">fac</span><span class="params">(<span class="keyword">int</span> n)</span></span>&#123;</span><br><span class="line">	 <span class="comment">//注意：整个版本不使用static，所以把阶层的过程放在fac()函数中</span></span><br><span class="line">	 <span class="keyword">register</span> <span class="keyword">int</span> i,f=<span class="number">1</span>;</span><br><span class="line">	 <span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">	 	f = f * i;</span><br><span class="line">	 &#125; </span><br><span class="line">	 <span class="keyword">return</span> f;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> i;</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=<span class="number">15</span>;i++)&#123;</span><br><span class="line">	 <span class="built_in">printf</span>(<span class="string">"%d!=%d\n"</span>,i,fac(i));</span><br><span class="line">	&#125; </span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>extern变量</strong></p>
<p>外部变量即全局变量，它的作用域是从变量的定义处开始，到本程序文件的末尾。</p>
<p>在此作用域内，编译时将外部变量分配在静态存储区。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">max</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> z;</span><br><span class="line">	z=x&gt;y?x:y;</span><br><span class="line">	<span class="keyword">return</span> z;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">extern</span> A,B;<span class="comment">//声明全局变量</span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%d\n"</span>,max(A,B)); </span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> A = <span class="number">13</span> , B = <span class="number">-8</span>;</span><br></pre></td></tr></table></figure>

<h3 id="在多文件的程序中声明外部变量"><a href="#在多文件的程序中声明外部变量" class="headerlink" title="在多文件的程序中声明外部变量"></a>在多文件的程序中声明外部变量</h3><p>题目：将一个程序拆成多个文件</p>
<p>程序源码分析：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//main.c</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> A;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">power</span><span class="params">(<span class="keyword">int</span> n)</span></span>;<span class="comment">//函数声明</span></span><br><span class="line">	<span class="keyword">int</span> b=<span class="number">3</span>,c,d,m;</span><br><span class="line">	</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"enter the number a and its power m:\n"</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">"%d,%d"</span>,&amp;A,&amp;m);</span><br><span class="line">	</span><br><span class="line">	c=A*b;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%d * %d = %d\n"</span>,A,b,c);</span><br><span class="line">	</span><br><span class="line">	d=power(m);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%d ^ %d = %d\n"</span>,A,m,d); </span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//file1.c</span></span><br><span class="line"><span class="keyword">extern</span> A;<span class="comment">//声明A为一个已定义的外部变量 </span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">power</span><span class="params">(<span class="keyword">int</span> n)</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> i,y=<span class="number">1</span>;</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">		y = y*A;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> y;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>用static声明外部变量</strong></p>
<p>用static修饰的外部变量只能被本文件使用，在其他文件中是无法引用的。</p>
<h3 id="小结："><a href="#小结：" class="headerlink" title="小结："></a>小结：</h3><p><strong>局部变量和全局变量</strong></p>
<p>局部变量：自动变量，静态局部变量，寄存器变量</p>
<p>全局变量：静态外部变量，只能在本文件中使用。外部变量：用<code>extern</code>修饰的变量。</p>
<p><strong>静态存储和动态存储</strong></p>
<p>静态存储：在整个程序运行过程中都存在。<br>动态存储：在整个函数调用完成之外存在。</p>
<p>动态存储：自动变量，形式参数，寄存器变量<br>静态存储：静态外部变量，静态局部变量，外部变量。</p>
<p><strong>static对局部变量和全局变量的作用</strong></p>
<p>对局部变量来说，它是局部变量由动态存储方式转变静态存储方式。而对全部变量来说，它使变量局部化（局部于本文件），但仍为静态存储方式.</p>
<p><strong>外部函数和内部函数</strong></p>
<p>内部函数：只能在本文件中使用。<code>staic 类型说明符 函数名(形式参数)</code><br>外部函数：可以在外部文件中使用。<code>extern 类型说明符 函数名(形式参数)</code></p>
<p>实战演练：</p>
<p>题目：根据删除字符串中指定的某个字符。</p>
<p>程序源码分析：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//创建一个C工程 project.dev</span></span><br><span class="line"><span class="comment">//创建四个文件</span></span><br><span class="line"><span class="comment">//file03.c</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"stdio.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"string.h"</span></span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print_string</span><span class="params">(<span class="keyword">char</span> str[])</span></span>&#123;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%s\n"</span>,str);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//file02.c</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">delete_string</span><span class="params">(<span class="keyword">char</span> str[],<span class="keyword">char</span> ch)</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> i,j;</span><br><span class="line">	<span class="keyword">for</span>(i=j=<span class="number">0</span>;str[i]!=<span class="string">'\0'</span>;i++)&#123;</span><br><span class="line">		<span class="keyword">if</span>( str[i] != ch)&#123;</span><br><span class="line">			str[j++] = str[i];</span><br><span class="line">		&#125;</span><br><span class="line">	&#125; </span><br><span class="line">	str[j] = <span class="string">'\0'</span>;</span><br><span class="line">	</span><br><span class="line">&#125; </span><br><span class="line"><span class="comment">//file01.c</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"stdio.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"string.h"</span></span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">enter_string</span><span class="params">(<span class="keyword">char</span> str[<span class="number">80</span>])</span></span>&#123;</span><br><span class="line">	gets(str);<span class="comment">//输入一个字符串 </span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//main.c</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="comment">//定义外部函数</span></span><br><span class="line">	<span class="function"><span class="keyword">extern</span> <span class="keyword">void</span> <span class="title">enter_string</span><span class="params">(<span class="keyword">char</span> str[])</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">extern</span> <span class="keyword">void</span> <span class="title">delete_string</span><span class="params">(<span class="keyword">char</span> str[],<span class="keyword">char</span> ch)</span></span>; </span><br><span class="line">	<span class="function"><span class="keyword">extern</span> <span class="keyword">void</span> <span class="title">print_string</span><span class="params">(<span class="keyword">char</span> str[])</span></span>;</span><br><span class="line">	<span class="keyword">char</span> c;</span><br><span class="line">	<span class="keyword">char</span> str[<span class="number">80</span>];</span><br><span class="line">	</span><br><span class="line">	enter_string(str);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">"%c"</span>,&amp;c);</span><br><span class="line">	delete_string(str,c);</span><br><span class="line">	print_string(str);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="指针"><a href="#指针" class="headerlink" title="指针"></a>指针</h2><p>指针是C语言中的一个重要的概念,也是C语言中的一个重要特色.</p>
<p>正确灵活地运用指针,可以有效地表示复杂的数据结构;能动态分配内存;能方便的使用字符串;有效而方便地使用数组.</p>
<p>掌握指针的应用,可以使程序简洁 紧凑 高效.</p>
<p>内存区的每一个字节都有一个编号,这就是”地址”.如果在程序中定义了一个变量,在对程序进行编译时,系统就会为这个变量分配内存单元.</p>
<p>在C语言中,指针是一种特殊的变量,他是存放地址的.</p>
<p>两个操作符:<code>*</code>和<code>&amp;</code></p>
<p><code>*</code>:取值操作符<br><code>&amp;</code>:取址操作符</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"stdio.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> i=<span class="number">2000</span>;</span><br><span class="line">	<span class="keyword">int</span> *pointer;</span><br><span class="line">	pointer = &amp;i;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%d\n"</span>,*pointer);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="指针与指针变量"><a href="#指针与指针变量" class="headerlink" title="指针与指针变量"></a>指针与指针变量</h3><p>知道了一个变量的地址,就可以通过这个地址来访问这个变量,因此,又把变量的地址称为该变量的”指针”.</p>
<p>C语言中可以定义一类特殊的变量,这些变量专门用来存放变量的地址,称为指针变量.</p>
<p>注意:指针变量的值(即指针变量中存放的值)是地址(即指针).</p>
<p>练习:通过指针变量访问整型变量</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"stdio.h"</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> a,b;</span><br><span class="line">	<span class="keyword">int</span> *pointer_1,*pointer_2;</span><br><span class="line">	a=<span class="number">100</span>;b=<span class="number">10</span>;</span><br><span class="line">	pointer_1 = &amp;a;</span><br><span class="line">	pointer_2 = &amp;b;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%d,%d\n"</span>,a,b);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%d,%d\n"</span>,*pointer_1,*pointer_2);</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>代码分析:</p>
<p><img src="https://i.loli.net/2020/01/12/vuMqgYND4ZHmp7J.png" alt="1578819611_1_.jpg"></p>
<h3 id="对-amp-和-运算符再做说明"><a href="#对-amp-和-运算符再做说明" class="headerlink" title="对&amp;和*运算符再做说明"></a>对<code>&amp;</code>和<code>*</code>运算符再做说明</h3><p> 如果已执行了语句: <code>pointer_1 = &amp;a</code>;</p>
<p>&amp; *pointer_1的含义是什么???</p>
<p>“&amp;”和”*”两个运算符的优先级别相同,但自右向左方向结合,因此先进行*pointer运算,他就是变量a,再执行&amp;运算.</p>
<p>因此,&amp; * pointer_1 = &amp;a相同,即变量a的地址.</p>
<p>题目1:输入a和b两个整数,按先大后小的顺序输出a和b</p>
<p>程序源码分析:</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"stdio.h"</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> *p,*q,*r,a,b;</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">"%d,%d"</span>,&amp;a,&amp;b);</span><br><span class="line">	p=&amp;a;q=&amp;b;</span><br><span class="line">	<span class="keyword">if</span>(a&lt;b)&#123;</span><br><span class="line">		r=p;</span><br><span class="line">		p=q;</span><br><span class="line">		q=r;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"a=%d,b=%d\n"</span>,a,b);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"*p=%d,*q=%d\n"</span>,*p,*q);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>题目2:输入a和b两个整数,按先大后小的顺序输出a和b,用函数功能实现</p>
<p>程序源码分析:</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"stdio.h"</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">swap</span><span class="params">(<span class="keyword">int</span> *p,<span class="keyword">int</span> *q)</span></span>;</span><br><span class="line">	<span class="keyword">int</span> *a,*b;</span><br><span class="line">	<span class="keyword">int</span> d,e;</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">"%d,%d"</span>,&amp;d,&amp;e);</span><br><span class="line">	a=&amp;d;b=&amp;e;</span><br><span class="line">	<span class="keyword">if</span>(d &lt; e)&#123;</span><br><span class="line">		swap(a,b);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%d &gt; %d"</span>,*a,*b);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">swap</span><span class="params">(<span class="keyword">int</span> *p,<span class="keyword">int</span> *q)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> t;</span><br><span class="line">	t=*p;</span><br><span class="line">	*p=*q;</span><br><span class="line">	*q=t;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>题目3:输入a,b,c三个整数,要求从大到小输出</p>
<p>程序源码分析:</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"stdio.h"</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">exchange</span><span class="params">(<span class="keyword">int</span> *p1,<span class="keyword">int</span> *p2,<span class="keyword">int</span> *p3)</span></span>;<span class="comment">//确保a&gt;b&gt;c</span></span><br><span class="line">	<span class="keyword">int</span> a,b,c,*q1,*q2,*q3;</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">"%d,%d,%d"</span>,&amp;a,&amp;b,&amp;c);</span><br><span class="line">	q1=&amp;a;q2=&amp;b,q3=&amp;c;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"开始排序...\n"</span>);</span><br><span class="line">	exchange(q1,q2,q3);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"排序结束，输出结果...\n"</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%d &gt; %d &gt; %d"</span>,*q1,*q2,*q3);</span><br><span class="line">	 </span><br><span class="line">	</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">exchange</span><span class="params">(<span class="keyword">int</span> *p1,<span class="keyword">int</span> *p2,<span class="keyword">int</span> *p3)</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">swap</span><span class="params">(<span class="keyword">int</span> *t1,<span class="keyword">int</span> *t2)</span></span>; <span class="comment">//进行两个数交换 </span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"exchange函数进行中...\n"</span>);</span><br><span class="line">	<span class="keyword">if</span>(*p1 &lt; *p2)&#123;</span><br><span class="line">		swap(p1,p2);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span>(*p1 &lt; *p3)&#123;</span><br><span class="line">		swap(p1,p3);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span>(*p2 &lt; *p3)&#123;</span><br><span class="line">		swap(p2,p3);</span><br><span class="line">	&#125;	</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"exchange函数执行完毕...\n"</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">swap</span><span class="params">(<span class="keyword">int</span> *t1,<span class="keyword">int</span> *t2)</span></span>&#123;</span><br><span class="line">	<span class="keyword">static</span> <span class="keyword">int</span> i=<span class="number">1</span>;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"交换进行中%d...\n"</span>,i);</span><br><span class="line">	<span class="keyword">int</span> t;</span><br><span class="line">	t=*t1;</span><br><span class="line">	*t1=*t2;</span><br><span class="line">	*t2=t;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"交换结束%d...\n"</span>,i);</span><br><span class="line">	i++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="数组与指针"><a href="#数组与指针" class="headerlink" title="数组与指针"></a>数组与指针</h3><p>一个变量有地址，一个数组包含若干元素，每个数组元素都在内存中占用存储单元，他们都有相应的地址。</p>
<p>指针变量既可以指向变量，当然也可以指向数组元素。（把某一元素的地址放到指针变量中）</p>
<p>所谓数组元素的指针就是数组元素的地址。</p>
<p>定义一个指向数组元素的指针变量的方法，与前面介绍的指向变量的指针变量相同。</p>
<p>例如：<br><code>int a[10];</code>定义a为包含10整型数据的数组。<br><code>int *p</code>：定义p为指向整型变量的指针变量。<br>应当注意：如果数组为int型，则指针变量的基本类型亦应为int型。</p>
<p>引用一个数组元素，可以用：<br>（1）下标法：如<code>a[i]</code>形式；<br>（2）指针法：如<em>(a+i)或</em>(p+i)；<br>其中的a是数组名，p是指向数组元素的指针变量，其初值为p=a;<br>注意：数组名即为数组第一个元素的地址。</p>
<p>实战演习：</p>
<p>题目：输出数组中的全部元素：</p>
<p>分析：假设有一个a数组，整型，有10个元素。要输出各元素的值有三种方法：</p>
<p>程序源码分析：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"stdio.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">print_array_by_xiabiao</span><span class="params">(<span class="keyword">int</span> <span class="built_in">array</span>[],<span class="keyword">int</span> n)</span></span>;<span class="comment">//下标法输出数组元素 </span></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">print_array_by_point1</span><span class="params">(<span class="keyword">int</span> <span class="built_in">array</span>[],<span class="keyword">int</span> n)</span></span>;<span class="comment">//指针法输出数组元素  *(a+i)</span></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">print_array_by_point2</span><span class="params">(<span class="keyword">int</span> <span class="built_in">array</span>[],<span class="keyword">int</span> n)</span></span>;<span class="comment">//指针法输出数组元素  *(p+i)</span></span><br><span class="line">	<span class="keyword">int</span> b[<span class="number">10</span>]=&#123;<span class="number">15</span>,<span class="number">36</span>,<span class="number">98</span>,<span class="number">75</span>,<span class="number">63</span>,<span class="number">14</span>,<span class="number">89</span>,<span class="number">42</span>,<span class="number">10</span>,<span class="number">9</span>&#125;;</span><br><span class="line">	print_array_by_xiabiao(b,<span class="number">10</span>);</span><br><span class="line">	print_array_by_point1(b,<span class="number">10</span>);</span><br><span class="line">	print_array_by_point2(b,<span class="number">10</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print_array_by_xiabiao</span><span class="params">(<span class="keyword">int</span> <span class="built_in">array</span>[],<span class="keyword">int</span> n)</span></span>&#123;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">".........下标法输出数组个元素.........\n"</span>);</span><br><span class="line">	<span class="keyword">int</span> i;</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;n;i++)&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%d "</span>,<span class="built_in">array</span>[i]);</span><br><span class="line">	&#125; </span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print_array_by_point1</span><span class="params">(<span class="keyword">int</span> <span class="built_in">array</span>[],<span class="keyword">int</span> n)</span></span>&#123;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">".........指针法输出数组个元素 *(a+i).........\n"</span>);</span><br><span class="line">	<span class="keyword">int</span> i;</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;n;i++)&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%d "</span>,*(<span class="built_in">array</span>+i));</span><br><span class="line">	&#125; </span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print_array_by_point2</span><span class="params">(<span class="keyword">int</span> <span class="built_in">array</span>[],<span class="keyword">int</span> n)</span></span>&#123;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">".........指针法输出数组个元素 *(p+i).........\n"</span>);</span><br><span class="line">	<span class="keyword">int</span> i,*p;</span><br><span class="line">	<span class="keyword">for</span>(p=<span class="built_in">array</span>,i=<span class="number">0</span>;i&lt;n;i++)&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%d "</span>,*(p+i));</span><br><span class="line">	&#125; </span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>题目：实现将一个数组逆转</p>
<p>程序源码分析：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">reverse</span><span class="params">(<span class="keyword">int</span> *x,<span class="keyword">int</span> n)</span></span>&#123;<span class="comment">/*形参x为指针变量*/</span></span><br><span class="line">	<span class="keyword">int</span> *p,*q,temp,*i,*j,m;</span><br><span class="line">	m = (n<span class="number">-1</span>)/<span class="number">2</span>;</span><br><span class="line">	i=x;<span class="comment">//i指向数组的第一个元素 </span></span><br><span class="line">	j=x+n<span class="number">-1</span>;<span class="comment">//j指向数组的最后一个元素 </span></span><br><span class="line">	p=x+m;</span><br><span class="line">	<span class="keyword">for</span>(;i&lt;=p;i++,j--)&#123;</span><br><span class="line">		temp=*i;</span><br><span class="line">		*i=*j;</span><br><span class="line">		*j=temp;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> a[<span class="number">10</span>],i,*p;</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++)&#123;</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;a[i]);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"output a array:\n"</span>);</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++)&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%d "</span>,a[i]);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">	reverse(a,<span class="number">10</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"output a reverse array:\n"</span>);</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++)&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%d "</span>,a[i]);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>题目：从10个数找出最大值和最小值</p>
<p>程序源码分析：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"stdio.h"</span></span></span><br><span class="line"><span class="comment">//第二个版本</span></span><br><span class="line"><span class="keyword">int</span> max,min;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">max_min_value</span><span class="params">(<span class="keyword">int</span> *p,<span class="keyword">int</span> n)</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> *q;</span><br><span class="line">	min=*p;</span><br><span class="line">	max=*p;</span><br><span class="line">	<span class="keyword">for</span>(q=(p+<span class="number">1</span>);q&lt;(p+n);q++)&#123;</span><br><span class="line">		<span class="keyword">if</span>(min&gt;*q) &#123;</span><br><span class="line">			min= *q;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span>(max&lt;*q)&#123;</span><br><span class="line">			max=*q;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> a[<span class="number">10</span>],i;</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++)&#123;</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;a[i]); </span><br><span class="line">	&#125; </span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"output a array:\n"</span>);</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++)&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%d "</span>,a[i]);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">	max_min_value(a,<span class="number">10</span>); </span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"max=%d,min=%d"</span>,max,min);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//第一个版本 </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"stdio.h"</span></span></span><br><span class="line"><span class="keyword">int</span> max,min;<span class="comment">//定义最大值和最小值 </span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">max_min_value</span><span class="params">(<span class="keyword">int</span> <span class="built_in">array</span>[],<span class="keyword">int</span> n)</span></span>&#123;<span class="comment">//找到最大值和最小值 </span></span><br><span class="line">	<span class="keyword">int</span> i;</span><br><span class="line">	min = <span class="built_in">array</span>[<span class="number">0</span>];</span><br><span class="line">	max = <span class="built_in">array</span>[<span class="number">0</span>];</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;n;i++)&#123;</span><br><span class="line">		<span class="keyword">if</span>(max&lt;<span class="built_in">array</span>[i])&#123;</span><br><span class="line">			max=<span class="built_in">array</span>[i];</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span>(min &gt; <span class="built_in">array</span>[i])&#123;</span><br><span class="line">			min=<span class="built_in">array</span>[i];</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> a[<span class="number">10</span>],i;</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++)&#123;</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;a[i]); </span><br><span class="line">	&#125; </span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"output a array:\n"</span>);</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++)&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%d "</span>,a[i]);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">	max_min_value(a,<span class="number">10</span>); </span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"max=%d,min=%d"</span>,max,min);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h3><p>归纳起来，如果有一个实参数组，想在函数中改变此数组中的元素的值，实参与形参的对应关系有以下4种情况：</p>
<ol>
<li>形参和实参都用数组名；</li>
<li>实参用数组名，形参用数组名；</li>
<li>实参形参都用指针变量；</li>
<li>实参为指针变量，形参为数组名称；</li>
</ol>
<h3 id="多维数组与指针"><a href="#多维数组与指针" class="headerlink" title="多维数组与指针"></a>多维数组与指针</h3><p>用指针变量可以指向一维数组种的元素，也可以指向多维数组种元素。</p>
<p>源码分析：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"stdio.h"</span></span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> a[<span class="number">2</span>][<span class="number">3</span>]=&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>&#125;;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"a:%d\n"</span>,a);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"*a:%d\n"</span>,*a);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"a[0]:%d\n"</span>,a[<span class="number">0</span>]);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"&amp;a[0]:%d\n"</span>,&amp;a[<span class="number">0</span>]);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"&amp;a[0][0]:%d\n"</span>,&amp;a[<span class="number">0</span>][<span class="number">0</span>]);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"*(a+1)+1：%d\n"</span>,*(a+<span class="number">1</span>)+<span class="number">1</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"*(*(a+1)+1)：%d"</span>,*(*(a+<span class="number">1</span>)+<span class="number">1</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>指向多维数组元素的指针变量</strong></p>
<p>把二维数组a分解为一维数组<code>a[0]</code>、<code>a[1]</code>、<code>a[2]</code>、<code>a[3]</code>之后，设p为指向二维数组的指针变量。可定义为：<code>int (*p)[4];</code></p>
<p>它表示p是一个指针变量，它指向包含4个元素的一维数组。若指向第一个一维数组<code>a[0]</code>,其值等于<code>a</code>,<code>a[0]</code>或<code>a[0][0]</code>等.</p>
<p><code>*(p+i)+j</code>：它表示二位数组i行j列的元素的地址，而<code>*(*(p+i)+j)</code>则是该地址的值；</p>
<p>二维数组指针变量说明的一般形式：<code>类型说明符 (*指针变量吗名)[长度]</code></p>
<p>实战练习：</p>
<p>题目：用指针变量输出二维数组的值</p>
<p>程序源码分析：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"stdio.h"</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> a[<span class="number">3</span>][<span class="number">4</span>]=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>,<span class="number">11</span>&#125;;</span><br><span class="line">	<span class="keyword">int</span> (*p)[<span class="number">4</span>],i,j;</span><br><span class="line">	p=a;</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">3</span>;i++)&#123;</span><br><span class="line">		<span class="keyword">for</span>(j=<span class="number">0</span>;j&lt;<span class="number">4</span>;j++)&#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">"%2d "</span>,*(*(p+i)+j));</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>题目2：通过输入指定行数和列数打印出二维数组对应行对应列元素的值</p>
<p>程序源码分析：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"stdio.h"</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> a[<span class="number">3</span>][<span class="number">4</span>]=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>,<span class="number">11</span>&#125;;</span><br><span class="line">	<span class="keyword">int</span> (*p)[<span class="number">4</span>],i,j,k,l;</span><br><span class="line">	p=a;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"i="</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;i);</span><br><span class="line">	<span class="keyword">while</span>(i&lt;<span class="number">0</span> || i&gt;<span class="number">2</span>)&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"i="</span>);</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;i);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"j="</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;j);</span><br><span class="line">	<span class="keyword">while</span>(j&lt;<span class="number">0</span> || j&gt;<span class="number">3</span>)&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"j="</span>);</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;j);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">for</span>(k=<span class="number">0</span>;k&lt;<span class="number">3</span>;k++)&#123;</span><br><span class="line">		<span class="keyword">for</span>(l=<span class="number">0</span>;l&lt;<span class="number">4</span>;l++)&#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">"%2d "</span>,*(*(p+k)+l));</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"a[%d][%d]=%2d\n"</span>,i,j,*(*(p+i)+j)); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="字符串和指针"><a href="#字符串和指针" class="headerlink" title="字符串和指针"></a>字符串和指针</h3><p>用字符数组存放一个字符串，然后输出该字符串</p>
<p>题目练习：定义一个字符数组，对它初始化，然后输出该字符串</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"stdio.h"</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">char</span> <span class="built_in">array</span>[]=<span class="string">"I Love Java Program"</span>;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%s\n"</span>,<span class="built_in">array</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>用指针变量的形式定义一个字符串，并输出该字符串</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"stdio.h"</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">char</span> *<span class="built_in">array</span>=<span class="string">"I Love Java Program"</span>;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%s\n"</span>,<span class="built_in">array</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>对字符串中字符的存取，可以用下标方法，也可以用指针方法！</p>
<p>下标法:</p>
<p>题目：实现字符串的复制</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"stdio.h"</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">char</span> a[]=<span class="string">"i love the China very much"</span>,b[<span class="number">40</span>],i,j;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">0</span>;a[i]!=<span class="string">'\0'</span>;i++)&#123;</span><br><span class="line">		b[j++] = a[i];</span><br><span class="line">	&#125;</span><br><span class="line">	b[j]=<span class="string">'\0'</span>;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"the a string is:%s\n"</span>,a);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"the b string is:"</span>);</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">0</span>;b[i]!=<span class="string">'\0'</span>;i++)&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%c"</span>,b[i]);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>指针法:</p>
<p>题目：实现字符串的复制</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"stdio.h"</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">char</span> a[]=<span class="string">"i love the China very very much"</span>,b[<span class="number">40</span>],*q,*p;</span><br><span class="line">	<span class="keyword">int</span> i;</span><br><span class="line">	p=a;q=b;</span><br><span class="line">	<span class="keyword">for</span>(;*p!=<span class="string">'\0'</span>;p++,q++)&#123;</span><br><span class="line">		*q=*p;</span><br><span class="line">	&#125;</span><br><span class="line">	*q=<span class="string">'\0'</span>;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"the string a is:%s\n"</span>,a);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"the string b is:"</span>);</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">0</span>;b[i]!=<span class="string">'\0'</span>;i++)&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%c"</span>,*(b+i));</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>用函数调用实现字符串的复制</p>
<p>用字符数组作为参数：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"stdio.h"</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">copy_string</span><span class="params">(<span class="keyword">char</span> from[],<span class="keyword">char</span> to[])</span></span>;</span><br><span class="line">	<span class="keyword">char</span> a[]=<span class="string">"i am a teacher."</span>,b[]=<span class="string">"you are a student."</span>;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"string a:%s\nstring b:%s\n"</span>,a,b);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"copy string a to string b:\n"</span>);</span><br><span class="line">	copy_string(a,b);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"\nstring a:%s\nstring b:%s\n"</span>,a,b);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">copy_string</span><span class="params">(<span class="keyword">char</span> from[],<span class="keyword">char</span> to[])</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> i=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span>(i;from[i]!=<span class="string">'\0'</span>;i++)&#123;</span><br><span class="line">		to[i]=from[i];</span><br><span class="line">	&#125;</span><br><span class="line">	to[i]=<span class="string">'\0'</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>形参用字符指针变量</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"stdio.h"</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">copy_string</span><span class="params">(<span class="keyword">char</span> from[],<span class="keyword">char</span> to[])</span></span>;</span><br><span class="line">	<span class="keyword">char</span> *a=<span class="string">"i am a student."</span>;</span><br><span class="line">	<span class="keyword">char</span> *b=<span class="string">"you are a teacher."</span>;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"string a is:%s\n"</span>,a);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"string b is:%s\n"</span>,b);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"copy string a to string b:"</span>);</span><br><span class="line">	copy_string(a,b);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"\nstring a:%s\nstring b:%s\n"</span>,a,b);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">copy_string</span><span class="params">(<span class="keyword">char</span> from[],<span class="keyword">char</span> to[])</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> i,j=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">0</span>;from[i]!=<span class="string">'\0'</span>;i++)&#123;</span><br><span class="line">		to[j++]=from[i];</span><br><span class="line">	&#125;</span><br><span class="line">	to[j]=<span class="string">'\0'</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//程序执行出错</span></span><br></pre></td></tr></table></figure>

<p>上面程序出错的原因之一：用指针变量定义的字符串在vs6c++中是存放在常量存储区中，而常量存储区中的值只能读不能写，所以想要覆盖则会出错。</p>
<p>关于<code>a[]</code>和<code>*a</code>的区别</p>
<p>优化：对copy_string函数还可作简化</p>
<p>。。。</p>
<p><strong>对使用字符数组和字符指针变量的讨论</strong></p>
<p>虽然用字符数组和字符指针变量都能实现字符串的存储和运算，但是它们二者之间是由区别的，不应混为一谈…</p>
<p>主要概括起来有以下几点：</p>
<ol>
<li>字符数组若由干个元素组成，每个元素中放一字符，而字符指针变量中存放的是地址（字符串第一个字符的地址），绝不是将字符串存放到字符指针变量中。</li>
<li>赋值方式。对字符数组只能对各个元素赋值。而字符指针变量，可以采用如下方式赋值<code>char *p;p=&quot;I Love China very much!&quot;;</code></li>
<li>初始化的含义；</li>
<li>存储单元的内容</li>
<li>指针变量的值可以改变</li>
</ol>
<h3 id="指向函数的指针"><a href="#指向函数的指针" class="headerlink" title="指向函数的指针"></a>指向函数的指针</h3><p>用函数指针变量调用函数</p>
<p>一个函数在编译时被分配一个入口地址。这个函数入口地址就称为函数的指针。</p>
<p>程序源码分析：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span>(1) </span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">max</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span>;</span><br><span class="line">	<span class="keyword">int</span> (*p)(<span class="keyword">int</span> x,<span class="keyword">int</span> y);</span><br><span class="line">	p=max;</span><br><span class="line">	<span class="keyword">int</span> a,b,c;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"please enter e and f:"</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">"%d,%d"</span>,&amp;a,&amp;b);</span><br><span class="line">	c=(*p)(a,b);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"a=%d\nb=%d\nmax=%d\n"</span>,a,b,c);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span>(0)</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">max</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span>;<span class="comment">//求最大值</span></span><br><span class="line">	<span class="keyword">int</span> a,b,c;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"please enter a and b:"</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">"%d,%d"</span>,&amp;a,&amp;b);</span><br><span class="line">	c=max(a,b);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"a=%d\nb=%d\nmax=%d\n"</span>,a,b,c);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">max</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> z;</span><br><span class="line">	<span class="keyword">if</span>(x&gt;y)&#123;</span><br><span class="line">		z=x;</span><br><span class="line">	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">		z=y;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> z;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>函数指针变量最常用的用途之一是把指针作为参数传递到其他函数。</p>
<p>指向函数的指针可以作为参数，以实现函数地址的传递，这样就能够在被调用的函数中使用实参函数。</p>
<p>实战演练：</p>
<p>题目：设计一个函数procress，在调用它的时候，每次实现不同的功能。（有点类似多态）</p>
<p>程序源码分析：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="comment">//实现多态 1.+2.-3.*4./</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span>(1)</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="comment">//实现一个小型计算器 </span></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">process</span><span class="params">(<span class="keyword">int</span> a,<span class="keyword">int</span> b,<span class="keyword">int</span> (*p)(<span class="keyword">int</span> x,<span class="keyword">int</span> y))</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span>;<span class="comment">//声明函数 </span></span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">sub</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span>;<span class="comment">//声明函数 </span></span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">cheng</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span>;<span class="comment">//声明函数 </span></span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">chu</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span>;<span class="comment">//声明函数 </span></span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">max</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span>;<span class="comment">//声明函数 </span></span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">min</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span>;<span class="comment">//声明函数 </span></span><br><span class="line">	<span class="keyword">int</span> a,b;</span><br><span class="line">	<span class="keyword">char</span> c;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"请输入a,c,b的值,c为m则为最大值,n则为最小值,以 9 . 9 为结束标志\n"</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">"%d %c %d"</span>,&amp;a,&amp;c,&amp;b);</span><br><span class="line">	<span class="keyword">while</span>(c != <span class="string">'.'</span>)&#123;</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">switch</span>(c)&#123;</span><br><span class="line">			<span class="keyword">case</span> <span class="string">'+'</span>:process(a,b,add);<span class="keyword">break</span>;</span><br><span class="line">			<span class="keyword">case</span> <span class="string">'-'</span>:process(a,b,sub);<span class="keyword">break</span>;</span><br><span class="line">			<span class="keyword">case</span> <span class="string">'/'</span>:process(a,b,chu);<span class="keyword">break</span>;</span><br><span class="line">			<span class="keyword">case</span> <span class="string">'*'</span>:process(a,b,cheng);<span class="keyword">break</span>;</span><br><span class="line">			<span class="keyword">case</span> <span class="string">'m'</span>:process(a,b,max);<span class="keyword">break</span>;</span><br><span class="line">			<span class="keyword">case</span> <span class="string">'n'</span>:process(a,b,min);<span class="keyword">break</span>;</span><br><span class="line">			<span class="keyword">default</span>:<span class="built_in">printf</span>(<span class="string">"input error!\n"</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"请输入a,c,b的值,c为m则为最大值,n则为最小值,以 9 . 9 为结束标志\n"</span>);</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">"%d %c %d"</span>,&amp;a,&amp;c,&amp;b);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">process</span><span class="params">(<span class="keyword">int</span> a,<span class="keyword">int</span> b,<span class="keyword">int</span> (*p)(<span class="keyword">int</span> x,<span class="keyword">int</span> y))</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> result;</span><br><span class="line">	result=(*p)(a,b);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%d\n"</span>,result);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> z;</span><br><span class="line">	z=x+y;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"="</span>);</span><br><span class="line">	<span class="keyword">return</span> z;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">sub</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> z;</span><br><span class="line">	z=x-y;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"="</span>);</span><br><span class="line">	<span class="keyword">return</span> z;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">cheng</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> z;</span><br><span class="line">	z=x*y;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"="</span>);</span><br><span class="line">	<span class="keyword">return</span> z;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">chu</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">int</span> z;</span><br><span class="line">	z=x/y;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"="</span>);</span><br><span class="line">	<span class="keyword">return</span> z;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">max</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> z;</span><br><span class="line">	<span class="keyword">if</span>(x&gt;y)&#123;</span><br><span class="line">		z=x;</span><br><span class="line">	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">		z=y;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"="</span>);</span><br><span class="line">	<span class="keyword">return</span> z;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">min</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> z;</span><br><span class="line">	<span class="keyword">if</span>(x&lt;y)&#123;</span><br><span class="line">		z=x;</span><br><span class="line">	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">		z=y;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"="</span>);</span><br><span class="line">	<span class="keyword">return</span> z;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br></pre></td></tr></table></figure>

<h3 id="返回指针值的函数"><a href="#返回指针值的函数" class="headerlink" title="返回指针值的函数"></a>返回指针值的函数</h3><p>一个函数可以带回一个整型值、字符值、实型值、也可以带回指针型的数据，即地址。其概念与以前相似，只是带回的值的类型是指针类型而已。</p>
<h2 id="练习题"><a href="#练习题" class="headerlink" title="练习题"></a>练习题</h2><p>题目1：有1,2,3,4四个数字，能组成多少个互不相同且无重复的三位数？都是多少？</p>
<p>程序分析：可填在百位、十位、个位的数字都是1，2，3，4.组成所有的排列后再去掉不满足的排列。</p>
<p>程序源码：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"stdio.h"</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> i,j,k;</span><br><span class="line">	<span class="keyword">int</span> sum;</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=<span class="number">4</span>;i++)&#123;</span><br><span class="line">		<span class="keyword">for</span>(j=<span class="number">1</span>;j&lt;=<span class="number">4</span>;j++)&#123;</span><br><span class="line">			<span class="keyword">for</span>(k=<span class="number">1</span>;k&lt;=<span class="number">4</span>;k++)&#123;</span><br><span class="line">				<span class="keyword">if</span>( i!=j &amp;&amp; i!=k &amp;&amp; j!=k)&#123;</span><br><span class="line">					<span class="built_in">printf</span>(<span class="string">"%d%d%d\n"</span>,i,j,k);</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>题目2：企业发放的奖金根据利润提成。利润（1）低于或等于10万元，奖金可提成10%；利润高于10万元，低于20万元时，低于10万元的部分按10%提成，高于10万元的部分，可提成7.5%；20万元到40万元时，高于20万元的部分，可提成5%；40万元到60万元时，高于40万元的部分，可提成3%;60万元到100万元时，高于60万元的部分，可提成1.5%；高于100万时，超过一百万的部分可按1%提成，从键盘输入当月利润I，求应发放奖金总数？</p>
<p>程序分析:请利用数轴来分界，定位。注意定义时需要把奖金定义成长整型。</p>
<p>程序源码：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"stdio.h"</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">long</span> <span class="keyword">int</span> i;<span class="comment">//当月0利润</span></span><br><span class="line">	<span class="keyword">int</span> bonus1,bonus2,bonus4,bonus6,bonus10,bonus;<span class="comment">//bonus奖金 </span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"请输入当月利润：\n"</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">"%ld"</span>,&amp;i); </span><br><span class="line">	bonus1 = <span class="number">100000</span>*<span class="number">0.1</span>; <span class="comment">//&lt;=10万元 </span></span><br><span class="line">	bonus2 = bonus1 + <span class="number">200000</span> * <span class="number">0.75</span>; <span class="comment">// 10 ~ 20万元</span></span><br><span class="line">	bonus4 = bonus2 + <span class="number">200000</span> * <span class="number">0.5</span>; <span class="comment">// 20 ~ 40万元</span></span><br><span class="line">	bonus6 = bonus4 + <span class="number">200000</span> * <span class="number">0.3</span>; <span class="comment">// 40 ~ 60万元</span></span><br><span class="line">	bonus10 = bonus4 + <span class="number">400000</span> * <span class="number">0.15</span>; <span class="comment">// 60~100万元 </span></span><br><span class="line">	<span class="keyword">if</span>( i  &lt;= <span class="number">100000</span>)&#123;</span><br><span class="line">		bonus=i*<span class="number">0.1</span>;</span><br><span class="line">	&#125;<span class="keyword">else</span> <span class="keyword">if</span>(i &lt;= <span class="number">200000</span>)&#123;</span><br><span class="line">		bonus = bonus1 + (i<span class="number">-100000</span>) * <span class="number">0.75</span>;</span><br><span class="line">	&#125;<span class="keyword">else</span> <span class="keyword">if</span>(i &lt;= <span class="number">400000</span>)&#123;</span><br><span class="line">		bonus = bonus2 + (i<span class="number">-200000</span>) * <span class="number">0.5</span>;</span><br><span class="line">	&#125;<span class="keyword">else</span> <span class="keyword">if</span>(i &lt;= <span class="number">600000</span>)&#123;</span><br><span class="line">		bonus = bonus4 + (i<span class="number">-400000</span>) * <span class="number">0.3</span>;</span><br><span class="line">	&#125;<span class="keyword">else</span> <span class="keyword">if</span>(i&lt;<span class="number">10000000</span>)&#123;</span><br><span class="line">		bonus = bonus6 + (i<span class="number">-600000</span>) * <span class="number">0.15</span>;</span><br><span class="line">	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">		bonus = bonus10 + (i<span class="number">-1000000</span>) * <span class="number">0.01</span>; </span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"当月利润I为：%d,应发放奖金为：%d"</span>,i,bonus);</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>题目3：一个整数，它加上100后是一个完全平方数，再加上168又是一个完全平方数，请问该数是多少？</p>
<p>程序分析：在10万以内判断，先将该数加上100后再开方，再将该数加上168后再开方，如果开方后的结果满足如下条件，即使结构。</p>
<p>程序源码：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"stdio.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"math.h"</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">long</span> i;</span><br><span class="line">	<span class="keyword">long</span> x,y;</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=<span class="number">100000</span>;i++)&#123;</span><br><span class="line">		x=<span class="built_in">sqrt</span>(i+<span class="number">100</span>);</span><br><span class="line">		y=<span class="built_in">sqrt</span>(i+<span class="number">268</span>);</span><br><span class="line">		<span class="keyword">if</span>(x*x == i+<span class="number">100</span> &amp;&amp; y*y == i+<span class="number">268</span>)&#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">"%ld\n"</span>,i);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>题目4：输入某年某月某日，判断这一天是这一年的第几天？</p>
<p>程序分析：以3月5日为例，应该先把前两个月的加起来，然后再加上5即本年的第几天，特殊情况，闰年且输入月份大于3时许考虑多加一天。</p>
<p>程序源码：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"stdio.h"</span></span></span><br><span class="line"><span class="comment">//判断是否为闰年</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">isLeaf</span><span class="params">(<span class="keyword">int</span> year)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>((year%<span class="number">4</span>==<span class="number">0</span>&amp;&amp;year%<span class="number">100</span>!=<span class="number">0</span>)||year%<span class="number">400</span>==<span class="number">0</span>)&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125; </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> year,month,days,leap,i=<span class="number">0</span>,a=<span class="number">1</span>;</span><br><span class="line">	<span class="keyword">int</span> sum=<span class="number">0</span>;<span class="comment">//总天数</span></span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;year); </span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;month);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;days);</span><br><span class="line">	<span class="keyword">for</span>(a;a&lt;month;a++)&#123;</span><br><span class="line">		<span class="keyword">if</span>( a==<span class="number">1</span> || a==<span class="number">3</span> || a==<span class="number">5</span> || a==<span class="number">7</span> || a==<span class="number">8</span> || a==<span class="number">10</span> || a==<span class="number">12</span>)&#123;</span><br><span class="line">			i=<span class="number">1</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span>( a==<span class="number">4</span> || a==<span class="number">6</span> || a==<span class="number">9</span> || a==<span class="number">11</span>)&#123;</span><br><span class="line">			i=<span class="number">0</span>;</span><br><span class="line">		&#125;<span class="keyword">else</span> <span class="keyword">if</span>(a==<span class="number">2</span>)&#123;</span><br><span class="line">			<span class="keyword">if</span>(isLeaf(year))&#123;</span><br><span class="line">				i=<span class="number">-1</span>;</span><br><span class="line">			&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">				i=<span class="number">-2</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		sum += (<span class="number">30</span>+i); </span><br><span class="line">	&#125;</span><br><span class="line">	 </span><br><span class="line">	sum += days;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%d年%d月%d日是%d年的第%d天"</span>,year,month,days,year,sum);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">isLeap</span><span class="params">(<span class="keyword">int</span> year)</span></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(year%<span class="number">4</span>==<span class="number">0</span>&amp;&amp;year%<span class="number">100</span>!=<span class="number">0</span> || year%<span class="number">400</span>==<span class="number">0</span>)&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> year,month,day,i,m=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">int</span> sum=<span class="number">0</span>;<span class="comment">//总天数 </span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"请输入年月日：格式为某某年/某某月/某某日\n"</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">"%d/%d/%d"</span>,&amp;year,&amp;month,&amp;day);</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;month;i++)&#123;</span><br><span class="line">		<span class="keyword">switch</span>(i)&#123;</span><br><span class="line">			<span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">			<span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">			<span class="keyword">case</span> <span class="number">5</span>:</span><br><span class="line">			<span class="keyword">case</span> <span class="number">7</span>:</span><br><span class="line">			<span class="keyword">case</span> <span class="number">8</span>:</span><br><span class="line">			<span class="keyword">case</span> <span class="number">10</span>:</span><br><span class="line">			<span class="keyword">case</span> <span class="number">12</span>: m=<span class="number">1</span>;<span class="keyword">break</span>;</span><br><span class="line">			<span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">			<span class="keyword">case</span> <span class="number">6</span>:</span><br><span class="line">			<span class="keyword">case</span> <span class="number">9</span>:</span><br><span class="line">			<span class="keyword">case</span> <span class="number">11</span>:m=<span class="number">0</span>;<span class="keyword">break</span>;</span><br><span class="line">			<span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">				<span class="keyword">if</span>(isLeap(year))&#123;</span><br><span class="line">					m=<span class="number">-1</span>;</span><br><span class="line">				&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">					m=<span class="number">-2</span>;</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			<span class="keyword">default</span>:<span class="built_in">printf</span>(<span class="string">"input month error\n"</span>);<span class="keyword">return</span> ;</span><br><span class="line">		&#125;</span><br><span class="line">		sum += (<span class="number">30</span>+m);</span><br><span class="line">	&#125;</span><br><span class="line">	sum +=day;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%d年%d月%d日是%d年的第%d天"</span>,year,month,day,year,sum);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>题目5：输入三个整数x,y,z，请把这三个数从小到大输出。</p>
<p>程序分析：我们想办法把最小的数放到x上，先将x，y进行比较，如果<code>x&gt;y</code>，则将x和y值进行交换，这样能使x最小。</p>
<p>程序源码：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"stdio.h"</span> </span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> x,y,z;</span><br><span class="line">	<span class="keyword">int</span> temp;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"请输入三个数：\n"</span>);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">"%d,%d,%d"</span>,&amp;x,&amp;y,&amp;z);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"未排序前三位数：%d--&gt;%d--&gt;%d"</span>,x,y,z);</span><br><span class="line">	<span class="keyword">if</span>(x&gt;y)&#123;</span><br><span class="line">		temp = x;</span><br><span class="line">		x = y;</span><br><span class="line">		y = temp;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span>(x&gt;z)&#123;</span><br><span class="line">		temp = x;</span><br><span class="line">		x=z;</span><br><span class="line">		z=temp;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span>(y&gt;z)&#123;</span><br><span class="line">		temp = y;</span><br><span class="line">		y=z;</span><br><span class="line">		z=temp;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"\n排序后三位数:%d--&gt;%d--&gt;%d\n"</span>,x,y,z);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>题目6：用*输出字母C的图案</p>
<p>程序分析：可以用’*’再纸上画出C，再分析输出。</p>
<p>源码分析：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"Hello C-world\n"</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"****\n"</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"*\n"</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"*\n"</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"****\n"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>题目7：输出特殊图案，请在c环境中运行，看一看，very beautiful!</p>
<p>程序分析：字符共有256个。不同字符，图形不一样。　</p>
<p>源码分析:</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;math.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">char</span> a=<span class="number">2</span>,b=<span class="number">4</span>;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%c%c%c%c%c\n"</span>,b,a,a,a,b);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%c%c%c%c%c\n"</span>,a,b,a,b,a);	</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%c%c%c%c%c\n"</span>,a,a,b,a,a);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%c%c%c%c%c\n"</span>,a,b,a,b,a);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%c%c%c%c%c\n"</span>,b,a,a,a,b);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>题目8：输出9*9口诀。</p>
<p>程序分析：分行与列考虑，共9行9列，i控制行，j控制列。</p>
<p>程序源代码：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> i,j;</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=<span class="number">9</span>;i++)&#123;</span><br><span class="line">		<span class="keyword">for</span>(j=<span class="number">1</span>;j&lt;=i;j++)&#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">"%d ×%d = %d\t"</span>,j,i,j*i);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>题目9：要求输出国际象棋棋盘。</p>
<p>程序分析：用i控制行，j来控制列，根据i+j的和的变化来控制输出黑方格，还是白方格。</p>
<p>程序源代码：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;math.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> i,j;</span><br><span class="line">	<span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; <span class="number">8</span>; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">for</span>(j = <span class="number">0</span>; j &lt; <span class="number">8</span>; j++)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span>((i+j)%<span class="number">2</span> ==<span class="number">0</span>)</span><br><span class="line">				<span class="built_in">printf</span>(<span class="string">"%c%c"</span>,<span class="number">1</span>,<span class="number">1</span>);</span><br><span class="line">			<span class="keyword">else</span> </span><br><span class="line">				<span class="built_in">printf</span>(<span class="string">" "</span>);</span><br><span class="line">		</span><br><span class="line">			</span><br><span class="line">		&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"\n"</span>); </span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>题目10：打印楼梯，同时在楼梯上方打印两个笑脸。</p>
<p>程序分析：用i控制行，j来控制列，j根据i的变化来控制输出黑方格的个数。</p>
<p>程序源代码：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;math.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> i,j;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"\1\1\n"</span>);<span class="comment">/*输出两个笑脸*/</span></span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;<span class="number">11</span>;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">for</span>(j=<span class="number">1</span>;j&lt;=i;j++)</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%c%c"</span>,<span class="number">19</span>,<span class="number">19</span>);</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>题目10：用递归实现全排列</p>
<p>程序分析：输入一个字符串，例如这里：输入ABC,首先第一位字符，先实现全排列，分别为A,B,C,D；然后余下两个再一次实现全排列，以此类推… </p>
<p>例如：(ABCD,n,len);//第一个参数为字符串，第二个参数为起始位置，第三个为字符串长度。<br>第一步：先交换实现全排列，即第一位可能为A或B或C或D<br>第二步：除去第一位字符后,剩下的字符继续全排列，即(Str,n+1,len)<br>第三步：还原为原来的位置</p>
<p>程序源码分析：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"stdio.h"</span></span></span><br><span class="line"><span class="comment">//去除重复</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">isSame</span><span class="params">(<span class="keyword">char</span> str[],<span class="keyword">int</span> start,<span class="keyword">int</span> end)</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> i;</span><br><span class="line">	<span class="keyword">for</span>(i=start;i&lt;end;i++)&#123;</span><br><span class="line">		<span class="keyword">if</span>(str[i] == str[end])&#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//函数交换</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">swap</span><span class="params">(<span class="keyword">char</span> *p,<span class="keyword">char</span> *q)</span></span>&#123;</span><br><span class="line">	<span class="keyword">char</span> temp;</span><br><span class="line">	temp=*p;</span><br><span class="line">	*p=*q;</span><br><span class="line">	*q=temp;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//全排列</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Allarray</span><span class="params">(<span class="keyword">char</span> str[],<span class="keyword">int</span> n,<span class="keyword">int</span> len)</span></span>&#123;<span class="comment">//第一个参数字符串,第二个参数为第几个，第三个为字符串长度 </span></span><br><span class="line">	<span class="comment">//str,0,len</span></span><br><span class="line">	<span class="comment">//(AB,0,2)</span></span><br><span class="line">	<span class="keyword">if</span>(n==len)&#123;</span><br><span class="line">		<span class="keyword">static</span> <span class="keyword">int</span> s_i=<span class="number">1</span>; </span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"第%d中全排列为:\t%s\n"</span>,s_i++,str);</span><br><span class="line">	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">int</span> i;</span><br><span class="line">		<span class="keyword">for</span>(i=n;i&lt;len;i++)&#123;</span><br><span class="line">			if0(isSame(str,n,i))&#123;</span><br><span class="line">				swap(&amp;str[n],&amp;str[i]);</span><br><span class="line">				Allarray(str,n+<span class="number">1</span>,len);</span><br><span class="line">				swap(&amp;str[n],&amp;str[i]);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">char</span> str[<span class="number">80</span>];</span><br><span class="line">	<span class="keyword">int</span> len;<span class="comment">//长度 </span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"输入一个字符串：\n"</span>);</span><br><span class="line">	gets(str);</span><br><span class="line">	len=<span class="built_in">strlen</span>(str);</span><br><span class="line">	<span class="comment">//进行全排列</span></span><br><span class="line">	Allarray(str,<span class="number">0</span>,len); </span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="开发工具"><a href="#开发工具" class="headerlink" title="开发工具"></a>开发工具</h2><ul>
<li>这里使用的是dev-c++;</li>
<li>下载路径：<code>https://bloodshed-dev-c.en.softonic.com/download</code><h2 id="习题网址"><a href="#习题网址" class="headerlink" title="习题网址"></a>习题网址</h2></li>
<li><code>http://c.biancheng.net/view/531.html</code></li>
</ul>

        
    </section>
</article>


    <article class="article" itemscope itemprop="blogPost">
    
    <header class="article-header">
        
        <h1 itemprop="name">
            <a href="/CPWS.github.io/2019/11/30/Lucene/">Lucene</a>
        </h1>
        
        <div class="article-meta clearfix">
            <a class="article-date" href="https://CPWS.github.io/index.html">
    
    <i class="icon-calendar"></i>
    
    <time datetime="2019-11-30T04:52:24.000Z" itemprop="datePublished">2019-11-30</time>
</a>

            
<div class="article-tag-list">
    <i class="icon-tag"></i>
    <a class="article-tag-link" href="/CPWS.github.io/tags/Lucene/">Lucene</a>
</div>


        </div>
    </header>
    
    <section class="article-body markdown-body">
        
        <h1 id="Lucene-amp-Solr第一天"><a href="#Lucene-amp-Solr第一天" class="headerlink" title="Lucene&amp;Solr第一天"></a><code>Lucene</code>&amp;<code>Solr</code>第一天</h1><hr>
<h2 id="什么是全文检索"><a href="#什么是全文检索" class="headerlink" title="什么是全文检索"></a>什么是全文检索</h2><ul>
<li>数据分类<blockquote>
<ul>
<li>结果化数据：有固定的格式和有限长度，比如<code>Oracle</code>或<code>mysql</code>表中的数据。<blockquote>
<ul>
<li>使用SQL语句查询结构化数据，速度快。</li>
<li>如果数据量大时，可以在数据库中创建索引，但是此时创建的索引是不支持模糊查询，需要创建另外一套索引库。</li>
</ul>
</blockquote>
</li>
<li>非结构化数据：没有固定格式也没有有限长度。比如：磁盘上的文件，excel、word、pdf、txt、ppt等<blockquote>
<ul>
<li>查询非结构化数据：1、目测（顺序扫描法）、IO读取、3、全文检索</li>
</ul>
</blockquote>
</li>
</ul>
</blockquote>
</li>
<li>对数据源创建索引，在索引上搜索这个过程就是全文检索。（创建索引+查询）</li>
</ul>
<hr>
<h2 id="全文检索的应用场景"><a href="#全文检索的应用场景" class="headerlink" title="全文检索的应用场景"></a>全文检索的应用场景</h2><ul>
<li>搜索引擎：百度、搜狗、360 搜搜</li>
<li>站内搜索：淘宝、京东、微博、论坛</li>
</ul>
<hr>
<h2 id="怎么实现全文检索"><a href="#怎么实现全文检索" class="headerlink" title="怎么实现全文检索"></a>怎么实现全文检索</h2><ul>
<li>使用<code>lucene</code>实现</li>
</ul>
<hr>
<h2 id="Lucene简介"><a href="#Lucene简介" class="headerlink" title="Lucene简介"></a>Lucene简介</h2><ul>
<li>是<code>Apache</code>下的开源用来实现全文检索的工具包，API</li>
</ul>
<hr>
<h2 id="Lucene实现全文检索的流程"><a href="#Lucene实现全文检索的流程" class="headerlink" title="Lucene实现全文检索的流程"></a>Lucene实现全文检索的流程</h2><ol>
<li>创建索引<blockquote>
<ul>
<li>获取源文档<blockquote>
<ul>
<li>什么是源文档？场景1：搜索引擎：指的是互联网上的所有网页。场景2：站内搜索：磁盘上的文件或表中的数据。</li>
<li>获取源文档方式？场景1：搜索引擎：网络爬虫。场景2：站内搜索：IO流、sql查询</li>
</ul>
</blockquote>
</li>
<li>构建文档对象（Document）<blockquote>
<ul>
<li>一个<code>Document</code>对象中放的是：一个网页内容、或一个文件、或表中一条数据。</li>
</ul>
</blockquote>
</li>
<li>对内容分词（分析文档）<blockquote>
<ul>
<li>举例：一个文件包含信息：文件路径、文件名称、文件大小、文件内容。（document）</li>
<li>举例：一个网页包含信息：网络地址URL，网页内容、网页标题。(document)</li>
<li>举例：一条数据包含的信息：一条数据每个列的内容。（document）（有多少个列就有多少个域）</li>
<li>效果：<code>The Spring Framework provides a comprehensive programming and configuration model.</code>；</li>
<li>按空格大小分</li>
<li>处理大小写</li>
<li>停用词</li>
<li>标点符号</li>
<li>结果： spring、framework、provides、comprehensive、programming、configuration、model（每一个对应一个term）</li>
</ul>
</blockquote>
</li>
<li>创建索引（存储）<blockquote>
<ul>
<li>分词后的格式： name:spring name是自定义的域名城，spring是此域中的值；name:spring就是一个词汇item；一个文档中可以有多个域。不同的文档可以有不同的域。</li>
<li>创建索引是对语汇单元索引，通常词语找文档，这种索引结构叫做倒排索引结构。</li>
</ul>
</blockquote>
</li>
</ul>
</blockquote>
</li>
<li>查询索引<blockquote>
<ul>
<li>用户查询接口：就是用户输入关键字的位置</li>
<li>创建查询</li>
<li>执行查询</li>
<li>渲染结果</li>
</ul>
</blockquote>
</li>
</ol>
<hr>
<h2 id="Lucene入门案例"><a href="#Lucene入门案例" class="headerlink" title="Lucene入门案例"></a>Lucene入门案例</h2><ul>
<li><p>所需要的<code>jar</code>包：</p>
<ul>
<li>核心的<code>jar</code>：<code>lucene-core-4.10.3.jar</code>、<code>lucene-analyzers-common-4.10.3.jar</code></li>
<li>IO所需要的包：commons-io.jar </li>
</ul>
</li>
<li><p>创建索引</p>
<ul>
<li>场景：给磁盘上的文件创建索引</li>
<li>步骤<ul>
<li>指定索引库位置 <code>Directory</code></li>
<li>创建写入索引位置<code>IndexWriter</code></li>
<li>获取源文档 <code>IO流</code></li>
<li>写入文档<code>indexWriter.addDocument(doc)；</code></li>
<li>关闭资源 <code>indexWriter.close();</code></li>
</ul>
</li>
<li>使用luke工具查看索引文件</li>
<li>luke安装地址：<code>https://github.com/DmitryKey/luke/releases</code><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.gdaib.lucene;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.nio.file.Path;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.commons.io.FileUtils;</span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.analysis.Analyzer;</span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.analysis.standard.StandardAnalyzer;</span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.document.Document;</span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.document.Field;</span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.document.Field.Store;</span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.document.TextField;</span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.index.IndexWriter;</span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.index.IndexWriterConfig;</span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.store.FSDirectory;</span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.util.Version;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">IndexWriterTest</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">	</span><br><span class="line">		<span class="comment">//1.指定索引库位置</span></span><br><span class="line">		FSDirectory directory = FSDirectory.open(<span class="keyword">new</span> File(<span class="string">"D:\\桌面\\Java\\lucene\\indexRepo"</span>));</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//指定分词器</span></span><br><span class="line">		Analyzer analyzer=<span class="keyword">new</span> StandardAnalyzer();</span><br><span class="line">		</span><br><span class="line">		IndexWriterConfig config=<span class="keyword">new</span> IndexWriterConfig(Version.LATEST,analyzer);</span><br><span class="line">		</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//2.创建写入索引对象</span></span><br><span class="line">		IndexWriter indexWriter=<span class="keyword">new</span> IndexWriter(directory, config);</span><br><span class="line">		</span><br><span class="line">		</span><br><span class="line"><span class="comment">//		3.获取源文档 </span></span><br><span class="line">		File srcFile = <span class="keyword">new</span> File(<span class="string">"D:\\txt"</span>);</span><br><span class="line">		File[] listFiles = srcFile.listFiles();</span><br><span class="line">		</span><br><span class="line"><span class="comment">//		4. 把文档写入索引库</span></span><br><span class="line">		<span class="keyword">for</span> (File file : listFiles) &#123;</span><br><span class="line">			Document doc=<span class="keyword">new</span> Document();</span><br><span class="line">			<span class="comment">//文件路径、</span></span><br><span class="line">			String filePath = file.getPath();</span><br><span class="line">			Field pathField=<span class="keyword">new</span> TextField(<span class="string">"path"</span>, filePath, Store.YES) ;</span><br><span class="line">			doc.add(pathField);</span><br><span class="line">			<span class="comment">//文件名称、</span></span><br><span class="line">			String fileName = file.getName();</span><br><span class="line">			Field nameField=<span class="keyword">new</span> TextField(<span class="string">"name"</span>, fileName, Store.YES) ;</span><br><span class="line">			doc.add(nameField);</span><br><span class="line">			<span class="comment">//文件大小、</span></span><br><span class="line">			<span class="keyword">long</span> fileSize=FileUtils.sizeOf(file);</span><br><span class="line">			Field sizeField=<span class="keyword">new</span> TextField(<span class="string">"size"</span>, fileSize+<span class="string">""</span>, Store.YES) ;</span><br><span class="line">			doc.add(sizeField);</span><br><span class="line">			<span class="comment">//文件内容</span></span><br><span class="line">			String fileContent = FileUtils.readFileToString(file);</span><br><span class="line">			Field contentField=<span class="keyword">new</span> TextField(<span class="string">"content"</span>, fileContent+<span class="string">""</span>, Store.YES) ;</span><br><span class="line">			doc.add(contentField);</span><br><span class="line">			</span><br><span class="line">			indexWriter.addDocument(doc);</span><br><span class="line">		&#125;</span><br><span class="line"><span class="comment">//		5.关闭资源</span></span><br><span class="line">		indexWriter.close();</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>查询索引</p>
<ul>
<li>指定索引库位置</li>
<li>创建读取索引对象</li>
<li>创建查询索引对象</li>
<li>执行索引</li>
<li>获取索引结果<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.gdaib.lucene;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.nio.file.Path;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.document.Document;</span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.index.DirectoryReader;</span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.index.IndexReader;</span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.index.Term;</span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.search.IndexSearcher;</span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.search.Query;</span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.search.ScoreDoc;</span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.search.TermQuery;</span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.search.TopDocs;</span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.store.Directory;</span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.store.FSDirectory;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">IndexReaderTest</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//1. 指定索引库的位置</span></span><br><span class="line">		Directory directory = FSDirectory.open(<span class="keyword">new</span> File(<span class="string">"D:\\桌面\\Java\\lucene\\indexRepo"</span>));</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//2.创建读取索引对象</span></span><br><span class="line">		IndexReader indexReader=DirectoryReader.open(directory);</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//3. 创建查询索引对象</span></span><br><span class="line">		IndexSearcher indexSearcher = <span class="keyword">new</span> IndexSearcher(indexReader);</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//4.执行查询方法 query:指定条件，result：查询数据量的限制</span></span><br><span class="line">		Term t=<span class="keyword">new</span> Term(<span class="string">"name"</span>,<span class="string">"spring"</span>);</span><br><span class="line">		Query query=<span class="keyword">new</span> TermQuery(t);</span><br><span class="line">		<span class="comment">//5.获取获取查询结果</span></span><br><span class="line">		TopDocs topDocs = indexSearcher.search(query, <span class="number">100</span>);</span><br><span class="line">		System.out.println(<span class="string">"总记录数："</span>+topDocs.totalHits);</span><br><span class="line">		ScoreDoc[] scoreDocs = topDocs.scoreDocs;</span><br><span class="line">		<span class="keyword">for</span> (ScoreDoc scoreDoc : scoreDocs) &#123;</span><br><span class="line">			<span class="keyword">int</span> docId = scoreDoc.doc;</span><br><span class="line">			Document doc = indexSearcher.doc(docId);</span><br><span class="line">			<span class="comment">//获取文档的内容</span></span><br><span class="line">			System.out.println(<span class="string">"文件名："</span>+doc.get(<span class="string">"name"</span>));</span><br><span class="line">			System.out.println(<span class="string">"文件大小："</span>+doc.get(<span class="string">"size"</span>));</span><br><span class="line">			System.out.println(<span class="string">"文件路径："</span>+doc.get(<span class="string">"path"</span>));</span><br><span class="line">			System.out.println(<span class="string">"文件内容："</span>+doc.get(<span class="string">"content"</span>));</span><br><span class="line">			System.out.println(<span class="string">"***********"</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">//6.关闭资源</span></span><br><span class="line">		indexReader.close();</span><br><span class="line">				</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
</li>
</ul>
<hr>
<h2 id="分词器"><a href="#分词器" class="headerlink" title="分词器"></a>分词器</h2><ul>
<li><code>Analyzer</code>每个分词器的<code>tokenStream</code>方法<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.gdaib.lucene;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.analysis.Analyzer;</span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.analysis.TokenStream;</span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.analysis.cjk.CJKAnalyzer;</span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.analysis.cn.smart.SmartChineseAnalyzer;</span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.analysis.standard.StandardAnalyzer;</span><br><span class="line"><span class="keyword">import</span> org.apache.lucene.analysis.tokenattributes.CharTermAttribute;</span><br><span class="line"><span class="keyword">import</span> org.wltea.analyzer.lucene.IKAnalyzer;</span><br><span class="line"></span><br><span class="line"><span class="comment">/***</span></span><br><span class="line"><span class="comment"> * StandardAnalyzer：按照空格分词（英文），中文是一个字一个字分隔（Analyzer analyzer=new StandardAnalyzer();）</span></span><br><span class="line"><span class="comment"> * CJKAnalyzer：Analyzer analyzer = new CJKAnalyzer();//中文两个字两个字</span></span><br><span class="line"><span class="comment"> * SmartChineseAnalyzer：中文还算可以，但是英文容易出现缺字母</span></span><br><span class="line"><span class="comment"> * IK-Analyzer：第三方分词器 IK-Analyzer 需要导入jar，需要加入两个配置文件</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> </span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AnalyzerTest</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">	</span><br><span class="line">		<span class="comment">//Analyzer analyzer=new StandardAnalyzer();</span></span><br><span class="line">		<span class="comment">//Analyzer analyzer = new CJKAnalyzer();//中文两个字两个字</span></span><br><span class="line">		<span class="comment">//Analyzer analyzer = new SmartChineseAnalyzer();</span></span><br><span class="line">		<span class="comment">//第三方分词器 IK-Analyzer 需要导入jar</span></span><br><span class="line">		Analyzer analyzer=<span class="keyword">new</span> IKAnalyzer();</span><br><span class="line">		TokenStream tokenStream = analyzer.tokenStream(<span class="keyword">null</span>, <span class="string">"apache场景1：搜索引擎：指的是互联网上的所有网页。场景2：站内搜索：磁盘上的文件或表中的数据。"</span>);</span><br><span class="line">		</span><br><span class="line">		CharTermAttribute charTermAttribute = tokenStream.addAttribute(CharTermAttribute.class);</span><br><span class="line">		</span><br><span class="line">		tokenStream.reset();</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">while</span>(tokenStream.incrementToken()) &#123;</span><br><span class="line">			System.out.println(charTermAttribute);</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="分词器的使用时机"><a href="#分词器的使用时机" class="headerlink" title="分词器的使用时机"></a>分词器的使用时机</h2><ul>
<li>需要查询就需要分词器</li>
<li>查询时也需要分词</li>
</ul>
<hr>
<h1 id="Lucene-amp-Solr第二天"><a href="#Lucene-amp-Solr第二天" class="headerlink" title="Lucene&amp;Solr第二天"></a><code>Lucene</code>&amp;<code>Solr</code>第二天</h1><h2 id="索引库的维护"><a href="#索引库的维护" class="headerlink" title="索引库的维护"></a>索引库的维护</h2><h2 id="Lucene的查询"><a href="#Lucene的查询" class="headerlink" title="Lucene的查询"></a>Lucene的查询</h2><h2 id="相关度排序"><a href="#相关度排序" class="headerlink" title="相关度排序"></a>相关度排序</h2><h2 id="什么是solr"><a href="#什么是solr" class="headerlink" title="什么是solr"></a>什么是<code>solr</code></h2><h2 id="solr的安装和配置"><a href="#solr的安装和配置" class="headerlink" title="solr的安装和配置"></a><code>solr</code>的安装和配置</h2><h2 id="Solr后台的使用"><a href="#Solr后台的使用" class="headerlink" title="Solr后台的使用"></a><code>Solr</code>后台的使用</h2><h2 id="使用solrj维护索引库"><a href="#使用solrj维护索引库" class="headerlink" title="使用solrj维护索引库"></a>使用<code>solrj</code>维护索引库</h2>
        
    </section>
</article>


    <article class="article" itemscope itemprop="blogPost">
    
    <header class="article-header">
        
        <h1 itemprop="name">
            <a href="/CPWS.github.io/2019/11/29/Elasticsearch/">Elasticsearch</a>
        </h1>
        
        <div class="article-meta clearfix">
            <a class="article-date" href="https://CPWS.github.io/index.html">
    
    <i class="icon-calendar"></i>
    
    <time datetime="2019-11-29T11:18:12.000Z" itemprop="datePublished">2019-11-29</time>
</a>

            
<div class="article-tag-list">
    <i class="icon-tag"></i>
    <a class="article-tag-link" href="/CPWS.github.io/tags/Elasticsearch/">Elasticsearch</a>
</div>


        </div>
    </header>
    
    <section class="article-body markdown-body">
        
        
        
    </section>
</article>


    <article class="article" itemscope itemprop="blogPost">
    
    <header class="article-header">
        
        <h1 itemprop="name">
            <a href="/CPWS.github.io/2019/11/29/solr/">solr</a>
        </h1>
        
        <div class="article-meta clearfix">
            <a class="article-date" href="https://CPWS.github.io/index.html">
    
    <i class="icon-calendar"></i>
    
    <time datetime="2019-11-29T11:17:57.000Z" itemprop="datePublished">2019-11-29</time>
</a>

            
<div class="article-tag-list">
    <i class="icon-tag"></i>
    <a class="article-tag-link" href="/CPWS.github.io/tags/solr/">solr</a>
</div>


        </div>
    </header>
    
    <section class="article-body markdown-body">
        
        <h2 id="Solr简介"><a href="#Solr简介" class="headerlink" title="Solr简介"></a><code>Solr</code>简介</h2><p>Lucene是API，类库，solr是基于Lucene开发的一个项目，solr是一个独立的搜索引擎服务</p>
<h2 id="安装配置-windows版"><a href="#安装配置-windows版" class="headerlink" title="安装配置(windows版)"></a>安装配置(windows版)</h2><p>安装solr-5.20</p>
<p><img src="https://i.loli.net/2019/12/21/wrCAz4xluXQHMSt.png" alt="1576932517_1_.png"></p>
<p><img src="https://i.loli.net/2019/12/21/8HfNr4Kb3zxp7Xw.png" alt="1576933811_1_.png"></p>
<ol>
<li>准备一个干净的tomcat</li>
<li>把solr/dist的war包拷贝到tomcat的webapp文件夹下</li>
<li>把war解压（直接启动tomcat）</li>
<li>配置solrHome（就是索引库的位置）<ol>
<li>把 <code>\solr-4.10.3\example\solr</code>下所有文件都拷贝到指定文件夹下</li>
<li>配置solr项目与solrHome的关系，修改solr项目下的web.xml的配置文件</li>
</ol>
</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">env-entry</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">env-entry-name</span>&gt;</span>solr/home<span class="tag">&lt;/<span class="name">env-entry-name</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">env-entry-value</span>&gt;</span>D:\桌面\Java\solr\solrHome<span class="tag">&lt;/<span class="name">env-entry-value</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">env-entry-type</span>&gt;</span>java.lang.String<span class="tag">&lt;/<span class="name">env-entry-type</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">env-entry</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="5">
<li>添加solr项目运行的扩展包，把<code>\solr-4.10.3\example\lib\ext</code>下的所有jar包放入到solr的lib包下</li>
<li>重新启动tomcat</li>
<li>访问solr:<code>localhost:8080/solr</code></li>
</ol>
<h2 id="Linux版本-（solr-7-7-2-tar-gz为例）"><a href="#Linux版本-（solr-7-7-2-tar-gz为例）" class="headerlink" title="Linux版本 （solr-7.7.2.tar.gz为例）"></a>Linux版本 （solr-7.7.2.tar.gz为例）</h2><p>安装前提条件：环境中jdk以及tomcat服务器，本人所使用的是<code>jdk-1.8.0_221</code>，<code>tomcat-8.5.23</code></p>
<ol>
<li>到官网下载<code>solr</code>工具：<code>http://lucene.apache.org/</code>；</li>
<li>将下载好的工具上传到Linux服务器上；</li>
<li>解压tar.gz，得到solr-7.7.2文件夹</li>
<li>创建<code>/usr/local/solr</code>,并将<code>/solr-7.7.2/server/</code>下的<code>solr/</code>文件夹复制到<code>/usr/local/solr</code>文件下，并且重命名为<code>solrhome</code>；</li>
<li>将<code>solr-7.7.2/server/solr-webapp/webapp/</code>复制到<code>tomcat/webapps/</code>目录下，并将其重新命名为<code>solr</code></li>
<li>将<code>solr-7.7.2/server/lib/ext</code>下的jar包和 <code>solr-7.7.2/server/lib/</code>下所有以“metrics”开头的 jar 包复制到<code>tomcat/webapps/solr/WEB-INF/lib</code>目录下。</li>
<li>修改web.xml配置文件，添加第一个文件代码，注释掉第二个文件代码</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">env-entry</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">env-entry-name</span>&gt;</span>solr/home<span class="tag">&lt;/<span class="name">env-entry-name</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">env-entry-value</span>&gt;</span>/usr/local/solr/solrhome<span class="tag">&lt;/<span class="name">env-entry-value</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">env-entry-type</span>&gt;</span>java.lang.String<span class="tag">&lt;/<span class="name">env-entry-type</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">env-entry</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Get rid of error message --&gt;</span></span><br><span class="line"> <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment"> &lt;security-constraint&gt;</span></span><br><span class="line"><span class="comment">   &lt;web-resource-collection&gt;</span></span><br><span class="line"><span class="comment">     &lt;web-resource-name&gt;Disable TRACE&lt;/web-resource-name&gt;</span></span><br><span class="line"><span class="comment">     &lt;url-pattern&gt;/&lt;/url-pattern&gt;</span></span><br><span class="line"><span class="comment">     &lt;http-method&gt;TRACE&lt;/http-method&gt;</span></span><br><span class="line"><span class="comment">   &lt;/web-resource-collection&gt;</span></span><br><span class="line"><span class="comment">   &lt;auth-constraint/&gt;</span></span><br><span class="line"><span class="comment"> &lt;/security-constraint&gt;</span></span><br><span class="line"><span class="comment"> &lt;security-constraint&gt;</span></span><br><span class="line"><span class="comment">   &lt;web-resource-collection&gt;</span></span><br><span class="line"><span class="comment">     &lt;web-resource-name&gt;Enable everything but TRACE&lt;/web-resource-name&gt;</span></span><br><span class="line"><span class="comment">     &lt;url-pattern&gt;/&lt;/url-pattern&gt;</span></span><br><span class="line"><span class="comment">     &lt;http-method-omission&gt;TRACE&lt;/http-method-omission&gt;</span></span><br><span class="line"><span class="comment">   &lt;/web-resource-collection&gt;</span></span><br><span class="line"><span class="comment"> &lt;/security-constraint&gt;</span></span><br><span class="line"><span class="comment"> --&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="8">
<li>启动tomcat服务器 tomcat/bin/startup.sh</li>
<li>在本地打开<code>http://localhost:8080/solr/index.html</code>,远程打开<code>http://服务器ip地址:8080/solr/index.html</code></li>
<li>配置成功后的UI界面</li>
</ol>
<p><img src="https://i.loli.net/2019/12/18/is5mSrtyd63P7xv.png" alt="1576672151_1_.png"></p>
<ul>
<li>本次下载参考<code>https://blog.csdn.net/frgod/article/details/78960917</code>;<h2 id="Solr-core类比成mysql的database"><a href="#Solr-core类比成mysql的database" class="headerlink" title="Solr core类比成mysql的database"></a>Solr core类比成mysql的database</h2></li>
</ul>
<p>添加solr Core步骤</p>
<ol>
<li>复制solrHome下的collection1文件夹</li>
<li>粘贴到solrHome下，修改名字collection2</li>
<li>修改collection2文件夹下的core.properties</li>
<li>重启tomcat服务器</li>
</ol>
<p>注意：solr1中的域名是先定义后使用</p>
<h2 id="索引的文档和域的概念"><a href="#索引的文档和域的概念" class="headerlink" title="索引的文档和域的概念"></a>索引的文档和域的概念</h2><ol>
<li>在<code>Lucene</code>中每一个文档的域都是通过代码来创建的。</li>
<li>在<code>Solr</code>中的域是通过配置为文件配置。</li>
</ol>
<p><img src="https://i.loli.net/2019/12/26/KWv5y2k6quXD9Pp.png" alt="1577355587_1_.png"></p>
<ol start="3">
<li><p>在<code>schema.xml</code>中定义了<code>field</code>和<code>fieldType</code></p>
</li>
<li><p><code>sortMassingLast</code>：设置成true没有该field的数据排在有该field的数据之后，而不管请求时的排序规则，默认设置成false.</p>
</li>
</ol>
<h2 id="Solr整合IKAnalyzer分词器"><a href="#Solr整合IKAnalyzer分词器" class="headerlink" title="Solr整合IKAnalyzer分词器"></a>Solr整合IKAnalyzer分词器</h2><p>模式配置<code>Schema.xml</code> </p>
<p><code>IkAnalyzer</code></p>
<ol>
<li><p>拷贝<code>IkAnalyzer</code>的文件到<code>tomcat</code>下的<code>solr</code>目录中</p>
</li>
<li><p>将<code>IKAnalyzer2012_V5.jar</code>拷贝到<code>tomcat</code>的<code>webapps/solr/WEB-INF/lib</code>下</p>
</li>
<li><p>在<code>tomcat</code>的<code>webapps/solr/WEB-INF/</code>下创建<code>classes</code>目录</p>
</li>
<li><p>将<code>IKAnalyzer.cfg.xml</code>、<code>ext_stopwords.dic</code>、<code>mvdict.dic</code> copy到Tomcat的<code>webapps/solr/WEB-INF/classes</code></p>
<p> 注意：<code>ext_stopwords.dic</code>、<code>mvdict.dic</code>必须保存成无<code>BOM</code>的<code>utf-8</code>类型</p>
</li>
<li><p>首先需要在<code>types</code>结点内定义一个<code>FieldType</code>子结点，包括<code>name</code>、<code>class</code>等属性，<code>name</code>就是这个<code>FieldType</code>的属性名称，<code>class</code>指向<code>org.apache.solr.analysis</code>包里面对应的<code>class</code>名称，用来定义这个类型的行为。在<code>FieldType</code>定义的时候做重要的就是定义这个类型的数据在建立索引和查询的时候要使用的分析器，包括分词和过滤</p>
</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">fieldType</span> <span class="attr">name</span>=<span class="string">"text_ik"</span> <span class="attr">class</span>=<span class="string">"solr.TextField"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">analyzer</span> <span class="attr">type</span>=<span class="string">"index"</span> <span class="attr">isMaxWordLength</span>=<span class="string">"false"</span> <span class="attr">class</span>=<span class="string">"org.wltea.analyzer.lucene.IKAnalyzer"</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">analyzer</span> <span class="attr">type</span>=<span class="string">"query"</span> <span class="attr">isMaxWordLength</span>=<span class="string">"true"</span> <span class="attr">class</span>=<span class="string">"org.wltea.analyzer.lucene.IKAnalyzer"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">fieldType</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="使用solr控制台"><a href="#使用solr控制台" class="headerlink" title="使用solr控制台"></a>使用solr控制台</h2><ol>
<li><p>添加索引</p>
<ul>
<li>注意：solr中的域名是先定义后使用；添加文档时id不能少。</li>
</ul>
</li>
<li><p>删除索引</p>
<ul>
<li><code>&lt;delete&gt;&lt;id&gt;1&lt;/id&gt;&lt;/delete&gt;&lt;commit/&gt;</code>：根据id删除索引</li>
<li><code>&lt;delete&gt;&lt;query&gt;id:2&lt;/query&gt;&lt;/delete&gt;&lt;commit/&gt;</code>：根据lucene语法删除索引</li>
<li><code>&lt;delete&gt;&lt;query&gt;*:*&lt;/query&gt;&lt;/delete&gt;&lt;commit/&gt;</code>：根据lucene语法删除所有</li>
<li>注意：删除索引需要修改<code>document type</code>类型为<code>xml</code>格式。 </li>
</ul>
</li>
<li><p>修改索引：<br> 只要id相同就会被修改</p>
</li>
<li><p>查询索引</p>
<ul>
<li><code>AND</code>：相当于Java的<code>&amp;&amp;</code></li>
<li><code>OR</code>：相当于Java的<code>||</code></li>
</ul>
</li>
</ol>
<h2 id="java代码操作solr，solrJ"><a href="#java代码操作solr，solrJ" class="headerlink" title="java代码操作solr，solrJ"></a><code>java</code>代码操作<code>solr</code>，solrJ</h2><ol>
<li>创建Java Project项目</li>
<li>添加jar包<ul>
<li>solrJ核心包:<code>solr-4.10.3\dist\solr-solrj-4.10.3.jar</code></li>
<li>solrJ扩展包:<code>solr-4.10.3\dist\solrj-lib</code>下所有包</li>
<li>solr扩展包:<code>solr-4.10.3\example\lib\ext</code>下所有包</li>
</ul>
</li>
<li>代码实现</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.solr.client.solrj.SolrServer;</span><br><span class="line"><span class="keyword">import</span> org.apache.solr.client.solrj.SolrServerException;</span><br><span class="line"><span class="keyword">import</span> org.apache.solr.client.solrj.impl.HttpSolrServer;</span><br><span class="line"><span class="keyword">import</span> org.apache.solr.common.SolrInputDocument;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SolrManager</span> </span>&#123;</span><br><span class="line">	</span><br><span class="line">	<span class="meta">@Test</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addIndex</span><span class="params">()</span> <span class="keyword">throws</span> SolrServerException, IOException </span>&#123;</span><br><span class="line"><span class="comment">//		1.获取solr服务器，用于连接solr项目</span></span><br><span class="line">		SolrServer solrServer = <span class="keyword">new</span> HttpSolrServer(<span class="string">"http://localhost:8080/solr/collection1"</span>);</span><br><span class="line">		</span><br><span class="line"><span class="comment">//		2.执行SolrServer的添加方法</span></span><br><span class="line">		SolrInputDocument doc=<span class="keyword">new</span> SolrInputDocument();</span><br><span class="line">		doc.addField(<span class="string">"name"</span>, <span class="string">"solrJ添加name"</span>);</span><br><span class="line">		doc.addField(<span class="string">"content"</span>, <span class="string">"solrJ添加content"</span>);</span><br><span class="line">		doc.addField(<span class="string">"id"</span>, <span class="string">"4"</span>);</span><br><span class="line">		solrServer.add(doc);</span><br><span class="line">		</span><br><span class="line"><span class="comment">//		3.执行提交</span></span><br><span class="line">		solrServer.commit();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.gdaib.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.solr.client.solrj.SolrQuery;</span><br><span class="line"><span class="keyword">import</span> org.apache.solr.client.solrj.SolrServer;</span><br><span class="line"><span class="keyword">import</span> org.apache.solr.client.solrj.SolrServerException;</span><br><span class="line"><span class="keyword">import</span> org.apache.solr.client.solrj.impl.HttpSolrServer;</span><br><span class="line"><span class="keyword">import</span> org.apache.solr.client.solrj.response.QueryResponse;</span><br><span class="line"><span class="keyword">import</span> org.apache.solr.common.SolrDocument;</span><br><span class="line"><span class="keyword">import</span> org.apache.solr.common.SolrDocumentList;</span><br><span class="line"><span class="keyword">import</span> org.apache.solr.common.SolrInputDocument;</span><br><span class="line"><span class="keyword">import</span> org.apache.solr.common.params.SolrParams;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.gdaib.bean.Article;</span><br><span class="line"></span><br><span class="line"><span class="comment">/***</span></span><br><span class="line"><span class="comment"> * 使用SolrJ来调用Solr服务...</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 1huangzewei</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SolrJ</span> </span>&#123;</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/***</span></span><br><span class="line"><span class="comment">	 * 添加索引</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@throws</span> SolrServerException</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@Test</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addIndex</span><span class="params">()</span> <span class="keyword">throws</span> SolrServerException, IOException </span>&#123;</span><br><span class="line">		String urlString=<span class="string">"http://localhost:8080/solr/collection1"</span>;</span><br><span class="line">		SolrServer solr=<span class="keyword">new</span> HttpSolrServer(urlString);</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//第一种添加方式</span></span><br><span class="line"><span class="comment">//		SolrInputDocument docs=new SolrInputDocument();</span></span><br><span class="line"><span class="comment">//		docs.addField("id","2");</span></span><br><span class="line"><span class="comment">//		docs.addField("name", "张三");</span></span><br><span class="line"><span class="comment">//		docs.addField("content","这是一个普通的名字");</span></span><br><span class="line"><span class="comment">//		solr.add(docs);</span></span><br><span class="line"><span class="comment">//		solr.commit();</span></span><br><span class="line">		</span><br><span class="line">		<span class="comment">//第二种添加方式</span></span><br><span class="line"><span class="comment">//		Article article=new Article(7,"疯狂Java讲义","JavaSE部分",13.99);</span></span><br><span class="line"><span class="comment">//		solr.addBean(article);</span></span><br><span class="line">		List&lt;Article&gt; list=<span class="keyword">new</span> ArrayList&lt;Article&gt;();</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;<span class="number">25</span>;i++) &#123;			</span><br><span class="line">			list.add(<span class="keyword">new</span> Article(i,<span class="string">"疯狂前端讲义"</span>,<span class="string">"前端基础知识"</span>,<span class="number">93.3</span>));</span><br><span class="line">		&#125;</span><br><span class="line">		solr.addBeans(list);</span><br><span class="line">		solr.commit();</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/***</span></span><br><span class="line"><span class="comment">	 * 删除索引</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@throws</span> SolrServerException</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@Test</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">delIndex</span><span class="params">()</span> <span class="keyword">throws</span> SolrServerException, IOException </span>&#123;</span><br><span class="line">		String urlString=<span class="string">"http://localhost:8080/solr/collection1"</span>;</span><br><span class="line">		SolrServer solr=<span class="keyword">new</span> HttpSolrServer(urlString);</span><br><span class="line">		solr.deleteById(<span class="string">"2"</span>);</span><br><span class="line">		solr.commit();</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//更新的话如果id相同，它会直接更新</span></span><br><span class="line">	</span><br><span class="line">	<span class="comment">/***</span></span><br><span class="line"><span class="comment">	 * 查询指定索引</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@throws</span> SolrServerException</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@Test</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testFind</span><span class="params">()</span> <span class="keyword">throws</span> SolrServerException, IOException </span>&#123;</span><br><span class="line">		String urlString=<span class="string">"http://localhost:8080/solr/collection1"</span>;</span><br><span class="line">		SolrServer solr=<span class="keyword">new</span> HttpSolrServer(urlString);</span><br><span class="line">		<span class="comment">//以后参数都是这个对象去构造...</span></span><br><span class="line">		SolrQuery solrParams=<span class="keyword">new</span> SolrQuery();</span><br><span class="line">		solrParams.setQuery(<span class="string">"title:疯狂Java讲义"</span>);</span><br><span class="line">		</span><br><span class="line">		QueryResponse queryResponse = solr.query(solrParams);</span><br><span class="line">		</span><br><span class="line">		SolrDocumentList results = queryResponse.getResults();</span><br><span class="line">		<span class="keyword">for</span> (SolrDocument solrDocument : results) &#123;</span><br><span class="line">			Object id = solrDocument.get(<span class="string">"id"</span>);</span><br><span class="line">			Object name = solrDocument.get(<span class="string">"title"</span>);</span><br><span class="line">			Object content = solrDocument.get(<span class="string">"content"</span>);</span><br><span class="line">			System.out.println(id);</span><br><span class="line">			System.out.println(name);</span><br><span class="line">			System.out.println(content);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/***</span></span><br><span class="line"><span class="comment">	 * 分页查询</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@throws</span> SolrServerException</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@Test</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testFindPage</span><span class="params">()</span> <span class="keyword">throws</span> SolrServerException, IOException </span>&#123;</span><br><span class="line">		String urlString=<span class="string">"http://localhost:8080/solr/collection1"</span>;</span><br><span class="line">		SolrServer solr=<span class="keyword">new</span> HttpSolrServer(urlString);</span><br><span class="line">		<span class="comment">//以后参数都是这个对象去构造...</span></span><br><span class="line">		SolrQuery solrParams=<span class="keyword">new</span> SolrQuery();</span><br><span class="line">		solrParams.setQuery(<span class="string">"title:疯狂前端讲义"</span>);</span><br><span class="line">		solrParams.setRows(<span class="number">10</span>);</span><br><span class="line">		solrParams.setStart(<span class="number">0</span>);</span><br><span class="line">		</span><br><span class="line">		QueryResponse queryResponse = solr.query(solrParams);</span><br><span class="line">		SolrDocumentList results = queryResponse.getResults();</span><br><span class="line">		<span class="keyword">for</span> (SolrDocument solrDocument : results) &#123;</span><br><span class="line">			Object id = solrDocument.get(<span class="string">"id"</span>);</span><br><span class="line">			Object name = solrDocument.get(<span class="string">"title"</span>);</span><br><span class="line">			Object content = solrDocument.get(<span class="string">"content"</span>);</span><br><span class="line">			System.out.println(id);</span><br><span class="line">			System.out.println(name);</span><br><span class="line">			System.out.println(content);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/***</span></span><br><span class="line"><span class="comment">	 * 显示高亮</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@throws</span> SolrServerException</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@Test</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testFindHighLight</span><span class="params">()</span> <span class="keyword">throws</span> SolrServerException, IOException </span>&#123;</span><br><span class="line">		String urlString=<span class="string">"http://localhost:8080/solr/collection1"</span>;</span><br><span class="line">		SolrServer solr=<span class="keyword">new</span> HttpSolrServer(urlString);</span><br><span class="line">		<span class="comment">//以后参数都是这个对象去构造...</span></span><br><span class="line">		SolrQuery solrParams=<span class="keyword">new</span> SolrQuery();</span><br><span class="line">		solrParams.setQuery(<span class="string">"title:小健"</span>);</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//高亮开启</span></span><br><span class="line">		solrParams.setHighlight(<span class="keyword">true</span>);</span><br><span class="line">		<span class="comment">//高亮显示格式</span></span><br><span class="line">		solrParams.setHighlightSimplePre(<span class="string">"&lt;font color='red'&gt;"</span>);</span><br><span class="line">		solrParams.setHighlightSimplePost(<span class="string">"&lt;/font&gt;"</span>);</span><br><span class="line">		<span class="comment">//我需要哪几个字段进行高亮</span></span><br><span class="line">		solrParams.setParam(<span class="string">"h1.fl"</span>, <span class="string">"title"</span>);</span><br><span class="line">		QueryResponse queryResponse = solr.query(solrParams);</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//返回所有查询结果</span></span><br><span class="line">		SolrDocumentList results = queryResponse.getResults();</span><br><span class="line">		</span><br><span class="line">		Map&lt;String, Map&lt;String, List&lt;String&gt;&gt;&gt; maplist = queryResponse.getHighlighting();</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">for</span> (SolrDocument solrDocument : results) &#123;</span><br><span class="line">			Object id = solrDocument.get(<span class="string">"id"</span>);</span><br><span class="line">			Map&lt;String, List&lt;String&gt;&gt; fieldMap = maplist.get(id);</span><br><span class="line">			List&lt;String&gt; list = fieldMap.get(<span class="string">"title"</span>);</span><br><span class="line">			System.out.println(list);</span><br><span class="line"><span class="comment">//			Object name = solrDocument.get("title");</span></span><br><span class="line"><span class="comment">//			Object content = solrDocument.get("content");</span></span><br><span class="line"><span class="comment">//			System.out.println(id);</span></span><br><span class="line"><span class="comment">//			System.out.println(name);</span></span><br><span class="line"><span class="comment">//			System.out.println(content);</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="添加自定义域名"><a href="#添加自定义域名" class="headerlink" title="添加自定义域名"></a>添加自定义域名</h2><ol>
<li>找到SolrCore下得config/schema.xml<ul>
<li>field属性：name域名称 type域名称 indexed是否索引 stored是否存储 multiValued是否可以存储多值。</li>
<li>dynamicFiled：name=<code>&quot;*_i&quot;</code>: 通配符</li>
<li><code>&lt;uniqueKey&gt;id&lt;/uniqueKey&gt;</code>：主要值</li>
<li>copyField属性：source源域名 dest目标域名</li>
<li>fieldType属性：name类型名称 class类型对应的类</li>
</ul>
</li>
<li>自定义field.在schema.xml中添加如下信息</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--自定义Field--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">field</span> <span class="attr">name</span>=<span class="string">"title_ik"</span> <span class="attr">type</span>=<span class="string">"text_ik"</span> <span class="attr">indexed</span>=<span class="string">"true"</span> <span class="attr">stored</span>=<span class="string">"true"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">field</span> <span class="attr">name</span>=<span class="string">"content_ik"</span> <span class="attr">type</span>=<span class="string">"text_ik"</span> <span class="attr">indexed</span>=<span class="string">"true"</span> <span class="attr">stored</span>=<span class="string">"false"</span> <span class="attr">multiValued</span>=<span class="string">"true"</span>/&gt;</span></span><br><span class="line">	</span><br><span class="line"><span class="comment">&lt;!--类型 IKAnalyzer--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">fieldType</span> <span class="attr">name</span>=<span class="string">"text_ik"</span> <span class="attr">class</span>=<span class="string">"solr.TextField"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">analyzer</span> <span class="attr">class</span>=<span class="string">"org.wltea.analyzer.lucene.IKAnalyzer"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">fieldType</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="3">
<li>把IkAnalyzer的jar和配置文件放到solr项目/WEB-INF/lib目录下，配置文件放到/solr/WEB-INF/classes目录下。classes如果没有，就重新创建。</li>
</ol>
<h2 id="将数据库中的数据导入到索引库"><a href="#将数据库中的数据导入到索引库" class="headerlink" title="将数据库中的数据导入到索引库"></a>将数据库中的数据导入到索引库</h2><p>solr-5.20版本</p>
<ol>
<li><p>在<code>solrHome</code>下创建一个<code>lib</code>目录</p>
</li>
<li><p>将mysql驱动包和<code>solr-5.20/dist/</code>下的两个<code>Dataimport</code>包拷贝到<code>lib</code>目录下.</p>
</li>
<li><p>修改<code>solrHome/core/conf</code>目录下<code>solrconfig.xml</code>配置文件，添加一个<code>requestHandler</code></p>
</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--数据库导入--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">requestHandler</span> <span class="attr">name</span>=<span class="string">"/dataimport"</span> <span class="attr">class</span>=<span class="string">"org.apache.solr.handler.dataimport.DataImportHandler"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">lst</span> <span class="attr">name</span>=<span class="string">"defaults"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">str</span> <span class="attr">name</span>=<span class="string">"config"</span>&gt;</span>data-config.xml<span class="tag">&lt;/<span class="name">str</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">lst</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">requestHandler</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="4">
<li>编写<code>data-config.xml</code>文件，存放在<code>solrCore</code>的<code>conf</code>目录</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">dataConfig</span>&gt;</span>   </span><br><span class="line"><span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">"JdbcDataSource"</span>   </span></span><br><span class="line"><span class="tag">		  <span class="attr">driver</span>=<span class="string">"com.mysql.jdbc.Driver"</span>   </span></span><br><span class="line"><span class="tag">		  <span class="attr">url</span>=<span class="string">"jdbc:mysql://localhost:3306/solr"</span>   </span></span><br><span class="line"><span class="tag">		  <span class="attr">user</span>=<span class="string">"root"</span>   </span></span><br><span class="line"><span class="tag">		  <span class="attr">password</span>=<span class="string">"123456"</span>/&gt;</span>   </span><br><span class="line"><span class="tag">&lt;<span class="name">document</span>&gt;</span>   </span><br><span class="line">	<span class="tag">&lt;<span class="name">entity</span> <span class="attr">name</span>=<span class="string">"product"</span> <span class="attr">query</span>=<span class="string">"SELECT pid,name,catalog_name,price,description,picture FROM products "</span>&gt;</span></span><br><span class="line">		 <span class="tag">&lt;<span class="name">field</span> <span class="attr">column</span>=<span class="string">"pid"</span> <span class="attr">name</span>=<span class="string">"id"</span>/&gt;</span> </span><br><span class="line">		 <span class="tag">&lt;<span class="name">field</span> <span class="attr">column</span>=<span class="string">"name"</span> <span class="attr">name</span>=<span class="string">"product_name"</span>/&gt;</span> </span><br><span class="line">		 <span class="tag">&lt;<span class="name">field</span> <span class="attr">column</span>=<span class="string">"catalog_name"</span> <span class="attr">name</span>=<span class="string">"product_catalog_name"</span>/&gt;</span> </span><br><span class="line">		 <span class="tag">&lt;<span class="name">field</span> <span class="attr">column</span>=<span class="string">"price"</span> <span class="attr">name</span>=<span class="string">"product_price"</span>/&gt;</span> </span><br><span class="line">		 <span class="tag">&lt;<span class="name">field</span> <span class="attr">column</span>=<span class="string">"description"</span> <span class="attr">name</span>=<span class="string">"product_description"</span>/&gt;</span> </span><br><span class="line">		 <span class="tag">&lt;<span class="name">field</span> <span class="attr">column</span>=<span class="string">"picture"</span> <span class="attr">name</span>=<span class="string">"product_picture"</span>/&gt;</span> </span><br><span class="line">	<span class="tag">&lt;/<span class="name">entity</span>&gt;</span>   </span><br><span class="line"><span class="tag">&lt;/<span class="name">document</span>&gt;</span>   </span><br><span class="line"><span class="tag">&lt;/<span class="name">dataConfig</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="5">
<li>在<code>scheml.xml</code>中添加<code>field</code>属性</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">field</span> <span class="attr">name</span>=<span class="string">"product_name"</span> <span class="attr">type</span>=<span class="string">"text_ik"</span> <span class="attr">indexed</span>=<span class="string">"true"</span> <span class="attr">stored</span>=<span class="string">"true"</span> <span class="attr">multiValued</span>=<span class="string">"true"</span> /&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">field</span> <span class="attr">name</span>=<span class="string">"product_catalog_name"</span> <span class="attr">type</span>=<span class="string">"text_ik"</span> <span class="attr">indexed</span>=<span class="string">"true"</span> <span class="attr">stored</span>=<span class="string">"true"</span> <span class="attr">multiValued</span>=<span class="string">"true"</span> /&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">field</span> <span class="attr">name</span>=<span class="string">"product_price"</span> <span class="attr">type</span>=<span class="string">"tdouble"</span> <span class="attr">indexed</span>=<span class="string">"true"</span> <span class="attr">stored</span>=<span class="string">"true"</span> <span class="attr">multiValued</span>=<span class="string">"false"</span> /&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">field</span> <span class="attr">name</span>=<span class="string">"product_description"</span> <span class="attr">type</span>=<span class="string">"text_ik"</span> <span class="attr">indexed</span>=<span class="string">"true"</span> <span class="attr">stored</span>=<span class="string">"false"</span> <span class="attr">multiValued</span>=<span class="string">"false"</span> /&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">field</span> <span class="attr">name</span>=<span class="string">"product_picture"</span> <span class="attr">type</span>=<span class="string">"string"</span> <span class="attr">indexed</span>=<span class="string">"false"</span> <span class="attr">stored</span>=<span class="string">"true"</span> <span class="attr">multiValued</span>=<span class="string">"true"</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<p>Solr-4.10版本</p>
<ol>
<li>找到SolrCore下得config/schema.xml,添加自定义域.</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--自定义Field--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">field</span> <span class="attr">name</span>=<span class="string">"title_ik"</span> <span class="attr">type</span>=<span class="string">"text_ik"</span> <span class="attr">indexed</span>=<span class="string">"true"</span> <span class="attr">stored</span>=<span class="string">"true"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">field</span> <span class="attr">name</span>=<span class="string">"content_ik"</span> <span class="attr">type</span>=<span class="string">"text_ik"</span> <span class="attr">indexed</span>=<span class="string">"true"</span> <span class="attr">stored</span>=<span class="string">"false"</span> <span class="attr">multiValued</span>=<span class="string">"true"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--类型 IKAnalyzer--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">fieldType</span> <span class="attr">name</span>=<span class="string">"text_ik"</span> <span class="attr">class</span>=<span class="string">"solr.TextField"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">analyzer</span> <span class="attr">class</span>=<span class="string">"org.wltea.analyzer.lucene.IKAnalyzer"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">fieldType</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--product--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">field</span> <span class="attr">name</span>=<span class="string">"product_name"</span> <span class="attr">type</span>=<span class="string">"text_ik"</span> <span class="attr">indexed</span>=<span class="string">"true"</span> <span class="attr">stored</span>=<span class="string">"true"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">field</span> <span class="attr">name</span>=<span class="string">"product_price"</span>  <span class="attr">type</span>=<span class="string">"float"</span> <span class="attr">indexed</span>=<span class="string">"true"</span> <span class="attr">stored</span>=<span class="string">"true"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">field</span> <span class="attr">name</span>=<span class="string">"product_description"</span> <span class="attr">type</span>=<span class="string">"text_ik"</span> <span class="attr">indexed</span>=<span class="string">"true"</span> <span class="attr">stored</span>=<span class="string">"false"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">field</span> <span class="attr">name</span>=<span class="string">"product_picture"</span> <span class="attr">type</span>=<span class="string">"string"</span> <span class="attr">indexed</span>=<span class="string">"false"</span> <span class="attr">stored</span>=<span class="string">"true"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">field</span> <span class="attr">name</span>=<span class="string">"product_catalog_name"</span> <span class="attr">type</span>=<span class="string">"string"</span> <span class="attr">indexed</span>=<span class="string">"true"</span> <span class="attr">stored</span>=<span class="string">"true"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">field</span> <span class="attr">name</span>=<span class="string">"product_keywords"</span> <span class="attr">type</span>=<span class="string">"text_ik"</span> <span class="attr">indexed</span>=<span class="string">"true"</span> <span class="attr">stored</span>=<span class="string">"false"</span> <span class="attr">multiValued</span>=<span class="string">"true"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">copyField</span> <span class="attr">source</span>=<span class="string">"product_name"</span> <span class="attr">dest</span>=<span class="string">"product_keywords"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">copyField</span> <span class="attr">source</span>=<span class="string">"product_description"</span> <span class="attr">dest</span>=<span class="string">"product_keywords"</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li><p>导入数据</p>
<ul>
<li>定义<code>dataimport-handler</code>步骤：</li>
</ul>
<ol>
<li>打开collection1/cinfig/solrconfig.xml</li>
<li>导入jar包，放入到<code>solrHome\collection1\lib</code>,<code>solr-4.10.3\dist\solr-dataimporthandler-4.10.3.jar</code>、<code>solr-4.10.3\dist\solr-dataimporthandler-extras-4.10.3.jar</code>、<code>mysql-connector-java-5.1.7-bin.jar</code></li>
<li>在solrconfig.xml中，添加一个<code>requestHandler</code></li>
<li>创建配置文件<code>data-config.xml</code>，并将该配置文件放到<code>solrconfig</code>同级目录下</li>
<li>重启tomcat服务器。</li>
</ol>
</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--solrconfig.xml--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">requestHandler</span> <span class="attr">name</span>=<span class="string">"/dataimport"</span> <span class="attr">class</span>=<span class="string">"org.apache.solr.handler.dataimport.DataImportHandler"</span>&gt;</span></span><br><span class="line">		 <span class="tag">&lt;<span class="name">lst</span> <span class="attr">name</span>=<span class="string">"defaults"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">str</span> <span class="attr">name</span>=<span class="string">"config"</span>&gt;</span>data-config.xml<span class="tag">&lt;/<span class="name">str</span>&gt;</span></span><br><span class="line">		 <span class="tag">&lt;/<span class="name">lst</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">requestHandler</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--data-config.xml--&gt;</span></span><br><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">dataConfig</span>&gt;</span>   </span><br><span class="line"><span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">"JdbcDataSource"</span>   </span></span><br><span class="line"><span class="tag">		  <span class="attr">driver</span>=<span class="string">"com.mysql.jdbc.Driver"</span>   </span></span><br><span class="line"><span class="tag">		  <span class="attr">url</span>=<span class="string">"jdbc:mysql://localhost:3306/lucene"</span>   </span></span><br><span class="line"><span class="tag">		  <span class="attr">user</span>=<span class="string">"root"</span>   </span></span><br><span class="line"><span class="tag">		  <span class="attr">password</span>=<span class="string">"root"</span>/&gt;</span>   </span><br><span class="line"><span class="tag">&lt;<span class="name">document</span>&gt;</span>   </span><br><span class="line">	<span class="tag">&lt;<span class="name">entity</span> <span class="attr">name</span>=<span class="string">"product"</span> <span class="attr">query</span>=<span class="string">"SELECT pid,name,catalog_name,price,description,picture FROM products "</span>&gt;</span></span><br><span class="line">		 <span class="tag">&lt;<span class="name">field</span> <span class="attr">column</span>=<span class="string">"pid"</span> <span class="attr">name</span>=<span class="string">"id"</span>/&gt;</span> </span><br><span class="line">		 <span class="tag">&lt;<span class="name">field</span> <span class="attr">column</span>=<span class="string">"name"</span> <span class="attr">name</span>=<span class="string">"product_name"</span>/&gt;</span> </span><br><span class="line">		 <span class="tag">&lt;<span class="name">field</span> <span class="attr">column</span>=<span class="string">"catalog_name"</span> <span class="attr">name</span>=<span class="string">"product_catalog_name"</span>/&gt;</span> </span><br><span class="line">		 <span class="tag">&lt;<span class="name">field</span> <span class="attr">column</span>=<span class="string">"price"</span> <span class="attr">name</span>=<span class="string">"product_price"</span>/&gt;</span> </span><br><span class="line">		 <span class="tag">&lt;<span class="name">field</span> <span class="attr">column</span>=<span class="string">"description"</span> <span class="attr">name</span>=<span class="string">"product_description"</span>/&gt;</span> </span><br><span class="line">		 <span class="tag">&lt;<span class="name">field</span> <span class="attr">column</span>=<span class="string">"picture"</span> <span class="attr">name</span>=<span class="string">"product_picture"</span>/&gt;</span> </span><br><span class="line">	<span class="tag">&lt;/<span class="name">entity</span>&gt;</span>   </span><br><span class="line"><span class="tag">&lt;/<span class="name">document</span>&gt;</span>   </span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">dataConfig</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="Java代码实现solr复杂查询"><a href="#Java代码实现solr复杂查询" class="headerlink" title="Java代码实现solr复杂查询"></a>Java代码实现solr复杂查询</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.gdaib.dao;</span><br><span class="line"><span class="comment">/***</span></span><br><span class="line"><span class="comment"> * solrj操作服务器...</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 1huangzewei</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.solr.client.solrj.SolrQuery;</span><br><span class="line"><span class="keyword">import</span> org.apache.solr.client.solrj.SolrQuery.ORDER;</span><br><span class="line"><span class="keyword">import</span> org.apache.solr.client.solrj.SolrServer;</span><br><span class="line"><span class="keyword">import</span> org.apache.solr.client.solrj.impl.HttpSolrServer;</span><br><span class="line"><span class="keyword">import</span> org.apache.solr.client.solrj.response.QueryResponse;</span><br><span class="line"><span class="keyword">import</span> org.apache.solr.common.SolrDocument;</span><br><span class="line"><span class="keyword">import</span> org.apache.solr.common.SolrDocumentList;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SolrManager</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Test</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">searchIndex</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">		</span><br><span class="line"><span class="comment">//		1.获取solr的服务器 用于连接solr项目</span></span><br><span class="line">		SolrServer solrServer=<span class="keyword">new</span> HttpSolrServer(<span class="string">"http://localhost:8080/solr/collection1"</span>);</span><br><span class="line">		SolrQuery solrQuery=<span class="keyword">new</span> SolrQuery();</span><br><span class="line">		<span class="comment">//设置主查询条件</span></span><br><span class="line"><span class="comment">//	      "q": "花儿朵朵",</span></span><br><span class="line">		solrQuery.setQuery(<span class="string">"花儿朵朵"</span>);</span><br><span class="line">		<span class="comment">//设置过滤查询</span></span><br><span class="line"><span class="comment">//		  "fq":"过滤"</span></span><br><span class="line">		solrQuery.set(<span class="string">"fq"</span>,<span class="string">"product_catalog_name:时尚卫浴"</span>);</span><br><span class="line">		solrQuery.set(<span class="string">"fq"</span>,<span class="string">"product_price:[0 TO 200]"</span>);</span><br><span class="line">		<span class="comment">//设置分页查询</span></span><br><span class="line"><span class="comment">//		  "start":"0",</span></span><br><span class="line"><span class="comment">//	      "rows":"10"</span></span><br><span class="line">		solrQuery.setStart(<span class="number">0</span>);</span><br><span class="line">		solrQuery.setRows(<span class="number">10</span>);</span><br><span class="line">		<span class="comment">//设置默认查询条件</span></span><br><span class="line"><span class="comment">//	      "df": "product_keywords",</span></span><br><span class="line">		solrQuery.set(<span class="string">"df"</span>,<span class="string">"product_keywords"</span>);</span><br><span class="line">		<span class="comment">//开启高亮</span></span><br><span class="line"><span class="comment">//	      "hl": "true",</span></span><br><span class="line"><span class="comment">//		  "hl.simple.pre": "&lt;span color='red'&gt;",</span></span><br><span class="line"><span class="comment">//	      "hl.simple.post": "&lt;/span&gt;",</span></span><br><span class="line"><span class="comment">//	      "hl.fl": "product_name",</span></span><br><span class="line">		solrQuery.setHighlight(<span class="keyword">true</span>);</span><br><span class="line">		solrQuery.setHighlightSimplePre(<span class="string">"&lt;span color='red'&gt;"</span>);</span><br><span class="line">		solrQuery.setHighlightSimplePost(<span class="string">"&lt;/span&gt;"</span>);</span><br><span class="line">		solrQuery.addHighlightField(<span class="string">"product_name"</span>);</span><br><span class="line">		<span class="comment">//设置排序</span></span><br><span class="line"><span class="comment">//	      "sort": "product_price asc",</span></span><br><span class="line">		solrQuery.setSort(<span class="string">"product_price"</span>, ORDER.asc);</span><br><span class="line">		</span><br><span class="line"><span class="comment">//		执行查询</span></span><br><span class="line">		QueryResponse queryResponse = solrServer.query(solrQuery);</span><br><span class="line">		SolrDocumentList results = queryResponse.getResults();</span><br><span class="line">		System.out.println(<span class="string">"总条数:"</span>+results.getNumFound());</span><br><span class="line">		<span class="keyword">for</span> (SolrDocument solrDocument : results) &#123;</span><br><span class="line">			System.out.println(solrDocument.get(<span class="string">"id"</span>));</span><br><span class="line">			System.out.println(solrDocument.get(<span class="string">"product_name"</span>));</span><br><span class="line">			System.out.println(solrDocument.get(<span class="string">"product_catalog_name"</span>));</span><br><span class="line">			System.out.println(solrDocument.get(<span class="string">"product_price"</span>));</span><br><span class="line">			System.out.println(solrDocument.get(<span class="string">"product_description"</span>));</span><br><span class="line">			System.out.println(solrDocument.get(<span class="string">"product_picture"</span>));</span><br><span class="line">			System.out.println(<span class="string">"----------------------------------------------------"</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="实现京东的案例"><a href="#实现京东的案例" class="headerlink" title="实现京东的案例"></a>实现京东的案例</h2><p>页面传到后台的</p>
<ol>
<li>当前页面，默认为0</li>
<li>每页显示条数 默认是60</li>
<li>主查询条件</li>
<li>过滤条件 商品类别和商品价格区间</li>
<li>价格排序 升序 降序</li>
</ol>
<p>后台提供页面的数据：</p>
<ol>
<li>商品列表 List</li>
<li>商品总条数</li>
<li>总页数</li>
<li>当前页码</li>
<li>每页显示的条数 </li>
</ol>
<p>（PageBean.java）</p>
<h2 id="搭建jd案例框架"><a href="#搭建jd案例框架" class="headerlink" title="搭建jd案例框架"></a>搭建jd案例框架</h2><p>分析</p>
<p>dao层</p>
<ol>
<li>SolrJ实现</li>
<li>application-dao.xml（省略，全部交给SpringMVC容器）</li>
<li>HttpSolrServer交给容器</li>
</ol>
<p>service层</p>
<ol>
<li>扫描器</li>
<li>applicationContext-service.xml（省略，全部交给SpringMVC容器）</li>
</ol>
<p>web层</p>
<ol>
<li>springmvc.xml</li>
<li>扫描器 （com.gdaib）</li>
<li>注解驱动</li>
<li>视图解析器</li>
</ol>
<p>步骤:</p>
<ol>
<li>创建一个web工程</li>
<li>导入jar:solrJ扩展包、solr扩展包、springmvc、spring</li>
<li>配置文件:springmvc.xml、log4j.properties</li>
<li>在web.xml配置前端控制器</li>
<li>引入静态资源</li>
</ol>
<h2 id="代码实现"><a href="#代码实现" class="headerlink" title="代码实现"></a>代码实现</h2><ol>
<li>web.xml</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span> <span class="attr">xmlns</span>=<span class="string">"http://java.sun.com/xml/ns/javaee"</span> <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"</span> <span class="attr">version</span>=<span class="string">"3.0"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">display-name</span>&gt;</span>solr-jd<span class="tag">&lt;/<span class="name">display-name</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- SpringMVC前端控制器 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springmvc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">    		<span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">    		<span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:springmvc.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springmvc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>*.action<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- post中文乱码的解决问题 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">    		<span class="tag">&lt;<span class="name">param-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">    		<span class="tag">&lt;<span class="name">param-value</span>&gt;</span>utf-8<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>springmvc.xml</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">		<span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">		<span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag">		<span class="attr">xmlns:mvc</span>=<span class="string">"http://www.springframework.org/schema/mvc"</span></span></span><br><span class="line"><span class="tag">		<span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">		http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">		http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/context/spring-context.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/mvc</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/mvc/spring-mvc.xsd"</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">       <span class="comment">&lt;!--  SolrServer solrServer=new HttpSolrServer("http://localhost:8080/solr/collection1"); --&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"solrServer"</span> <span class="attr">class</span>=<span class="string">"org.apache.solr.client.solrj.impl.HttpSolrServer"</span>&gt;</span></span><br><span class="line">       		<span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">index</span>=<span class="string">"0"</span> <span class="attr">value</span>=<span class="string">"http://localhost:8080/solr/collection1"</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">      	<span class="comment">&lt;!-- 扫描注解 --&gt;</span></span><br><span class="line">      	<span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.gdaib.jd"</span>&gt;</span><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line">      	<span class="comment">&lt;!-- 注解确定， 注册HandlerMapping和HandlerAdapter--&gt;</span></span><br><span class="line">      	<span class="tag">&lt;<span class="name">mvc:annotation-driven</span>&gt;</span><span class="tag">&lt;/<span class="name">mvc:annotation-driven</span>&gt;</span></span><br><span class="line">      	<span class="comment">&lt;!-- 视图解析器 --&gt;</span></span><br><span class="line">      	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"viewResource"</span> <span class="attr">class</span>=<span class="string">"org.springframework.web.servlet.view.InternalResourceViewResolver"</span>&gt;</span></span><br><span class="line">      		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"prefix"</span> <span class="attr">value</span>=<span class="string">"/WEB-INF/jsp/"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">      		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"suffix"</span> <span class="attr">value</span>=<span class="string">".jsp"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">      	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="3">
<li>pojo类</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.gdaib.jd.pojo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PageBean</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> List&lt;Product&gt; productList;<span class="comment">//商品列表</span></span><br><span class="line">	<span class="keyword">private</span> Long recordCount;<span class="comment">//商品总数</span></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> pageCount;<span class="comment">//总页数</span></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> curPage;<span class="comment">//当前页</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> List&lt;Product&gt; <span class="title">getProductList</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> productList;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setProductList</span><span class="params">(List&lt;Product&gt; productList)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.productList = productList;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> Long <span class="title">getRecordCount</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> recordCount;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setRecordCount</span><span class="params">(Long recordCount)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.recordCount = recordCount;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getPageCount</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> pageCount;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPageCount</span><span class="params">(<span class="keyword">int</span> pageCount)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.pageCount = pageCount;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getCurPage</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> curPage;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setCurPage</span><span class="params">(<span class="keyword">int</span> curPage)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.curPage = curPage;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"PageBean [productList="</span> + productList + <span class="string">", recordCount="</span> + recordCount + <span class="string">", pageCount="</span> + pageCount</span><br><span class="line">				+ <span class="string">", curPage="</span> + curPage + <span class="string">"]"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.gdaib.jd.pojo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Product</span> </span>&#123;</span><br><span class="line">	<span class="comment">// 商品编号</span></span><br><span class="line">		<span class="keyword">private</span> String pid;</span><br><span class="line">		<span class="comment">// 商品名称</span></span><br><span class="line">		<span class="keyword">private</span> String name;</span><br><span class="line">		<span class="comment">// 商品分类名称</span></span><br><span class="line">		<span class="keyword">private</span> String catalog_name;</span><br><span class="line">		<span class="comment">// 价格</span></span><br><span class="line">		<span class="keyword">private</span> <span class="keyword">float</span> price;</span><br><span class="line">		<span class="comment">// 商品描述</span></span><br><span class="line">		<span class="keyword">private</span> String description;</span><br><span class="line">		<span class="comment">// 图片名称</span></span><br><span class="line">		<span class="keyword">private</span> String picture;</span><br><span class="line">		<span class="function"><span class="keyword">public</span> String <span class="title">getPid</span><span class="params">()</span> </span>&#123;</span><br><span class="line">			<span class="keyword">return</span> pid;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPid</span><span class="params">(String pid)</span> </span>&#123;</span><br><span class="line">			<span class="keyword">this</span>.pid = pid;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">			<span class="keyword">return</span> name;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">			<span class="keyword">this</span>.name = name;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="function"><span class="keyword">public</span> String <span class="title">getCatalog_name</span><span class="params">()</span> </span>&#123;</span><br><span class="line">			<span class="keyword">return</span> catalog_name;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setCatalog_name</span><span class="params">(String catalog_name)</span> </span>&#123;</span><br><span class="line">			<span class="keyword">this</span>.catalog_name = catalog_name;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">float</span> <span class="title">getPrice</span><span class="params">()</span> </span>&#123;</span><br><span class="line">			<span class="keyword">return</span> price;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPrice</span><span class="params">(<span class="keyword">float</span> price)</span> </span>&#123;</span><br><span class="line">			<span class="keyword">this</span>.price = price;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="function"><span class="keyword">public</span> String <span class="title">getDescription</span><span class="params">()</span> </span>&#123;</span><br><span class="line">			<span class="keyword">return</span> description;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setDescription</span><span class="params">(String description)</span> </span>&#123;</span><br><span class="line">			<span class="keyword">this</span>.description = description;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="function"><span class="keyword">public</span> String <span class="title">getPicture</span><span class="params">()</span> </span>&#123;</span><br><span class="line">			<span class="keyword">return</span> picture;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPicture</span><span class="params">(String picture)</span> </span>&#123;</span><br><span class="line">			<span class="keyword">this</span>.picture = picture;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="meta">@Override</span></span><br><span class="line">		<span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="string">"Product [pid="</span> + pid + <span class="string">", name="</span> + name + <span class="string">", catalog_name="</span> + catalog_name + <span class="string">", price="</span> + price</span><br><span class="line">					+ <span class="string">", description="</span> + description + <span class="string">", picture="</span> + picture + <span class="string">"]"</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>dao层</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.gdaib.jd.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.solr.client.solrj.SolrQuery;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.gdaib.jd.pojo.PageBean;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">ProductDao</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function">PageBean <span class="title">queryProduct</span><span class="params">(SolrQuery solrQuery)</span></span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> com.gdaib.jd.dao.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.solr.client.solrj.SolrQuery;</span><br><span class="line"><span class="keyword">import</span> org.apache.solr.client.solrj.SolrServer;</span><br><span class="line"><span class="keyword">import</span> org.apache.solr.client.solrj.SolrServerException;</span><br><span class="line"><span class="keyword">import</span> org.apache.solr.client.solrj.SolrQuery.ORDER;</span><br><span class="line"><span class="keyword">import</span> org.apache.solr.client.solrj.impl.HttpSolrServer;</span><br><span class="line"><span class="keyword">import</span> org.apache.solr.client.solrj.response.QueryResponse;</span><br><span class="line"><span class="keyword">import</span> org.apache.solr.common.SolrDocument;</span><br><span class="line"><span class="keyword">import</span> org.apache.solr.common.SolrDocumentList;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Repository;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.gdaib.jd.dao.ProductDao;</span><br><span class="line"><span class="keyword">import</span> com.gdaib.jd.pojo.PageBean;</span><br><span class="line"><span class="keyword">import</span> com.gdaib.jd.pojo.Product;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProductDaoImpl</span> <span class="keyword">implements</span> <span class="title">ProductDao</span></span>&#123;</span><br><span class="line">	</span><br><span class="line">	<span class="meta">@Autowired</span></span><br><span class="line">	<span class="keyword">private</span> SolrServer solrServer;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> PageBean <span class="title">queryProduct</span><span class="params">(SolrQuery solrQuery)</span> </span>&#123;</span><br><span class="line">		PageBean pageBean=<span class="keyword">new</span> PageBean();</span><br><span class="line"><span class="comment">//		执行查询</span></span><br><span class="line">		QueryResponse queryResponse=<span class="keyword">null</span>;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			queryResponse = solrServer.query(solrQuery);</span><br><span class="line">		&#125; <span class="keyword">catch</span> (SolrServerException e) &#123;</span><br><span class="line">			<span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">//高亮设置</span></span><br><span class="line">		Map&lt;String, Map&lt;String, List&lt;String&gt;&gt;&gt; highlighting = queryResponse.getHighlighting();</span><br><span class="line">		</span><br><span class="line">		SolrDocumentList results = queryResponse.getResults();</span><br><span class="line">		</span><br><span class="line">		pageBean.setRecordCount(results.getNumFound());</span><br><span class="line">		</span><br><span class="line">		List&lt;Product&gt; list=<span class="keyword">new</span> ArrayList&lt;Product&gt;();</span><br><span class="line">		<span class="keyword">for</span> (SolrDocument solrDocument : results) &#123;</span><br><span class="line">			Product product=<span class="keyword">new</span> Product();</span><br><span class="line">			product.setPid((String) solrDocument.get(<span class="string">"id"</span>));</span><br><span class="line">			</span><br><span class="line">			<span class="comment">//添加高亮</span></span><br><span class="line">			Map&lt;String, List&lt;String&gt;&gt; map = highlighting.get((String) solrDocument.get(<span class="string">"id"</span>));</span><br><span class="line">			List&lt;String&gt; list2 = map.get(<span class="string">"product_name"</span>);</span><br><span class="line">			String product_name=<span class="string">""</span>;</span><br><span class="line">			<span class="keyword">if</span>(list2!=<span class="keyword">null</span> &amp;&amp; list2.size()&gt;<span class="number">0</span>) &#123;</span><br><span class="line">				product_name=list2.get(<span class="number">0</span>);</span><br><span class="line">			&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">				product_name=(String) solrDocument.get(<span class="string">"product_name"</span>);</span><br><span class="line">			&#125;</span><br><span class="line">			</span><br><span class="line">			product.setName(product_name);</span><br><span class="line">			product.setDescription(<span class="keyword">null</span>);</span><br><span class="line">			product.setPrice((<span class="keyword">float</span>) solrDocument.get(<span class="string">"product_price"</span>));</span><br><span class="line">			product.setCatalog_name((String) solrDocument.get(<span class="string">"product_catalog_name"</span>));</span><br><span class="line">			product.setPicture((String) solrDocument.get(<span class="string">"product_picture"</span>));</span><br><span class="line">			list.add(product);</span><br><span class="line">		&#125;</span><br><span class="line">		pageBean.setProductList(list);</span><br><span class="line">		<span class="keyword">return</span> pageBean;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="5">
<li>service层</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.gdaib.jd.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.gdaib.jd.pojo.PageBean;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">ProductService</span> </span>&#123;</span><br><span class="line">	<span class="comment">//搜索引擎</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> PageBean <span class="title">queryProduct</span><span class="params">(<span class="keyword">int</span> page,String queryString,String catalog_name,String price,String sort)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> com.gdaib.jd.service.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.solr.client.solrj.SolrQuery;</span><br><span class="line"><span class="keyword">import</span> org.apache.solr.client.solrj.SolrQuery.ORDER;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestParam;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.gdaib.jd.dao.ProductDao;</span><br><span class="line"><span class="keyword">import</span> com.gdaib.jd.pojo.PageBean;</span><br><span class="line"><span class="keyword">import</span> com.gdaib.jd.service.ProductService;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProductServiceImpl</span> <span class="keyword">implements</span> <span class="title">ProductService</span></span>&#123;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> rows=<span class="number">60</span>;<span class="comment">//每页显示的条数</span></span><br><span class="line">	<span class="meta">@Autowired</span></span><br><span class="line">	<span class="keyword">private</span> ProductDao productDao;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> PageBean <span class="title">queryProduct</span><span class="params">(<span class="keyword">int</span> page,String queryString,String catalog_name,String price,String sort)</span> </span>&#123;</span><br><span class="line">		</span><br><span class="line">		SolrQuery solrQuery=<span class="keyword">new</span> SolrQuery();</span><br><span class="line">		<span class="comment">//设置主查询条件</span></span><br><span class="line"><span class="comment">//	      "q": "花儿朵朵",</span></span><br><span class="line">		<span class="keyword">if</span>(queryString!=<span class="keyword">null</span>&amp;&amp;!queryString.equals(<span class="string">""</span>)) &#123;</span><br><span class="line">			<span class="comment">//System.out.println("1");</span></span><br><span class="line">			solrQuery.setQuery(queryString);</span><br><span class="line">		&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">			<span class="comment">//System.out.println("2");</span></span><br><span class="line">			solrQuery.setQuery(<span class="string">"*:*"</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//设置过滤查询</span></span><br><span class="line"><span class="comment">//		  "fq":"过滤"</span></span><br><span class="line">		<span class="comment">//商品分类名称过滤</span></span><br><span class="line">		<span class="keyword">if</span> (<span class="keyword">null</span> != catalog_name &amp;&amp; !<span class="string">""</span>.equals(catalog_name)) &#123;</span><br><span class="line">			solrQuery.addFilterQuery(<span class="string">"product_catalog_name:"</span> + catalog_name);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">//价格区间过滤</span></span><br><span class="line">		<span class="keyword">if</span> (<span class="keyword">null</span> != price &amp;&amp; !<span class="string">""</span>.equals(price)) &#123;</span><br><span class="line">			String[] strings = price.split(<span class="string">"-"</span>);</span><br><span class="line">			solrQuery.addFilterQuery(<span class="string">"product_price:["</span>+strings[<span class="number">0</span>]+<span class="string">" TO "</span>+strings[<span class="number">1</span>]+<span class="string">"]"</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//设置分页查询</span></span><br><span class="line"><span class="comment">//		  "start":"0",</span></span><br><span class="line"><span class="comment">//	      "rows":"10"</span></span><br><span class="line">		solrQuery.setStart(page);</span><br><span class="line">		solrQuery.setRows(rows);</span><br><span class="line">		<span class="comment">//设置默认查询条件</span></span><br><span class="line"><span class="comment">//	      "df": "product_keywords",</span></span><br><span class="line">		solrQuery.set(<span class="string">"df"</span>,<span class="string">"product_keywords"</span>);</span><br><span class="line">		<span class="comment">//开启高亮</span></span><br><span class="line"><span class="comment">//	      "hl": "true",</span></span><br><span class="line"><span class="comment">//		  "hl.simple.pre": "&lt;span color='red'&gt;",</span></span><br><span class="line"><span class="comment">//	      "hl.simple.post": "&lt;/span&gt;",</span></span><br><span class="line"><span class="comment">//	      "hl.fl": "product_name",</span></span><br><span class="line">		solrQuery.setHighlight(<span class="keyword">true</span>);</span><br><span class="line">		solrQuery.setHighlightSimplePre(<span class="string">"&lt;span style=\"color:red\"&gt;"</span>);</span><br><span class="line">		solrQuery.setHighlightSimplePost(<span class="string">"&lt;/span&gt;"</span>);</span><br><span class="line">		solrQuery.addHighlightField(<span class="string">"product_name"</span>);</span><br><span class="line">		<span class="comment">//设置排序</span></span><br><span class="line"><span class="comment">//	      "sort": "product_price asc",</span></span><br><span class="line">		<span class="keyword">if</span>(sort.equals(<span class="string">"1"</span>)) &#123;</span><br><span class="line">			solrQuery.setSort(<span class="string">"product_price"</span>, ORDER.asc);<span class="comment">//设置升序</span></span><br><span class="line">		&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">			solrQuery.setSort(<span class="string">"product_price"</span>, ORDER.desc);<span class="comment">//设置降序</span></span><br><span class="line">		&#125;</span><br><span class="line">		PageBean pageBean = productDao.queryProduct(solrQuery);</span><br><span class="line">		pageBean.setCurPage(page);</span><br><span class="line">		Long pageCount=pageBean.getRecordCount()/rows;<span class="comment">//计算总页数 总页数=总数/每页显示条数</span></span><br><span class="line">		<span class="keyword">if</span>(pageBean.getRecordCount()%rows&gt;<span class="number">0</span>) &#123; <span class="comment">//判断是否有余数 如果有余数 则总页数+1</span></span><br><span class="line">			pageCount++;</span><br><span class="line">		&#125;</span><br><span class="line">		pageBean.setPageCount(pageCount.intValue());</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">return</span> pageBean;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="6">
<li>controller层</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.gdaib.jd.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ui.Model;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.CrossOrigin;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMethod;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestParam;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ResponseBody;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.gdaib.jd.pojo.PageBean;</span><br><span class="line"><span class="keyword">import</span> com.gdaib.jd.service.ProductService;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@CrossOrigin</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProductController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Autowired</span></span><br><span class="line">	<span class="keyword">private</span> ProductService productService;</span><br><span class="line">	<span class="meta">@RequestMapping</span>(<span class="string">"/list"</span>)</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">list</span><span class="params">(Model model,@RequestParam(defaultValue = <span class="string">"1"</span>)</span><span class="keyword">int</span> page,String queryString,String catalog_name,String price,@<span class="title">RequestParam</span><span class="params">(defaultValue = <span class="string">"1"</span>)</span>String sort) </span>&#123;	</span><br><span class="line"></span><br><span class="line">		PageBean pageBean = productService.queryProduct(page, queryString, catalog_name, price, sort);</span><br><span class="line">		<span class="comment">//System.out.println(pageBean);</span></span><br><span class="line">		model.addAttribute(<span class="string">"result"</span>, pageBean);</span><br><span class="line">		System.out.println(pageBean);</span><br><span class="line">		<span class="comment">//数据回显</span></span><br><span class="line">		model.addAttribute(<span class="string">"queryString"</span>, queryString);</span><br><span class="line">		model.addAttribute(<span class="string">"price"</span>, price);</span><br><span class="line">		model.addAttribute(<span class="string">"catalog_name"</span>, catalog_name);</span><br><span class="line">		model.addAttribute(<span class="string">"sort"</span>, sort);</span><br><span class="line">		</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"product_list"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="meta">@RequestMapping</span>(value=<span class="string">"/list2"</span>,method = &#123; RequestMethod.POST &#125;)</span><br><span class="line">	<span class="meta">@ResponseBody</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> PageBean <span class="title">list2</span><span class="params">(@RequestParam(defaultValue = <span class="string">"1"</span>)</span><span class="keyword">int</span> page,String queryString,String catalog_name,String price,@<span class="title">RequestParam</span><span class="params">(defaultValue = <span class="string">"1"</span>)</span>String sort) </span>&#123;	</span><br><span class="line"></span><br><span class="line">		PageBean pageBean = productService.queryProduct(page, queryString, catalog_name, price, sort);</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">return</span> pageBean;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


        
    </section>
</article>


    <article class="article" itemscope itemprop="blogPost">
    
    <header class="article-header">
        
        <h1 itemprop="name">
            <a href="/CPWS.github.io/2019/11/29/搜索引擎框架介绍/">搜索引擎框架介绍</a>
        </h1>
        
        <div class="article-meta clearfix">
            <a class="article-date" href="https://CPWS.github.io/index.html">
    
    <i class="icon-calendar"></i>
    
    <time datetime="2019-11-29T09:04:19.000Z" itemprop="datePublished">2019-11-29</time>
</a>

            
<div class="article-tag-list">
    <i class="icon-tag"></i>
    <a class="article-tag-link" href="/CPWS.github.io/tags/搜索引擎框架介绍/">搜索引擎框架介绍</a>
</div>


        </div>
    </header>
    
    <section class="article-body markdown-body">
        
        <h2 id="9个基于Java的搜索引擎框架"><a href="#9个基于Java的搜索引擎框架" class="headerlink" title="9个基于Java的搜索引擎框架"></a>9个基于Java的搜索引擎框架</h2><ul>
<li>转自：<code>https://blog.csdn.net/y19910825/article/details/78982429</code></li>
</ul>
<hr>
<h3 id="Java全文搜索引擎框架-Lucene"><a href="#Java全文搜索引擎框架-Lucene" class="headerlink" title="Java全文搜索引擎框架 Lucene"></a>Java全文搜索引擎框架 <code>Lucene</code></h3><ul>
<li>毫无疑问，Lucene是目前最受欢迎的Java全文搜索框架，准确地说，它是一个全文检索引擎的架构，提供了完整的查询引擎和索引引擎，部分文本分析引擎。Lucene为开发人员提供了相当完整的工具包，可以非常方便地实现强大的全文检索功能。下面有几款搜索引擎框架也是基于Lucene实现的。</li>
<li><code>官方网站：http://lucene.apache.org/</code><h3 id="开源Java搜索引擎Nutch"><a href="#开源Java搜索引擎Nutch" class="headerlink" title="开源Java搜索引擎Nutch"></a>开源Java搜索引擎<code>Nutch</code></h3></li>
<li>Nutch 是一个开源Java实现的搜索引擎。它提供了我们运行自己的搜索引擎所需的全部工具。包括全文搜索和Web爬虫。</li>
<li>利用Nutch，你可以做到以下这些功能：<ul>
<li>每为这些网页维护一个索引</li>
<li>个月取几十亿网页</li>
<li>对索引文件进行每秒上千次的搜索</li>
<li>提供高质量的搜索结果</li>
<li>最小的成本运作</li>
</ul>
</li>
<li><code>官方网站：http://nutch.apache.org/</code><h3 id="分布式搜索引擎Elasticsearch"><a href="#分布式搜索引擎Elasticsearch" class="headerlink" title="分布式搜索引擎Elasticsearch"></a>分布式搜索引擎<code>Elasticsearch</code></h3></li>
<li>ElasticSearch就是一款基于Lucene框架的分布式搜索引擎，并且也是一款为数不多的基于JSON进行索引的搜索引擎。ElasticSearch特别适合在云计算平台上使用。</li>
<li>官方网站：<a href="http://www.elasticsearch.org/" target="_blank" rel="noopener">http://www.elasticsearch.org/</a><h3 id="实时分布式搜索引擎Solandra"><a href="#实时分布式搜索引擎Solandra" class="headerlink" title="实时分布式搜索引擎Solandra"></a>实时分布式搜索引擎<code>Solandra</code></h3></li>
<li>Solandra 是一个实时的分布式搜索引擎，基于 Apache Solr 和 Apache Cassandra 构建。</li>
<li>其特性如下：<ul>
<li>支持Solr的大多数默认特性 (search, faceting, highlights)</li>
<li>数据复制，分片，缓存及压缩这些都由Cassandra来进行 </li>
<li>Multi-master (任意结点都可供读写)</li>
<li>实时性高，写操作完成即可读到</li>
<li>Easily add new SolrCores w/o restart across the cluster 轻松添加及重启结点</li>
</ul>
</li>
<li><code>官方网站：https://github.com/tjake/Solandra</code><h3 id="IndexTank"><a href="#IndexTank" class="headerlink" title="IndexTank"></a>IndexTank</h3></li>
<li>IndexTank是一套基于Java的索引-实时全文搜索引擎实现，IndexTank有以下几个特点：<ul>
<li>索引更新实时生效</li>
<li>地理位置搜索</li>
<li>支持多种客户端语言,<code>Ruby, Rails, Python, Java, PHP, .NET &amp; more!</code></li>
<li>支持灵活的排序与评分控制</li>
<li>支持自动完成</li>
<li>支持面搜索（facet search）</li>
<li>支持匹配高亮</li>
<li>支持海量数据扩展（Scalable from a personal blog to hundreds of millions of documents! ）</li>
<li>支持动态数据</li>
</ul>
</li>
<li><code>官方网站：https://github.com/linkedin/indextank-engine</code><h3 id="搜索引擎Compass"><a href="#搜索引擎Compass" class="headerlink" title="搜索引擎Compass"></a>搜索引擎Compass</h3></li>
<li>Compass是一个强大的,事务的,高性能的对象/搜索引擎映射(OSEM:object/search engine mapping)与一个Java持久层框架.Compass包括:<ul>
<li>搜索引擎抽象层(使用Lucene搜索引荐)</li>
<li>OSEM (Object/Search Engine Mapping) 支持</li>
<li>事务管理</li>
<li>类似于Google的简单关键字查询语言</li>
<li>可扩展与模块化的框架</li>
<li>简单的API</li>
</ul>
</li>
<li><code>官方网站：http://www.compass-project.org/</code><h3 id="Java全文搜索服务器solr"><a href="#Java全文搜索服务器solr" class="headerlink" title="Java全文搜索服务器solr"></a>Java全文搜索服务器<code>solr</code></h3></li>
<li>Solr也是基于Java实现的，并且是基于Lucene实现的，Solr的主要特性包括：高效、灵活的缓存功能，垂直搜索功能，高亮显示搜索结果。值得注意的是，Solr还提供一款很棒的Web界面来管理索引的数据。</li>
<li><code>官方网站：http://lucene.apache.org/solr/</code><h3 id="Lucene图片搜索-LIRE"><a href="#Lucene图片搜索-LIRE" class="headerlink" title="Lucene图片搜索 LIRE"></a>Lucene图片搜索 LIRE</h3></li>
<li>LIRE是一款基于Java的图片搜索框架，其核心也是基于Lucene的，利用该索引就能够构建一个基于内容的图像检索(content- based image retrieval，CBIR)系统，来搜索相似的图像。图片搜索LIRE</li>
<li><code>官方网站：http://www.semanticmetadata.net/lire/</code><h3 id="全文本搜索引擎Egothor"><a href="#全文本搜索引擎Egothor" class="headerlink" title="全文本搜索引擎Egothor"></a>全文本搜索引擎Egothor</h3></li>
<li>Egothor是一个用Java编写的开源而高效的全文本搜索引擎。借助Java的跨平台特性，Egothor能应用于任何环境的应用，既可配置为单独的搜索引擎，又能用于你的应用作为全文检索之用。</li>
<li><code>官方网站：http://www.egothor.org/cms/</code></li>
</ul>

        
    </section>
</article>




<nav class="page-nav">
    <span class="page-number current">1</span><a class="page-number" href="/CPWS.github.io/page/2/">2</a><a class="page-number" href="/CPWS.github.io/page/3/">3</a><a class="page-number" href="/CPWS.github.io/page/4/">4</a><a class="extend next" rel="next" href="/CPWS.github.io/page/2/">Next &raquo;</a>
</nav>



            </div>
        </div>
        <footer class="footer">
    Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>, Theme by <a href="https://github.com/sanonz/hexo-theme-concise" target="_blank">Concise</a>

    
    <script>
        var _hmt = _hmt || [];
        (function () {
            var hm = document.createElement("script");
            hm.src = "https://hm.baidu.com/hm.js?e4027971a230b210f4671f485b33846a";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();
    </script>
    
</footer>

    </main>

    <script type="text/javascript" src="https://cdn.bootcss.com/jquery/1.9.0/jquery.min.js"></script>
    <script type="text/javascript">
    $(function() {
        var nodes = {
            nav: $('#nav'),
            aside: $('#aside'),
            asideInner: $('#aside-inner'),
            navInner: $('#nav-inner')
        };

        var doing = false;
        nodes.asideInner.on('webkitAnimationEnd mozAnimationEnd oAnimationEnd oanimationend animationend', function() {
            if (nodes.aside.hasClass('mobile-open')) {
                nodes.aside.removeClass('mobile-open');
            } else {
                nodes.aside.removeClass('mobile-close panel-show');
            }
            doing = false;
        });
        $('#open-panel, #aside-mask').on('click', function() {
            if (doing) {
                return;
            }

            if (nodes.aside.hasClass('panel-show')) {
                nodes.aside.addClass('mobile-close');
            } else {
                nodes.aside.addClass('mobile-open panel-show');
            }
        });
        $('#open-menus').on('click', function() {
            nodes.navInner.slideToggle();
        });

        if (window.innerWidth <= 960) {
            setTimeout(function() {
                nodes.navInner.slideUp();
            }, 3000);
        }
    });
    </script>
    

</body>
</html>
